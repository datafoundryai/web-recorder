/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/rrweb@2.0.0-alpha.18/dist/rrweb.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _a,__defProp=Object.defineProperty,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField=(e,t,r)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,r),__defProp$1=Object.defineProperty,__defNormalProp$1=(e,t,r)=>t in e?__defProp$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField$1=(e,t,r)=>__defNormalProp$1(e,"symbol"!=typeof t?t+"":t,r),NodeType$3=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(NodeType$3||{});const testableAccessors$1={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods$1={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype$1={},isAngularZonePresent$1=()=>!!globalThis.Zone;function getUntaintedPrototype$1(e){if(untaintedBasePrototype$1[e])return untaintedBasePrototype$1[e];const t=globalThis[e],r=t.prototype,s=e in testableAccessors$1?testableAccessors$1[e]:void 0,o=Boolean(s&&s.every((e=>{var t,s;return Boolean(null==(s=null==(t=Object.getOwnPropertyDescriptor(r,e))?void 0:t.get)?void 0:s.toString().includes("[native code]"))}))),n=e in testableMethods$1?testableMethods$1[e]:void 0,i=Boolean(n&&n.every((e=>{var t;return"function"==typeof r[e]&&(null==(t=r[e])?void 0:t.toString().includes("[native code]"))})));if(o&&i&&!isAngularZonePresent$1())return untaintedBasePrototype$1[e]=t.prototype,t.prototype;try{const s=document.createElement("iframe");document.body.appendChild(s);const o=s.contentWindow;if(!o)return t.prototype;const n=o[e].prototype;return document.body.removeChild(s),n?untaintedBasePrototype$1[e]=n:r}catch{return r}}const untaintedAccessorCache$1={};function getUntaintedAccessor$1(e,t,r){var s;const o=`${e}.${String(r)}`;if(untaintedAccessorCache$1[o])return untaintedAccessorCache$1[o].call(t);const n=getUntaintedPrototype$1(e),i=null==(s=Object.getOwnPropertyDescriptor(n,r))?void 0:s.get;return i?(untaintedAccessorCache$1[o]=i,i.call(t)):t[r]}const untaintedMethodCache$1={};function getUntaintedMethod$1(e,t,r){const s=`${e}.${String(r)}`;if(untaintedMethodCache$1[s])return untaintedMethodCache$1[s].bind(t);const o=getUntaintedPrototype$1(e)[r];return"function"!=typeof o?t[r]:(untaintedMethodCache$1[s]=o,o.bind(t))}function childNodes$1(e){return getUntaintedAccessor$1("Node",e,"childNodes")}function parentNode$1(e){return getUntaintedAccessor$1("Node",e,"parentNode")}function parentElement$1(e){return getUntaintedAccessor$1("Node",e,"parentElement")}function textContent$1(e){return getUntaintedAccessor$1("Node",e,"textContent")}function contains$1(e,t){return getUntaintedMethod$1("Node",e,"contains")(t)}function getRootNode$1(e){return getUntaintedMethod$1("Node",e,"getRootNode")()}function host$1(e){return e&&"host"in e?getUntaintedAccessor$1("ShadowRoot",e,"host"):null}function styleSheets$1(e){return e.styleSheets}function shadowRoot$1(e){return e&&"shadowRoot"in e?getUntaintedAccessor$1("Element",e,"shadowRoot"):null}function querySelector$1(e,t){return getUntaintedAccessor$1("Element",e,"querySelector")(t)}function querySelectorAll$1(e,t){return getUntaintedAccessor$1("Element",e,"querySelectorAll")(t)}function mutationObserverCtor$1(){return getUntaintedPrototype$1("MutationObserver").constructor}const index$1={childNodes:childNodes$1,parentNode:parentNode$1,parentElement:parentElement$1,textContent:textContent$1,contains:contains$1,getRootNode:getRootNode$1,host:host$1,styleSheets:styleSheets$1,shadowRoot:shadowRoot$1,querySelector:querySelector$1,querySelectorAll:querySelectorAll$1,mutationObserver:mutationObserverCtor$1};function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){const t=e&&"host"in e&&"mode"in e&&index$1.host(e)||null;return Boolean(t&&"shadowRoot"in t&&index$1.shadowRoot(t)===e)}function isNativeShadowDom(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function fixBrowserCompatibilityIssuesInCSS(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function escapeImportStatement(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const r=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?r.push("layer"):e.layerName&&r.push(`layer(${e.layerName})`),e.supportsText&&r.push(`supports(${e.supportsText})`),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}function stringifyStylesheet(e){try{const t=e.rules||e.cssRules;if(!t)return null;let r=e.href;!r&&e.ownerNode&&e.ownerNode.ownerDocument&&(r=e.ownerNode.ownerDocument.location.href);return fixBrowserCompatibilityIssuesInCSS(Array.from(t,(e=>stringifyRule(e,r))).join(""))}catch(e){return null}}function stringifyRule(e,t){if(isCSSImportRule(e)){let t;try{t=stringifyStylesheet(e.styleSheet)||escapeImportStatement(e)}catch(r){t=e.cssText}return e.styleSheet.href?absolutifyURLs(t,e.styleSheet.href):t}{let r=e.cssText;return isCSSStyleRule(e)&&e.selectorText.includes(":")&&(r=fixSafariColons(r)),t?absolutifyURLs(r,t):r}}function fixSafariColons(e){return e.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")}function isCSSImportRule(e){return"styleSheet"in e}function isCSSStyleRule(e){return"selectorText"in e}class Mirror{constructor(){__publicField$1(this,"idNodeMap",new Map),__publicField$1(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const e=this.nodeMetaMap.get(r);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function createMirror$2(){return new Mirror}function maskInputValue({element:e,maskInputOptions:t,tagName:r,type:s,value:o,maskInputFn:n}){let i=o||"";const a=s&&toLowerCase(s);return(t[r.toLowerCase()]||a&&t[a])&&(i=n?n(i,e):"*".repeat(i.length)),i}function toLowerCase(e){return e.toLowerCase()}const ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__";function is2DCanvasBlank(e){const t=e.getContext("2d");if(!t)return!0;for(let r=0;r<e.width;r+=50)for(let s=0;s<e.height;s+=50){const o=t.getImageData,n="__rrweb_original__"in o?o.__rrweb_original__:o;if(new Uint32Array(n.call(t,r,s,Math.min(50,e.width-r),Math.min(50,e.height-s)).data.buffer).some((e=>0!==e)))return!1}return!0}function isNodeMetaEqual(e,t){return!(!e||!t||e.type!==t.type)&&(e.type===NodeType$3.Document?e.compatMode===t.compatMode:e.type===NodeType$3.DocumentType?e.name===t.name&&e.publicId===t.publicId&&e.systemId===t.systemId:e.type===NodeType$3.Comment||e.type===NodeType$3.Text||e.type===NodeType$3.CDATA?e.textContent===t.textContent:e.type===NodeType$3.Element&&(e.tagName===t.tagName&&JSON.stringify(e.attributes)===JSON.stringify(t.attributes)&&e.isSVG===t.isSVG&&e.needBlock===t.needBlock))}function getInputType(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?toLowerCase(t):null}function extractFileExtension(e,t){let r;try{r=new URL(e,t??window.location.href)}catch(e){return null}const s=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(null==s?void 0:s[1])??null}function extractOrigin(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}const URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,URL_PROTOCOL_MATCH=/^(?:[a-z+]+:)?\/\//i,URL_WWW_MATCH=/^www\..*/i,DATA_URI=/^(data:)([^,]*),(.*)/i;function absolutifyURLs(e,t){return(e||"").replace(URL_IN_CSS_REF,((e,r,s,o,n,i)=>{const a=s||n||i,l=r||o||"";if(!a)return e;if(URL_PROTOCOL_MATCH.test(a)||URL_WWW_MATCH.test(a))return`url(${l}${a}${l})`;if(DATA_URI.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${extractOrigin(t)+a}${l})`;const c=t.split("/"),u=a.split("/");c.pop();for(const e of u)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`}))}function normalizeCssString(e){return e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"")}function splitCssText(e,t){const r=Array.from(t.childNodes),s=[];if(r.length>1&&e&&"string"==typeof e){const t=normalizeCssString(e);for(let o=1;o<r.length;o++)if(r[o].textContent&&"string"==typeof r[o].textContent){const n=normalizeCssString(r[o].textContent);for(let r=3;r<n.length;r++){const o=n.substring(0,r);if(2===t.split(o).length){const r=t.indexOf(o);for(let t=r;t<e.length;t++)if(normalizeCssString(e.substring(0,t)).length===r){s.push(e.substring(0,t)),e=e.substring(t);break}break}}}}return s.push(e),s}function markCssSplits(e,t){return splitCssText(e,t).join("/* rr_split */")}let _id=1;const tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2;function genId(){return _id++}function getValidTagName$1(e){if(e instanceof HTMLFormElement)return"form";const t=toLowerCase(e.tagName);return tagNameRegex.test(t)?"div":t}let canvasService,canvasCtx;const SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/;function getAbsoluteSrcsetString(e,t){if(""===t.trim())return t;let r=0;function s(e){let s;const o=e.exec(t.substring(r));return o?(s=o[0],r+=s.length,s):""}const o=[];for(;s(SRCSET_COMMAS_OR_SPACES),!(r>=t.length);){let n=s(SRCSET_NOT_SPACES);if(","===n.slice(-1))n=absoluteToDoc(e,n.substring(0,n.length-1)),o.push(n);else{let s="";n=absoluteToDoc(e,n);let i=!1;for(;;){const e=t.charAt(r);if(""===e){o.push((n+s).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){r+=1,o.push((n+s).trim());break}"("===e&&(i=!0)}s+=e,r+=1}}}return o.join(", ")}const cachedDocument=new WeakMap;function absoluteToDoc(e,t){return t&&""!==t.trim()?getHref(e,t):t}function isSVGElement(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function getHref(e,t){let r=cachedDocument.get(e);if(r||(r=e.createElement("a"),cachedDocument.set(e,r)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return r.setAttribute("href",t),r.href}function transformAttribute(e,t,r,s){return s?"src"===r||"href"===r&&("use"!==t||"#"!==s[0])||"xlink:href"===r&&"#"!==s[0]?absoluteToDoc(e,s):"background"!==r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===r?getAbsoluteSrcsetString(e,s):"style"===r?absolutifyURLs(s,getHref(e)):"object"===t&&"data"===r?absoluteToDoc(e,s):s:absoluteToDoc(e,s):s}function ignoreAttribute(e,t,r){return("video"===e||"audio"===e)&&"autoplay"===t}function _isBlockedElement(e,t,r){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let r=e.classList.length;r--;){const s=e.classList[r];if(t.test(s))return!0}if(r)return e.matches(r)}catch(e){}return!1}function classMatchesRegex(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&classMatchesRegex(index$1.parentNode(e),t,r);for(let r=e.classList.length;r--;){const s=e.classList[r];if(t.test(s))return!0}return!!r&&classMatchesRegex(index$1.parentNode(e),t,r)}function needMaskingText(e,t,r,s){let o;if(isElement(e)){if(o=e,!index$1.childNodes(o).length)return!1}else{if(null===index$1.parentElement(e))return!1;o=index$1.parentElement(e)}try{if("string"==typeof t){if(s){if(o.closest(`.${t}`))return!0}else if(o.classList.contains(t))return!0}else if(classMatchesRegex(o,t,s))return!0;if(r)if(s){if(o.closest(r))return!0}else if(o.matches(r))return!0}catch(e){}return!1}function onceIframeLoaded(e,t,r){const s=e.contentWindow;if(!s)return;let o,n=!1;try{o=s.document.readyState}catch(e){return}if("complete"!==o){const s=setTimeout((()=>{n||(t(),n=!0)}),r);return void e.addEventListener("load",(()=>{clearTimeout(s),n=!0,t()}))}const i="about:blank";if(s.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function onceStylesheetLoaded(e,t,r){let s,o=!1;try{s=e.sheet}catch(e){return}if(s)return;const n=setTimeout((()=>{o||(t(),o=!0)}),r);e.addEventListener("load",(()=>{clearTimeout(n),o=!0,t()}))}function serializeNode(e,t){const{doc:r,mirror:s,blockClass:o,blockSelector:n,needsMask:i,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:h,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:f=!1,cssCaptured:g=!1}=t,y=getRootId(r,s);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:NodeType$3.Document,childNodes:[],compatMode:e.compatMode}:{type:NodeType$3.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:NodeType$3.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:y};case e.ELEMENT_NODE:return serializeElementNode(e,{doc:r,blockClass:o,blockSelector:n,inlineStylesheet:a,maskInputOptions:l,maskInputFn:u,dataURLOptions:d,inlineImages:h,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:f,rootId:y});case e.TEXT_NODE:return serializeTextNode(e,{doc:r,needsMask:i,maskTextFn:c,rootId:y,cssCaptured:g});case e.CDATA_SECTION_NODE:return{type:NodeType$3.CDATA,textContent:"",rootId:y};case e.COMMENT_NODE:return{type:NodeType$3.Comment,textContent:index$1.textContent(e)||"",rootId:y};default:return!1}}function getRootId(e,t){if(!t.hasNode(e))return;const r=t.getId(e);return 1===r?void 0:r}function serializeTextNode(e,t){const{needsMask:r,maskTextFn:s,rootId:o,cssCaptured:n}=t,i=index$1.parentNode(e),a=i&&i.tagName;let l="";const c="STYLE"===a||void 0,u="SCRIPT"===a||void 0;return u?l="SCRIPT_PLACEHOLDER":n||(l=index$1.textContent(e),c&&l&&(l=absolutifyURLs(l,getHref(t.doc)))),!c&&!u&&l&&r&&(l=s?s(l,index$1.parentElement(e)):l.replace(/[\S]/g,"*")),{type:NodeType$3.Text,textContent:l||"",rootId:o}}function serializeElementNode(e,t){const{doc:r,blockClass:s,blockSelector:o,inlineStylesheet:n,maskInputOptions:i={},maskInputFn:a,dataURLOptions:l={},inlineImages:c,recordCanvas:u,keepIframeSrcFn:d,newlyAddedElement:h=!1,rootId:p}=t,m=_isBlockedElement(e,s,o),f=getValidTagName$1(e);let g={};const y=e.attributes.length;for(let t=0;t<y;t++){const s=e.attributes[t];ignoreAttribute(f,s.name,s.value)||(g[s.name]=transformAttribute(r,f,toLowerCase(s.name),s.value))}if("link"===f&&n){const t=Array.from(r.styleSheets).find((t=>t.href===e.href));let s=null;t&&(s=stringifyStylesheet(t)),s&&(delete g.rel,delete g.href,g._cssText=s)}if("style"===f&&e.sheet){let t=stringifyStylesheet(e.sheet);t&&(e.childNodes.length>1&&(t=markCssSplits(t,e)),g._cssText=t)}if("input"===f||"textarea"===f||"select"===f){const t=e.value,r=e.checked;"radio"!==g.type&&"checkbox"!==g.type&&"submit"!==g.type&&"button"!==g.type&&t?g.value=maskInputValue({element:e,type:getInputType(e),tagName:f,value:t,maskInputOptions:i,maskInputFn:a}):r&&(g.checked=r)}if("option"===f&&(e.selected&&!i.select?g.selected=!0:delete g.selected),"dialog"===f&&e.open&&(g.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal"),"canvas"===f&&u)if("2d"===e.__context)is2DCanvasBlank(e)||(g.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),s=r.createElement("canvas");s.width=e.width,s.height=e.height;t!==s.toDataURL(l.type,l.quality)&&(g.rr_dataURL=t)}if("img"===f&&c){canvasService||(canvasService=r.createElement("canvas"),canvasCtx=canvasService.getContext("2d"));const t=e,s=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,n=()=>{t.removeEventListener("load",n);try{canvasService.width=t.naturalWidth,canvasService.height=t.naturalHeight,canvasCtx.drawImage(t,0,0),g.rr_dataURL=canvasService.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?n():t.addEventListener("load",n));console.warn(`Cannot inline img src=${s}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(o?g.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?n():t.addEventListener("load",n)}if("audio"===f||"video"===f){const t=g;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}if(h||(e.scrollLeft&&(g.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(g.rr_scrollTop=e.scrollTop)),m){const{width:t,height:r}=e.getBoundingClientRect();g={class:g.class,rr_width:`${t}px`,rr_height:`${r}px`}}let S;"iframe"!==f||d(g.src)||(e.contentDocument||(g.rr_src=g.src),delete g.src);try{customElements.get(f)&&(S=!0)}catch(e){}return{type:NodeType$3.Element,tagName:f,attributes:g,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:m,rootId:p,isCustom:S}}function lowerIfExists(e){return null==e?"":e.toLowerCase()}function slimDOMExcluded(e,t){if(t.comment&&e.type===NodeType$3.Comment)return!0;if(e.type===NodeType$3.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===extractFileExtension(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(e.attributes.name)||"icon"===lowerIfExists(e.attributes.rel)||"apple-touch-icon"===lowerIfExists(e.attributes.rel)||"shortcut icon"===lowerIfExists(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===lowerIfExists(e.attributes.name)||"googlebot"===lowerIfExists(e.attributes.name)||"bingbot"===lowerIfExists(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===lowerIfExists(e.attributes.name)||"generator"===lowerIfExists(e.attributes.name)||"framework"===lowerIfExists(e.attributes.name)||"publisher"===lowerIfExists(e.attributes.name)||"progid"===lowerIfExists(e.attributes.name)||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===lowerIfExists(e.attributes.name)||"yandex-verification"===lowerIfExists(e.attributes.name)||"csrf-token"===lowerIfExists(e.attributes.name)||"p:domain_verify"===lowerIfExists(e.attributes.name)||"verify-v1"===lowerIfExists(e.attributes.name)||"verification"===lowerIfExists(e.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(e.attributes.name)))return!0}}return!1}function serializeNodeWithId(e,t){const{doc:r,mirror:s,blockClass:o,blockSelector:n,maskTextClass:i,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:c=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:h,slimDOMOptions:p,dataURLOptions:m={},inlineImages:f=!1,recordCanvas:g=!1,onSerialize:y,onIframeLoad:S,iframeLoadTimeout:b=5e3,onStylesheetLoad:v,stylesheetLoadTimeout:$=5e3,keepIframeSrcFn:w=()=>!1,newlyAddedElement:C=!1,cssCaptured:E=!1}=t;let{needsMask:R}=t,{preserveWhiteSpace:I=!0}=t;if(!R){R=needMaskingText(e,i,a,void 0===R)}const N=serializeNode(e,{doc:r,mirror:s,blockClass:o,blockSelector:n,needsMask:R,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,dataURLOptions:m,inlineImages:f,recordCanvas:g,keepIframeSrcFn:w,newlyAddedElement:C,cssCaptured:E});if(!N)return console.warn(e,"not serialized"),null;let T;T=s.hasNode(e)?s.getId(e):slimDOMExcluded(N,p)||!I&&N.type===NodeType$3.Text&&!N.textContent.replace(/^\s+|\s+$/gm,"").length?-2:genId();const M=Object.assign(N,{id:T});if(s.add(e,M),-2===T)return null;y&&y(e);let x=!l;if(M.type===NodeType$3.Element){x=x&&!M.needBlock,delete M.needBlock;const t=index$1.shadowRoot(e);t&&isNativeShadowDom(t)&&(M.isShadowHost=!0)}if((M.type===NodeType$3.Document||M.type===NodeType$3.Element)&&x){p.headWhitespace&&M.type===NodeType$3.Element&&"head"===M.tagName&&(I=!1);const t={doc:r,mirror:s,blockClass:o,blockSelector:n,needsMask:R,maskTextClass:i,maskTextSelector:a,skipChild:l,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:p,dataURLOptions:m,inlineImages:f,recordCanvas:g,preserveWhiteSpace:I,onSerialize:y,onIframeLoad:S,iframeLoadTimeout:b,onStylesheetLoad:v,stylesheetLoadTimeout:$,keepIframeSrcFn:w,cssCaptured:!1};if(M.type===NodeType$3.Element&&"textarea"===M.tagName&&void 0!==M.attributes.value);else{M.type===NodeType$3.Element&&void 0!==M.attributes._cssText&&"string"==typeof M.attributes._cssText&&(t.cssCaptured=!0);for(const r of Array.from(index$1.childNodes(e))){const e=serializeNodeWithId(r,t);e&&M.childNodes.push(e)}}let C=null;if(isElement(e)&&(C=index$1.shadowRoot(e)))for(const e of Array.from(index$1.childNodes(C))){const r=serializeNodeWithId(e,t);r&&(isNativeShadowDom(C)&&(r.isShadow=!0),M.childNodes.push(r))}}const _=index$1.parentNode(e);return _&&isShadowRoot(_)&&isNativeShadowDom(_)&&(M.isShadow=!0),M.type===NodeType$3.Element&&"iframe"===M.tagName&&onceIframeLoaded(e,(()=>{const t=e.contentDocument;if(t&&S){const r=serializeNodeWithId(t,{doc:t,mirror:s,blockClass:o,blockSelector:n,needsMask:R,maskTextClass:i,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:p,dataURLOptions:m,inlineImages:f,recordCanvas:g,preserveWhiteSpace:I,onSerialize:y,onIframeLoad:S,iframeLoadTimeout:b,onStylesheetLoad:v,stylesheetLoadTimeout:$,keepIframeSrcFn:w});r&&S(e,r)}}),b),M.type===NodeType$3.Element&&"link"===M.tagName&&"string"==typeof M.attributes.rel&&("stylesheet"===M.attributes.rel||"preload"===M.attributes.rel&&"string"==typeof M.attributes.href&&"css"===extractFileExtension(M.attributes.href))&&onceStylesheetLoaded(e,(()=>{if(v){const t=serializeNodeWithId(e,{doc:r,mirror:s,blockClass:o,blockSelector:n,needsMask:R,maskTextClass:i,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:p,dataURLOptions:m,inlineImages:f,recordCanvas:g,preserveWhiteSpace:I,onSerialize:y,onIframeLoad:S,iframeLoadTimeout:b,onStylesheetLoad:v,stylesheetLoadTimeout:$,keepIframeSrcFn:w});t&&v(e,t)}}),$),M}function snapshot(e,t){const{mirror:r=new Mirror,blockClass:s="rr-block",blockSelector:o=null,maskTextClass:n="rr-mask",maskTextSelector:i=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:c=!1,maskAllInputs:u=!1,maskTextFn:d,maskInputFn:h,slimDOM:p=!1,dataURLOptions:m,preserveWhiteSpace:f,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:S,onStylesheetLoad:b,stylesheetLoadTimeout:v,keepIframeSrcFn:$=()=>!1}=t||{};return serializeNodeWithId(e,{doc:e,mirror:r,blockClass:s,blockSelector:o,maskTextClass:n,maskTextSelector:i,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===u?{password:!0}:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===p,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===p?{}:p,dataURLOptions:m,inlineImages:l,recordCanvas:c,preserveWhiteSpace:f,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:S,onStylesheetLoad:b,stylesheetLoadTimeout:v,keepIframeSrcFn:$,newlyAddedElement:!1})}const MEDIA_SELECTOR=/(max|min)-device-(width|height)/,MEDIA_SELECTOR_GLOBAL=new RegExp(MEDIA_SELECTOR.source,"g"),mediaSelectorPlugin={postcssPlugin:"postcss-custom-selectors",prepare:()=>({postcssPlugin:"postcss-custom-selectors",AtRule:function(e){e.params.match(MEDIA_SELECTOR_GLOBAL)&&(e.params=e.params.replace(MEDIA_SELECTOR_GLOBAL,"$1-$2"))}})},pseudoClassPlugin={postcssPlugin:"postcss-hover-classes",prepare:function(){const e=[];return{Rule:function(t){-1===e.indexOf(t)&&(e.push(t),t.selectors.forEach((function(e){e.includes(":hover")&&(t.selector+=",\n"+e.replace(/:hover/g,".\\:hover"))})))}}}};function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var s=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,s.get?s:{enumerable:!0,get:function(){return e[t]}})})),r}var picocolors_browser$1={exports:{}},x$1=String,create$1=function(){return{isColorSupported:!1,reset:x$1,bold:x$1,dim:x$1,italic:x$1,underline:x$1,inverse:x$1,hidden:x$1,strikethrough:x$1,black:x$1,red:x$1,green:x$1,yellow:x$1,blue:x$1,magenta:x$1,cyan:x$1,white:x$1,gray:x$1,bgBlack:x$1,bgRed:x$1,bgGreen:x$1,bgYellow:x$1,bgBlue:x$1,bgMagenta:x$1,bgCyan:x$1,bgWhite:x$1}};picocolors_browser$1.exports=create$1(),picocolors_browser$1.exports.createColors=create$1;var picocolors_browserExports$1=picocolors_browser$1.exports;const __viteBrowserExternal$2={},__viteBrowserExternal$1$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal$2},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace$1(__viteBrowserExternal$1$1);let pico$1=picocolors_browserExports$1,terminalHighlight$1$1=require$$2$1,CssSyntaxError$3$1=class e extends Error{constructor(t,r,s,o,n,i){super(t),this.name="CssSyntaxError",this.reason=t,n&&(this.file=n),o&&(this.source=o),i&&(this.plugin=i),void 0!==r&&void 0!==s&&("number"==typeof r?(this.line=r,this.column=s):(this.line=r.line,this.column=r.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=pico$1.isColorSupported),terminalHighlight$1$1&&e&&(t=terminalHighlight$1$1(t));let r,s,o=t.split(/\r?\n/),n=Math.max(this.line-3,0),i=Math.min(this.line+2,o.length),a=String(i).length;if(e){let{bold:e,gray:t,red:o}=pico$1.createColors(!0);r=t=>e(o(t)),s=e=>t(e)}else r=s=e=>e;return o.slice(n,i).map(((e,t)=>{let o=n+1+t,i=" "+(" "+o).slice(-a)+" | ";if(o===this.line){let t=s(i.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+s(i)+e+"\n "+t+r("^")}return" "+s(i)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var cssSyntaxError$1=CssSyntaxError$3$1;CssSyntaxError$3$1.default=CssSyntaxError$3$1;var symbols$1={};symbols$1.isClean=Symbol("isClean"),symbols$1.my=Symbol("my");const DEFAULT_RAW$1={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize$1(e){return e[0].toUpperCase()+e.slice(1)}let Stringifier$2$1=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,s=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:s&&(r+=" "),e.nodes)this.block(e,r+s);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+s+o,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let s=e.parent,o=0;for(;s&&"root"!==s.type;)o+=1,s=s.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<o;e++)r+=t}return r}block(e,t){let r,s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let s=0;s<e.nodes.length;s++){let o=e.nodes[s],n=this.raw(o,"before");n&&this.builder(n),this.stringify(o,t!==s||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),s=e.prop+r+this.rawValue(e,"value");e.important&&(s+=e.raws.important||" !important"),t&&(s+=";"),this.builder(s,e)}document(e){this.body(e)}raw(e,t,r){let s;if(r||(r=t),t&&(s=e.raws[t],void 0!==s))return s;let o=e.parent;if("before"===r){if(!o||"root"===o.type&&o.first===e)return"";if(o&&"document"===o.type)return""}if(!o)return DEFAULT_RAW$1[r];let n=e.root();if(n.rawCache||(n.rawCache={}),void 0!==n.rawCache[r])return n.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let o="raw"+capitalize$1(r);this[o]?s=this[o](n,e):n.walk((e=>{if(s=e.raws[t],void 0!==s)return!1}))}return void 0===s&&(s=DEFAULT_RAW$1[r]),n.rawCache[r]=s,s}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((r=>{let s=r.parent;if(s&&s!==e&&s.parent&&s.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let r=e[t],s=e.raws[t];return s&&s.value===r?s.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var stringifier$1=Stringifier$2$1;Stringifier$2$1.default=Stringifier$2$1;let Stringifier$1$1=stringifier$1;function stringify$4$1(e,t){new Stringifier$1$1(t).stringify(e)}var stringify_1$1=stringify$4$1;stringify$4$1.default=stringify$4$1;let{isClean:isClean$2$1,my:my$2$1}=symbols$1,CssSyntaxError$2$1=cssSyntaxError$1,Stringifier2$1=stringifier$1,stringify$3$1=stringify_1$1;function cloneNode$1(e,t){let r=new e.constructor;for(let s in e){if(!Object.prototype.hasOwnProperty.call(e,s))continue;if("proxyCache"===s)continue;let o=e[s],n=typeof o;"parent"===s&&"object"===n?t&&(r[s]=t):"source"===s?r[s]=o:Array.isArray(o)?r[s]=o.map((e=>cloneNode$1(e,r))):("object"===n&&null!==o&&(o=cloneNode$1(o)),r[s]=o)}return r}let Node$4$1=class{constructor(e={}){this.raws={},this[isClean$2$1]=!1,this[my$2$1]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=cloneNode$1(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:s}=this.rangeBy(t);return this.source.input.error(e,{column:s.column,line:s.line},{column:r.column,line:r.line},t)}return new CssSyntaxError$2$1(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[isClean$2$1]){this[isClean$2$1]=!1;let e=this;for(;e=e.parent;)e[isClean$2$1]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){let s=(t=this.toString()).indexOf(e.word);-1!==s&&(r=this.positionInside(s,t))}return r}positionInside(e,t){let r=t||this.toString(),s=this.source.start.column,o=this.source.start.line;for(let t=0;t<e;t++)"\n"===r[t]?(s=1,o+=1):s+=1;return{column:s,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let s=this.toString(),o=s.indexOf(e.word);-1!==o&&(t=this.positionInside(o,s),r=this.positionInside(o+e.word.length,s))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return(new Stringifier2$1).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let s of e)s===this?r=!0:r?(this.parent.insertAfter(t,s),t=s):this.parent.insertBefore(t,s);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},s=null==t;t=t||new Map;let o=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let s=this[e];if(Array.isArray(s))r[e]=s.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof s&&s.toJSON)r[e]=s.toJSON(null,t);else if("source"===e){let n=t.get(s.input);null==n&&(n=o,t.set(s.input,o),o++),r[e]={end:s.end,inputId:n,start:s.start}}else r[e]=s}return s&&(r.inputs=[...t.keys()].map((e=>e.toJSON()))),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=stringify$3$1){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,r){let s={node:this};for(let e in r)s[e]=r[e];return e.warn(t,s)}get proxyOf(){return this}};var node$1=Node$4$1;Node$4$1.default=Node$4$1;let Node$3$1=node$1,Declaration$4$1=class extends Node$3$1{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var declaration$1=Declaration$4$1;Declaration$4$1.default=Declaration$4$1;let urlAlphabet$1="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet$1=(e,t=21)=>(r=t)=>{let s="",o=r;for(;o--;)s+=e[Math.random()*e.length|0];return s},nanoid$1$1=(e=21)=>{let t="",r=e;for(;r--;)t+=urlAlphabet$1[64*Math.random()|0];return t};var nonSecure$1={nanoid:nanoid$1$1,customAlphabet:customAlphabet$1};let{SourceMapConsumer:SourceMapConsumer$2$1,SourceMapGenerator:SourceMapGenerator$2$1}=require$$2$1,{existsSync:existsSync$1,readFileSync:readFileSync$1}=require$$2$1,{dirname:dirname$1$1,join:join$1}=require$$2$1;function fromBase64$1(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let PreviousMap$2$1=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,s=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname$1$1(this.mapFile)),s&&(this.text=s)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2$1(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return fromBase64$1(e.substr(RegExp.lastMatch.length));let t=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),s=e.indexOf("*/",r);r>-1&&s>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,s)))}loadFile(e){if(this.root=dirname$1$1(e),existsSync$1(e))return this.mapFile=e,readFileSync$1(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof SourceMapConsumer$2$1)return SourceMapGenerator$2$1.fromSourceMap(t).toString();if(t instanceof SourceMapGenerator$2$1)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=join$1(dirname$1$1(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap$1=PreviousMap$2$1;PreviousMap$2$1.default=PreviousMap$2$1;let{SourceMapConsumer:SourceMapConsumer$1$1,SourceMapGenerator:SourceMapGenerator$1$1}=require$$2$1,{fileURLToPath:fileURLToPath$1,pathToFileURL:pathToFileURL$1$1}=require$$2$1,{isAbsolute:isAbsolute$1,resolve:resolve$1$1}=require$$2$1,{nanoid:nanoid$2}=nonSecure$1,terminalHighlight$2=require$$2$1,CssSyntaxError$1$1=cssSyntaxError$1,PreviousMap$1$1=previousMap$1,fromOffsetCache$1=Symbol("fromOffsetCache"),sourceMapAvailable$1$1=Boolean(SourceMapConsumer$1$1&&SourceMapGenerator$1$1),pathAvailable$1$1=Boolean(resolve$1$1&&isAbsolute$1),Input$4$1=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"ï¿¾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!pathAvailable$1$1||/^\w+:\/\//.test(t.from)||isAbsolute$1(t.from)?this.file=t.from:this.file=resolve$1$1(t.from)),pathAvailable$1$1&&sourceMapAvailable$1$1){let e=new PreviousMap$1$1(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+nanoid$2(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,s={}){let o,n,i;if(t&&"object"==typeof t){let e=t,s=r;if("number"==typeof e.offset){let s=this.fromOffset(e.offset);t=s.line,r=s.col}else t=e.line,r=e.column;if("number"==typeof s.offset){let e=this.fromOffset(s.offset);n=e.line,i=e.col}else n=s.line,i=s.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let a=this.origin(t,r,n,i);return o=a?new CssSyntaxError$1$1(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,s.plugin):new CssSyntaxError$1$1(e,void 0===n?t:{column:r,line:t},void 0===n?r:{column:i,line:n},this.css,this.file,s.plugin),o.input={column:r,endColumn:i,endLine:n,line:t,source:this.css},this.file&&(pathToFileURL$1$1&&(o.input.url=pathToFileURL$1$1(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[fromOffsetCache$1])r=this[fromOffsetCache$1];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let s=0,o=e.length;s<o;s++)r[s]=t,t+=e[s].length+1;this[fromOffsetCache$1]=r}t=r[r.length-1];let s=0;if(e>=t)s=r.length-1;else{let t,o=r.length-2;for(;s<o;)if(t=s+(o-s>>1),e<r[t])o=t-1;else{if(!(e>=r[t+1])){s=t;break}s=t+1}}return{col:e-r[s]+1,line:s+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:resolve$1$1(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,s){if(!this.map)return!1;let o,n,i=this.map.consumer(),a=i.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(o=i.originalPositionFor({column:s,line:r})),n=isAbsolute$1(a.source)?pathToFileURL$1$1(a.source):new URL(a.source,this.map.consumer().sourceRoot||pathToFileURL$1$1(this.map.mapFile));let l={column:a.column,endColumn:o&&o.column,endLine:o&&o.line,line:a.line,url:n.toString()};if("file:"===n.protocol){if(!fileURLToPath$1)throw new Error("file: protocol is not available in this PostCSS build");l.file=fileURLToPath$1(n)}let c=i.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var input$1=Input$4$1;Input$4$1.default=Input$4$1,terminalHighlight$2&&terminalHighlight$2.registerInput&&terminalHighlight$2.registerInput(Input$4$1);let{SourceMapConsumer:SourceMapConsumer$3,SourceMapGenerator:SourceMapGenerator$3}=require$$2$1,{dirname:dirname$2,relative:relative$1,resolve:resolve$2,sep:sep$1}=require$$2$1,{pathToFileURL:pathToFileURL$2}=require$$2$1,Input$3$1=input$1,sourceMapAvailable$2=Boolean(SourceMapConsumer$3&&SourceMapGenerator$3),pathAvailable$2=Boolean(dirname$2&&resolve$2&&relative$1&&sep$1),MapGenerator$2$1=class{constructor(e,t,r,s){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=s,this.originalCSS=s,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),s=e.root||dirname$2(e.file);!1===this.mapOpts.sourcesContent?(t=new SourceMapConsumer$3(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(s)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable$2&&sourceMapAvailable$2&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=SourceMapGenerator$3.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,s=1,o="<no source>",n={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((i,a,l)=>{if(this.css+=i,a&&"end"!==l&&(n.generated.line=r,n.generated.column=s-1,a.source&&a.source.start?(n.source=this.sourcePath(a),n.original.line=a.source.start.line,n.original.column=a.source.start.column-1,this.map.addMapping(n)):(n.source=o,n.original.line=1,n.original.column=0,this.map.addMapping(n))),e=i.match(/\n/g),e?(r+=e.length,t=i.lastIndexOf("\n"),s=i.length-t):s+=i.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(n.source=this.sourcePath(a),n.original.line=a.source.end.line,n.original.column=a.source.end.column-1,n.generated.line=r,n.generated.column=s-2,this.map.addMapping(n)):(n.source=o,n.original.line=1,n.original.column=0,n.generated.line=r,n.generated.column=s-1,this.map.addMapping(n)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?dirname$2(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=dirname$2(resolve$2(r,this.mapOpts.annotation)));let s=relative$1(r,e);return this.memoizedPaths.set(e,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new Input$3$1(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let s=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(s,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(pathToFileURL$2){let t=pathToFileURL$2(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===sep$1&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};var mapGenerator$1=MapGenerator$2$1;let Node$2$1=node$1,Comment$4$1=class extends Node$2$1{constructor(e){super(e),this.type="comment"}};var comment$1=Comment$4$1;Comment$4$1.default=Comment$4$1;let parse$4$1,Rule$4$1,AtRule$4$1,Root$6$1,{isClean:isClean$1$1,my:my$1$1}=symbols$1,Declaration$3$1=declaration$1,Comment$3$1=comment$1,Node$1$1=node$1;function cleanSource$1(e){return e.map((e=>(e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e)))}function markDirtyUp$1(e){if(e[isClean$1$1]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)markDirtyUp$1(t)}let Container$7$1=class e extends Node$1$1{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,s=this.getIterator();for(;this.indexes[s]<this.proxyOf.nodes.length&&(t=this.indexes[s],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[s]+=1;return delete this.indexes[s],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map((e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e))):"every"===t||"some"===t?r=>e[t](((e,...t)=>r(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,s=this.index(e),o=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let e of o)this.proxyOf.nodes.splice(s+1,0,e);for(let e in this.indexes)r=this.indexes[e],s<r&&(this.indexes[e]=r+o.length);return this.markDirty(),this}insertBefore(e,t){let r,s=this.index(e),o=0===s&&"prepend",n=this.normalize(t,this.proxyOf.nodes[s],o).reverse();s=this.index(e);for(let e of n)this.proxyOf.nodes.splice(s,0,e);for(let e in this.indexes)r=this.indexes[e],s<=r&&(this.indexes[e]=r+n.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=cleanSource$1(parse$4$1(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Declaration$3$1(t)]}else if(t.selector)t=[new Rule$4$1(t)];else if(t.name)t=[new AtRule$4$1(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Comment$3$1(t)]}return t.map((t=>(t[my$1$1]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[isClean$1$1]&&markDirtyUp$1(t),void 0===t.raws.before&&r&&void 0!==r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls((s=>{t.props&&!t.props.includes(s.prop)||t.fast&&!s.value.includes(t.fast)||(s.value=s.value.replace(e,r))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,r)=>{let s;try{s=e(t,r)}catch(e){throw t.addToError(e)}return!1!==s&&t.walk&&(s=t.walk(e)),s}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((r,s)=>{if("atrule"===r.type&&e.test(r.name))return t(r,s)})):this.walk(((r,s)=>{if("atrule"===r.type&&r.name===e)return t(r,s)})):(t=e,this.walk(((e,r)=>{if("atrule"===e.type)return t(e,r)})))}walkComments(e){return this.walk(((t,r)=>{if("comment"===t.type)return e(t,r)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((r,s)=>{if("decl"===r.type&&e.test(r.prop))return t(r,s)})):this.walk(((r,s)=>{if("decl"===r.type&&r.prop===e)return t(r,s)})):(t=e,this.walk(((e,r)=>{if("decl"===e.type)return t(e,r)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((r,s)=>{if("rule"===r.type&&e.test(r.selector))return t(r,s)})):this.walk(((r,s)=>{if("rule"===r.type&&r.selector===e)return t(r,s)})):(t=e,this.walk(((e,r)=>{if("rule"===e.type)return t(e,r)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7$1.registerParse=e=>{parse$4$1=e},Container$7$1.registerRule=e=>{Rule$4$1=e},Container$7$1.registerAtRule=e=>{AtRule$4$1=e},Container$7$1.registerRoot=e=>{Root$6$1=e};var container$1=Container$7$1;Container$7$1.default=Container$7$1,Container$7$1.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,AtRule$4$1.prototype):"rule"===e.type?Object.setPrototypeOf(e,Rule$4$1.prototype):"decl"===e.type?Object.setPrototypeOf(e,Declaration$3$1.prototype):"comment"===e.type?Object.setPrototypeOf(e,Comment$3$1.prototype):"root"===e.type&&Object.setPrototypeOf(e,Root$6$1.prototype),e[my$1$1]=!0,e.nodes&&e.nodes.forEach((e=>{Container$7$1.rebuild(e)}))};let LazyResult$4$1,Processor$3$1,Container$6$1=container$1,Document$3$1=class extends Container$6$1{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new LazyResult$4$1(new Processor$3$1,this,e).stringify()}};Document$3$1.registerLazyResult=e=>{LazyResult$4$1=e},Document$3$1.registerProcessor=e=>{Processor$3$1=e};var document$1$1=Document$3$1;Document$3$1.default=Document$3$1;let printed$1={};var warnOnce$2$1=function(e){printed$1[e]||(printed$1[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};let Warning$2$1=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning$1=Warning$2$1;Warning$2$1.default=Warning$2$1;let Warning$1$1=warning$1,Result$3$1=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Warning$1$1(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var result$1=Result$3$1;Result$3$1.default=Result$3$1;const SINGLE_QUOTE$1="'".charCodeAt(0),DOUBLE_QUOTE$1='"'.charCodeAt(0),BACKSLASH$1="\\".charCodeAt(0),SLASH$1="/".charCodeAt(0),NEWLINE$1="\n".charCodeAt(0),SPACE$1=" ".charCodeAt(0),FEED$1="\f".charCodeAt(0),TAB$1="\t".charCodeAt(0),CR$1="\r".charCodeAt(0),OPEN_SQUARE$1="[".charCodeAt(0),CLOSE_SQUARE$1="]".charCodeAt(0),OPEN_PARENTHESES$1="(".charCodeAt(0),CLOSE_PARENTHESES$1=")".charCodeAt(0),OPEN_CURLY$1="{".charCodeAt(0),CLOSE_CURLY$1="}".charCodeAt(0),SEMICOLON$1=";".charCodeAt(0),ASTERISK$1="*".charCodeAt(0),COLON$1=":".charCodeAt(0),AT$1="@".charCodeAt(0),RE_AT_END$1=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END$1=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET$1=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE$1=/[\da-f]/i;var tokenize$1=function(e,t={}){let r,s,o,n,i,a,l,c,u,d,h=e.css.valueOf(),p=t.ignoreErrors,m=h.length,f=0,g=[],y=[];function S(t){throw e.error("Unclosed "+t,f)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&f>=m},nextToken:function(e){if(y.length)return y.pop();if(f>=m)return;let t=!!e&&e.ignoreUnclosed;switch(r=h.charCodeAt(f),r){case NEWLINE$1:case SPACE$1:case TAB$1:case CR$1:case FEED$1:s=f;do{s+=1,r=h.charCodeAt(s)}while(r===SPACE$1||r===NEWLINE$1||r===TAB$1||r===CR$1||r===FEED$1);d=["space",h.slice(f,s)],f=s-1;break;case OPEN_SQUARE$1:case CLOSE_SQUARE$1:case OPEN_CURLY$1:case CLOSE_CURLY$1:case COLON$1:case SEMICOLON$1:case CLOSE_PARENTHESES$1:{let e=String.fromCharCode(r);d=[e,e,f];break}case OPEN_PARENTHESES$1:if(c=g.length?g.pop()[1]:"",u=h.charCodeAt(f+1),"url"===c&&u!==SINGLE_QUOTE$1&&u!==DOUBLE_QUOTE$1&&u!==SPACE$1&&u!==NEWLINE$1&&u!==TAB$1&&u!==FEED$1&&u!==CR$1){s=f;do{if(a=!1,s=h.indexOf(")",s+1),-1===s){if(p||t){s=f;break}S("bracket")}for(l=s;h.charCodeAt(l-1)===BACKSLASH$1;)l-=1,a=!a}while(a);d=["brackets",h.slice(f,s+1),f,s],f=s}else s=h.indexOf(")",f+1),n=h.slice(f,s+1),-1===s||RE_BAD_BRACKET$1.test(n)?d=["(","(",f]:(d=["brackets",n,f,s],f=s);break;case SINGLE_QUOTE$1:case DOUBLE_QUOTE$1:o=r===SINGLE_QUOTE$1?"'":'"',s=f;do{if(a=!1,s=h.indexOf(o,s+1),-1===s){if(p||t){s=f+1;break}S("string")}for(l=s;h.charCodeAt(l-1)===BACKSLASH$1;)l-=1,a=!a}while(a);d=["string",h.slice(f,s+1),f,s],f=s;break;case AT$1:RE_AT_END$1.lastIndex=f+1,RE_AT_END$1.test(h),s=0===RE_AT_END$1.lastIndex?h.length-1:RE_AT_END$1.lastIndex-2,d=["at-word",h.slice(f,s+1),f,s],f=s;break;case BACKSLASH$1:for(s=f,i=!0;h.charCodeAt(s+1)===BACKSLASH$1;)s+=1,i=!i;if(r=h.charCodeAt(s+1),i&&r!==SLASH$1&&r!==SPACE$1&&r!==NEWLINE$1&&r!==TAB$1&&r!==CR$1&&r!==FEED$1&&(s+=1,RE_HEX_ESCAPE$1.test(h.charAt(s)))){for(;RE_HEX_ESCAPE$1.test(h.charAt(s+1));)s+=1;h.charCodeAt(s+1)===SPACE$1&&(s+=1)}d=["word",h.slice(f,s+1),f,s],f=s;break;default:r===SLASH$1&&h.charCodeAt(f+1)===ASTERISK$1?(s=h.indexOf("*/",f+2)+1,0===s&&(p||t?s=h.length:S("comment")),d=["comment",h.slice(f,s+1),f,s],f=s):(RE_WORD_END$1.lastIndex=f+1,RE_WORD_END$1.test(h),s=0===RE_WORD_END$1.lastIndex?h.length-1:RE_WORD_END$1.lastIndex-2,d=["word",h.slice(f,s+1),f,s],g.push(d),f=s)}return f++,d},position:function(){return f}}};let Container$5$1=container$1,AtRule$3$1=class extends Container$5$1{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var atRule$1=AtRule$3$1;AtRule$3$1.default=AtRule$3$1,Container$5$1.registerAtRule(AtRule$3$1);let LazyResult$3$1,Processor$2$1,Container$4$1=container$1,Root$5$1=class extends Container$4$1{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let s=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of s)e.raws.before=t.raws.before;return s}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new LazyResult$3$1(new Processor$2$1,this,e).stringify()}};Root$5$1.registerLazyResult=e=>{LazyResult$3$1=e},Root$5$1.registerProcessor=e=>{Processor$2$1=e};var root$1=Root$5$1;Root$5$1.default=Root$5$1,Container$4$1.registerRoot(Root$5$1);let list$2$1={comma:e=>list$2$1.split(e,[","],!0),space:e=>list$2$1.split(e,[" ","\n","\t"]),split(e,t,r){let s=[],o="",n=!1,i=0,a=!1,l="",c=!1;for(let r of e)c?c=!1:"\\"===r?c=!0:a?r===l&&(a=!1):'"'===r||"'"===r?(a=!0,l=r):"("===r?i+=1:")"===r?i>0&&(i-=1):0===i&&t.includes(r)&&(n=!0),n?(""!==o&&s.push(o.trim()),o="",n=!1):o+=r;return(r||""!==o)&&s.push(o.trim()),s}};var list_1$1=list$2$1;list$2$1.default=list$2$1;let Container$3$1=container$1,list$1$1=list_1$1,Rule$3$1=class extends Container$3$1{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1$1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var rule$1=Rule$3$1;Rule$3$1.default=Rule$3$1,Container$3$1.registerRule(Rule$3$1);let Declaration$2$1=declaration$1,tokenizer2$1=tokenize$1,Comment$2$1=comment$1,AtRule$2$1=atRule$1,Root$4$1=root$1,Rule$2$1=rule$1;const SAFE_COMMENT_NEIGHBOR$1={empty:!0,space:!0};function findLastWithPosition$1(e){for(let t=e.length-1;t>=0;t--){let r=e[t],s=r[3]||r[2];if(s)return s}}let Parser$1$1=class{constructor(e){this.input=e,this.root=new Root$4$1,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,s,o=new AtRule$2$1;o.name=e[1].slice(1),""===o.name&&this.unnamedAtrule(o,e),this.init(o,e[2]);let n=!1,i=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){o.source.end=this.getPosition(e[2]),o.source.end.offset++,this.semicolon=!0;break}if("{"===t){i=!0;break}if("}"===t){if(a.length>0){for(s=a.length-1,r=a[s];r&&"space"===r[0];)r=a[--s];r&&(o.source.end=this.getPosition(r[3]||r[2]),o.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){n=!0;break}}o.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(o.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(o,"params",a),n&&(e=a[a.length-1],o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++,this.spaces=o.raws.between,o.raws.between="")):(o.raws.afterName="",o.params=""),i&&(o.nodes=[],this.current=o)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,s=0;for(let o=t-1;o>=0&&(r=e[o],"space"===r[0]||(s+=1,2!==s));o--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,s,o=0;for(let[n,i]of e.entries()){if(t=i,r=t[0],"("===r&&(o+=1),")"===r&&(o-=1),0===o&&":"===r){if(s){if("word"===s[0]&&"progid"===s[1])continue;return n}this.doubleColon(t)}s=t}return!1}comment(e){let t=new Comment$2$1;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tokenizer2$1(this.input)}decl(e,t){let r=new Declaration$2$1;this.init(r,e[0][2]);let s,o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(o[3]||o[2]||findLastWithPosition$1(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(s=e.shift(),":"===s[0]){r.raws.between+=s[1];break}"word"===s[0]&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let n,i=[];for(;e.length&&(n=e[0][0],"space"===n||"comment"===n);)i.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(s=e[t],"!important"===s[1].toLowerCase()){r.important=!0;let s=this.stringFrom(e,t);s=this.spacesFromEnd(e)+s," !important"!==s&&(r.raws.important=s);break}if("important"===s[1].toLowerCase()){let s=e.slice(0),o="";for(let e=t;e>0;e--){let t=s[e][0];if(0===o.trim().indexOf("!")&&"space"!==t)break;o=s.pop()[1]+o}0===o.trim().indexOf("!")&&(r.important=!0,r.raws.important=o,e=s)}if("space"!==s[0]&&"comment"!==s[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(r.raws.between+=i.map((e=>e[1])).join(""),i=[]),this.raw(r,"value",i.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rule$2$1;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,s=!1,o=null,n=[],i=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)o||(o=l),n.push("("===r?")":"]");else if(i&&s&&"{"===r)o||(o=l),n.push("}");else if(0===n.length){if(";"===r){if(s)return void this.decl(a,i);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(s=!0)}else r===n[n.length-1]&&(n.pop(),0===n.length&&(o=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),n.length>0&&this.unclosedBracket(o),t&&s){if(!i)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,s){let o,n,i,a,l=r.length,c="",u=!0;for(let e=0;e<l;e+=1)o=r[e],n=o[0],"space"!==n||e!==l-1||s?"comment"===n?(a=r[e-1]?r[e-1][0]:"empty",i=r[e+1]?r[e+1][0]:"empty",SAFE_COMMENT_NEIGHBOR$1[a]||SAFE_COMMENT_NEIGHBOR$1[i]||","===c.slice(-1)?u=!1:c+=o[1]):c+=o[1]:u=!1;if(!u){let s=r.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:s,value:c}}e[t]=c}rule(e){e.pop();let t=new Rule$2$1;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let s=t;s<e.length;s++)r+=e[s][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var parser$1=Parser$1$1;let Container$2$1=container$1,Parser2$1=parser$1,Input$2$1=input$1;function parse$3$1(e,t){let r=new Input$2$1(e,t),s=new Parser2$1(r);try{s.parse()}catch(e){throw"production"!==process.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return s.root}var parse_1$1=parse$3$1;parse$3$1.default=parse$3$1,Container$2$1.registerParse(parse$3$1);let{isClean:isClean$3,my:my$3}=symbols$1,MapGenerator$1$1=mapGenerator$1,stringify$2$1=stringify_1$1,Container$1$1=container$1,Document$2$1=document$1$1,warnOnce$1$1=warnOnce$2$1,Result$2$1=result$1,parse$2$1=parse_1$1,Root$3$1=root$1;const TYPE_TO_CLASS_NAME$1={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS$1={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS$1={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN$1=0;function isPromise$1(e){return"object"==typeof e&&"function"==typeof e.then}function getEvents$1(e){let t=!1,r=TYPE_TO_CLASS_NAME$1[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function toStack$1(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents$1(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[isClean$3]=!1,e.nodes&&e.nodes.forEach((e=>cleanMarks$1(e))),e}let postcss$2$1={},LazyResult$2$1=class e{constructor(t,r,s){let o;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof e||r instanceof Result$2$1)o=cleanMarks$1(r.root),r.map&&(void 0===s.map&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=r.map);else{let e=parse$2$1;s.syntax&&(e=s.syntax.parse),s.parser&&(e=s.parser),e.parse&&(e=e.parse);try{o=e(r,s)}catch(e){this.processed=!0,this.error=e}o&&!o[my$3]&&Container$1$1.rebuild(o)}else o=cleanMarks$1(r);this.result=new Result$2$1(t,o,s),this.helpers={...postcss$2$1,postcss:postcss$2$1,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(r.postcssVersion&&"production"!==process.env.NODE_ENV){let e=r.postcssPlugin,t=r.postcssVersion,s=this.result.processor.version,o=t.split("."),n=s.split(".");(o[0]!==n[0]||parseInt(o[1])>parseInt(n[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+s+", but "+e+" uses "+t+". Perhaps this is the source of the error below.")}}else e.plugin=r.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!PLUGIN_PROPS$1[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS$1[r])if("object"==typeof t[r])for(let s in t[r])e(t,"*"===s?r:r+"-"+s.toLowerCase(),t[r][s]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(isPromise$1(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean$3];){e[isClean$3]=!0;let t=[toStack$1(e)];for(;t.length>0;){let e=this.visitTick(t);if(isPromise$1(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>r(e,this.helpers)));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return isPromise$1(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=stringify$2$1;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new MapGenerator$1$1(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(isPromise$1(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean$3];)e[isClean$3]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this.opts||warnOnce$1$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,s]of e){let e;this.result.lastPlugin=r;try{e=s(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(isPromise$1(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:s}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(s.length>0&&t.visitorIndex<s.length){let[e,o]=s[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===s.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return o(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let s,o=t.iterator;for(;s=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!s[isClean$3])return s[isClean$3]=!0,void e.push(toStack$1(s));t.iterator=0,delete r.indexes[o]}let o=t.events;for(;t.eventIndex<o.length;){let e=o[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[isClean$3]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[isClean$3]=!0;let t=getEvents$1(e);for(let r of t)if(0===r)e.nodes&&e.each((e=>{e[isClean$3]||this.walkSync(e)}));else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2$1.registerPostcss=e=>{postcss$2$1=e};var lazyResult$1=LazyResult$2$1;LazyResult$2$1.default=LazyResult$2$1,Root$3$1.registerLazyResult(LazyResult$2$1),Document$2$1.registerLazyResult(LazyResult$2$1);let MapGenerator2$1=mapGenerator$1,stringify$1$1=stringify_1$1,warnOnce2$1=warnOnce$2$1,parse$1$1=parse_1$1;const Result$1$1=result$1;let NoWorkResult$1$1=class{constructor(e,t,r){let s;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let o=stringify$1$1;this.result=new Result$1$1(this._processor,s,this._opts),this.result.css=t;let n=this;Object.defineProperty(this.result,"root",{get:()=>n.root});let i=new MapGenerator2$1(o,s,this._opts,t);if(i.isMap()){let[e,t]=i.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else i.clearAnnotation(),this.result.css=i.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this._opts||warnOnce2$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=parse$1$1;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult$1=NoWorkResult$1$1;NoWorkResult$1$1.default=NoWorkResult$1$1;let NoWorkResult2$1=noWorkResult$1,LazyResult$1$1=lazyResult$1,Document$1$1=document$1$1,Root$2$1=root$1,Processor$1$1=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new LazyResult$1$1(this,e,t):new NoWorkResult2$1(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var processor$1=Processor$1$1;Processor$1$1.default=Processor$1$1,Root$2$1.registerProcessor(Processor$1$1),Document$1$1.registerProcessor(Processor$1$1);let Declaration$1$1=declaration$1,PreviousMap2$1=previousMap$1,Comment$1$1=comment$1,AtRule$1$1=atRule$1,Input$1$1=input$1,Root$1$1=root$1,Rule$1$1=rule$1;function fromJSON$1$1(e,t){if(Array.isArray(e))return e.map((e=>fromJSON$1$1(e)));let{inputs:r,...s}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:Input$1$1.prototype};r.map&&(r.map={...r.map,__proto__:PreviousMap2$1.prototype}),t.push(r)}}if(s.nodes&&(s.nodes=e.nodes.map((e=>fromJSON$1$1(e,t)))),s.source){let{inputId:e,...r}=s.source;s.source=r,null!=e&&(s.source.input=t[e])}if("root"===s.type)return new Root$1$1(s);if("decl"===s.type)return new Declaration$1$1(s);if("rule"===s.type)return new Rule$1$1(s);if("comment"===s.type)return new Comment$1$1(s);if("atrule"===s.type)return new AtRule$1$1(s);throw new Error("Unknown node type: "+e.type)}var fromJSON_1$1=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;let CssSyntaxError2$1=cssSyntaxError$1,Declaration2$1=declaration$1,LazyResult2$1=lazyResult$1,Container2$1=container$1,Processor2$1=processor$1,stringify$5=stringify_1$1,fromJSON$2=fromJSON_1$1,Document22=document$1$1,Warning2$1=warning$1,Comment2$1=comment$1,AtRule2$1=atRule$1,Result2$1=result$1,Input2$1=input$1,parse$5=parse_1$1,list$3=list_1$1,Rule2$1=rule$1,Root2$1=root$1,Node2$1=node$1;function postcss$3(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Processor2$1(e)}postcss$3.plugin=function(e,t){let r,s=!1;function o(...r){console&&console.warn&&!s&&(s=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:\nhttps://www.w3ctech.com/topic/2226"));let o=t(...r);return o.postcssPlugin=e,o.postcssVersion=(new Processor2$1).version,o}return Object.defineProperty(o,"postcss",{get:()=>(r||(r=o()),r)}),o.process=function(e,t,r){return postcss$3([o(r)]).process(e,t)},o},postcss$3.stringify=stringify$5,postcss$3.parse=parse$5,postcss$3.fromJSON=fromJSON$2,postcss$3.list=list$3,postcss$3.comment=e=>new Comment2$1(e),postcss$3.atRule=e=>new AtRule2$1(e),postcss$3.decl=e=>new Declaration2$1(e),postcss$3.rule=e=>new Rule2$1(e),postcss$3.root=e=>new Root2$1(e),postcss$3.document=e=>new Document22(e),postcss$3.CssSyntaxError=CssSyntaxError2$1,postcss$3.Declaration=Declaration2$1,postcss$3.Container=Container2$1,postcss$3.Processor=Processor2$1,postcss$3.Document=Document22,postcss$3.Comment=Comment2$1,postcss$3.Warning=Warning2$1,postcss$3.AtRule=AtRule2$1,postcss$3.Result=Result2$1,postcss$3.Input=Input2$1,postcss$3.Rule=Rule2$1,postcss$3.Root=Root2$1,postcss$3.Node=Node2$1,LazyResult2$1.registerPostcss(postcss$3);var postcss_1$1=postcss$3;postcss$3.default=postcss$3;const postcss$1$1=getDefaultExportFromCjs$1(postcss_1$1);postcss$1$1.stringify,postcss$1$1.fromJSON,postcss$1$1.plugin,postcss$1$1.parse,postcss$1$1.list,postcss$1$1.document,postcss$1$1.comment,postcss$1$1.atRule,postcss$1$1.rule,postcss$1$1.decl,postcss$1$1.root,postcss$1$1.CssSyntaxError,postcss$1$1.Declaration,postcss$1$1.Container,postcss$1$1.Processor,postcss$1$1.Document,postcss$1$1.Comment,postcss$1$1.Warning,postcss$1$1.AtRule,postcss$1$1.Result,postcss$1$1.Input,postcss$1$1.Rule,postcss$1$1.Root,postcss$1$1.Node;const tagMap={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function getTagName(e){let t=tagMap[e.tagName]?tagMap[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}function adaptCssForReplay(e,t){const r=null==t?void 0:t.stylesWithHoverClass.get(e);if(r)return r;const s=postcss$1$1([mediaSelectorPlugin,pseudoClassPlugin]).process(e).css;return null==t||t.stylesWithHoverClass.set(e,s),s}function createCache(){return{stylesWithHoverClass:new Map}}function applyCssSplits(e,t,r,s){const o=[];for(const t of e.childNodes)t.type===NodeType$3.Text&&o.push(t);const n=t.split("/* rr_split */");for(;n.length>1&&n.length>o.length;)n.splice(-2,2,n.slice(-2).join(""));for(let e=0;e<o.length;e++){const t=o[e],i=n[e];t&&i&&(t.textContent=r?adaptCssForReplay(i,s):i)}}function buildStyleNode(e,t,r,s){const{doc:o,hackCss:n,cache:i}=s;e.childNodes.length?applyCssSplits(e,r,n,i):(n&&(r=adaptCssForReplay(r,i)),t.appendChild(o.createTextNode(r)))}function buildNode(e,t){var r;const{doc:s,hackCss:o,cache:n}=t;switch(e.type){case NodeType$3.Document:return s.implementation.createDocument(null,"",null);case NodeType$3.DocumentType:return s.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case NodeType$3.Element:{const o=getTagName(e);let n;e.isSVG?n=s.createElementNS("http://www.w3.org/2000/svg",o):(e.isCustom&&(null==(r=s.defaultView)?void 0:r.customElements)&&!s.defaultView.customElements.get(e.tagName)&&s.defaultView.customElements.define(e.tagName,class extends s.defaultView.HTMLElement{}),n=s.createElement(o));const i={};for(const r in e.attributes){if(!Object.prototype.hasOwnProperty.call(e.attributes,r))continue;let a=e.attributes[r];if(("option"!==o||"selected"!==r||!1!==a)&&null!==a)if(!0===a&&(a=""),r.startsWith("rr_"))i[r]=a;else{if("string"!=typeof a);else{if("style"===o&&"_cssText"===r){buildStyleNode(e,n,a,t);continue}if("textarea"===o&&"value"===r){n.appendChild(s.createTextNode(a)),e.childNodes=[];continue}}try{if(e.isSVG&&"xlink:href"===r)n.setAttributeNS("http://www.w3.org/1999/xlink",r,a.toString());else if("onload"===r||"onclick"===r||"onmouse"===r.substring(0,7))n.setAttribute("_"+r,a.toString());else{if("meta"===o&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===r){n.setAttribute("csp-content",a.toString());continue}("link"!==o||"preload"!==e.attributes.rel&&"modulepreload"!==e.attributes.rel||"script"!==e.attributes.as)&&("link"===o&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===o&&e.attributes.srcset&&e.attributes.rr_dataURL?n.setAttribute("rrweb-original-srcset",e.attributes.srcset):n.setAttribute(r,a.toString())))}}catch(e){}}}for(const t in i){const r=i[t];if("canvas"===o&&"rr_dataURL"===t){const e=s.createElement("img");e.onload=()=>{const t=n.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=r.toString(),n.RRNodeType&&(n.rr_dataURL=r.toString())}else if("img"===o&&"rr_dataURL"===t){const t=n;t.currentSrc.startsWith("data:")||(t.setAttribute("rrweb-original-src",e.attributes.src),t.src=r.toString())}if("rr_width"===t)n.style.setProperty("width",r.toString());else if("rr_height"===t)n.style.setProperty("height",r.toString());else if("rr_mediaCurrentTime"===t&&"number"==typeof r)n.currentTime=r;else if("rr_mediaState"===t)switch(r){case"played":n.play().catch((e=>console.warn("media playback error",e)));break;case"paused":n.pause()}else"rr_mediaPlaybackRate"===t&&"number"==typeof r?n.playbackRate=r:"rr_mediaMuted"===t&&"boolean"==typeof r?n.muted=r:"rr_mediaLoop"===t&&"boolean"==typeof r?n.loop=r:"rr_mediaVolume"===t&&"number"==typeof r?n.volume=r:"rr_open_mode"===t&&n.setAttribute("rr_open_mode",r)}if(e.isShadowHost)if(n.shadowRoot)for(;n.shadowRoot.firstChild;)n.shadowRoot.removeChild(n.shadowRoot.firstChild);else n.attachShadow({mode:"open"});return n}case NodeType$3.Text:return e.isStyle&&o?s.createTextNode(adaptCssForReplay(e.textContent,n)):s.createTextNode(e.textContent);case NodeType$3.CDATA:return s.createCDATASection(e.textContent);case NodeType$3.Comment:return s.createComment(e.textContent);default:return null}}function buildNodeWithSN(e,t){const{doc:r,mirror:s,skipChild:o=!1,hackCss:n=!0,afterAppend:i,cache:a}=t;if(s.has(e.id)){const t=s.getNode(e.id);if(isNodeMetaEqual(s.getMeta(t),e))return s.getNode(e.id)}let l=buildNode(e,{doc:r,hackCss:n,cache:a});if(!l)return null;if(e.rootId&&s.getNode(e.rootId)!==r&&s.replace(e.rootId,r),e.type===NodeType$3.Document&&(r.close(),r.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==NodeType$3.DocumentType&&(e.childNodes[0].type===NodeType$3.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),l=r),s.add(l,e),(e.type===NodeType$3.Document||e.type===NodeType$3.Element)&&!o)for(const t of e.childNodes){const o=buildNodeWithSN(t,{doc:r,mirror:s,skipChild:!1,hackCss:n,afterAppend:i,cache:a});if(o){if(t.isShadow&&isElement(l)&&l.shadowRoot)l.shadowRoot.appendChild(o);else if(e.type===NodeType$3.Document&&t.type==NodeType$3.Element){const e=o;let t=null;e.childNodes.forEach((e=>{"BODY"===e.nodeName&&(t=e)})),t?(e.removeChild(t),l.appendChild(o),e.appendChild(t)):l.appendChild(o)}else l.appendChild(o);i&&i(o,t.id)}else console.warn("Failed to rebuild",t)}return l}function visit(e,t){for(const s of e.getIds())e.has(s)&&(r=e.getNode(s),t(r));var r}function handleScroll(e,t){const r=t.getMeta(e);if((null==r?void 0:r.type)!==NodeType$3.Element)return;const s=e;for(const e in r.attributes){if(!Object.prototype.hasOwnProperty.call(r.attributes,e)||!e.startsWith("rr_"))continue;const t=r.attributes[e];"rr_scrollLeft"===e&&(s.scrollLeft=t),"rr_scrollTop"===e&&(s.scrollTop=t)}}function rebuild(e,t){const{doc:r,onVisit:s,hackCss:o=!0,afterAppend:n,cache:i,mirror:a=new Mirror}=t,l=buildNodeWithSN(e,{doc:r,mirror:a,skipChild:!1,hackCss:o,afterAppend:n,cache:i});return visit(a,(e=>{s&&s(e),handleScroll(e,a)})),l}var __defProp2=Object.defineProperty,__defNormalProp2=(e,t,r)=>t in e?__defProp2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField2=(e,t,r)=>__defNormalProp2(e,"symbol"!=typeof t?t+"":t,r),__defProp22=Object.defineProperty,__defNormalProp22=(e,t,r)=>t in e?__defProp22(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField22=(e,t,r)=>__defNormalProp22(e,"symbol"!=typeof t?t+"":t,r);let Mirror$1=class{constructor(){__publicField22(this,"idNodeMap",new Map),__publicField22(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const e=this.nodeMetaMap.get(r);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function createMirror$1(){return new Mirror$1}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var s=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,s.get?s:{enumerable:!0,get:function(){return e[t]}})})),r}var picocolors_browser={exports:{}},x=String,create=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};picocolors_browser.exports=create(),picocolors_browser.exports.createColors=create;var picocolors_browserExports=picocolors_browser.exports;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);let pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class e extends Error{constructor(t,r,s,o,n,i){super(t),this.name="CssSyntaxError",this.reason=t,n&&(this.file=n),o&&(this.source=o),i&&(this.plugin=i),void 0!==r&&void 0!==s&&("number"==typeof r?(this.line=r,this.column=s):(this.line=r.line,this.column=r.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=pico.isColorSupported),terminalHighlight$1&&e&&(t=terminalHighlight$1(t));let r,s,o=t.split(/\r?\n/),n=Math.max(this.line-3,0),i=Math.min(this.line+2,o.length),a=String(i).length;if(e){let{bold:e,gray:t,red:o}=pico.createColors(!0);r=t=>e(o(t)),s=e=>t(e)}else r=s=e=>e;return o.slice(n,i).map(((e,t)=>{let o=n+1+t,i=" "+(" "+o).slice(-a)+" | ";if(o===this.line){let t=s(i.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+s(i)+e+"\n "+t+r("^")}return" "+s(i)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;var symbols={};symbols.isClean=Symbol("isClean"),symbols.my=Symbol("my");const DEFAULT_RAW={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize(e){return e[0].toUpperCase()+e.slice(1)}let Stringifier$2=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,s=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:s&&(r+=" "),e.nodes)this.block(e,r+s);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+s+o,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let s=e.parent,o=0;for(;s&&"root"!==s.type;)o+=1,s=s.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<o;e++)r+=t}return r}block(e,t){let r,s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let s=0;s<e.nodes.length;s++){let o=e.nodes[s],n=this.raw(o,"before");n&&this.builder(n),this.stringify(o,t!==s||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),s=e.prop+r+this.rawValue(e,"value");e.important&&(s+=e.raws.important||" !important"),t&&(s+=";"),this.builder(s,e)}document(e){this.body(e)}raw(e,t,r){let s;if(r||(r=t),t&&(s=e.raws[t],void 0!==s))return s;let o=e.parent;if("before"===r){if(!o||"root"===o.type&&o.first===e)return"";if(o&&"document"===o.type)return""}if(!o)return DEFAULT_RAW[r];let n=e.root();if(n.rawCache||(n.rawCache={}),void 0!==n.rawCache[r])return n.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let o="raw"+capitalize(r);this[o]?s=this[o](n,e):n.walk((e=>{if(s=e.raws[t],void 0!==s)return!1}))}return void 0===s&&(s=DEFAULT_RAW[r]),n.rawCache[r]=s,s}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((r=>{let s=r.parent;if(s&&s!==e&&s.parent&&s.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let r=e[t],s=e.raws[t];return s&&s.value===r?s.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;let Stringifier$1=stringifier;function stringify$4(e,t){new Stringifier$1(t).stringify(e)}var stringify_1=stringify$4;stringify$4.default=stringify$4;let{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier22=stringifier,stringify$3=stringify_1;function cloneNode(e,t){let r=new e.constructor;for(let s in e){if(!Object.prototype.hasOwnProperty.call(e,s))continue;if("proxyCache"===s)continue;let o=e[s],n=typeof o;"parent"===s&&"object"===n?t&&(r[s]=t):"source"===s?r[s]=o:Array.isArray(o)?r[s]=o.map((e=>cloneNode(e,r))):("object"===n&&null!==o&&(o=cloneNode(o)),r[s]=o)}return r}let Node$4=class{constructor(e={}){this.raws={},this[isClean$2]=!1,this[my$2]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=cloneNode(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:s}=this.rangeBy(t);return this.source.input.error(e,{column:s.column,line:s.line},{column:r.column,line:r.line},t)}return new CssSyntaxError$2(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let e=this;for(;e=e.parent;)e[isClean$2]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){let s=(t=this.toString()).indexOf(e.word);-1!==s&&(r=this.positionInside(s,t))}return r}positionInside(e,t){let r=t||this.toString(),s=this.source.start.column,o=this.source.start.line;for(let t=0;t<e;t++)"\n"===r[t]?(s=1,o+=1):s+=1;return{column:s,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let s=this.toString(),o=s.indexOf(e.word);-1!==o&&(t=this.positionInside(o,s),r=this.positionInside(o+e.word.length,s))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return(new Stringifier22).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let s of e)s===this?r=!0:r?(this.parent.insertAfter(t,s),t=s):this.parent.insertBefore(t,s);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},s=null==t;t=t||new Map;let o=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let s=this[e];if(Array.isArray(s))r[e]=s.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof s&&s.toJSON)r[e]=s.toJSON(null,t);else if("source"===e){let n=t.get(s.input);null==n&&(n=o,t.set(s.input,o),o++),r[e]={end:s.end,inputId:n,start:s.start}}else r[e]=s}return s&&(r.inputs=[...t.keys()].map((e=>e.toJSON()))),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=stringify$3){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,r){let s={node:this};for(let e in r)s[e]=r[e];return e.warn(t,s)}get proxyOf(){return this}};var node=Node$4;Node$4.default=Node$4;let Node$3=node,Declaration$4=class extends Node$3{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var declaration=Declaration$4;Declaration$4.default=Declaration$4;let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(e,t=21)=>(r=t)=>{let s="",o=r;for(;o--;)s+=e[Math.random()*e.length|0];return s},nanoid$1=(e=21)=>{let t="",r=e;for(;r--;)t+=urlAlphabet[64*Math.random()|0];return t};var nonSecure={nanoid:nanoid$1,customAlphabet:customAlphabet};let{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync:existsSync,readFileSync:readFileSync}=require$$2,{dirname:dirname$1,join:join}=require$$2;function fromBase64(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let PreviousMap$2=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,s=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),s&&(this.text=s)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return fromBase64(e.substr(RegExp.lastMatch.length));let t=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),s=e.indexOf("*/",r);r>-1&&s>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,s)))}loadFile(e){if(this.root=dirname$1(e),existsSync(e))return this.mapFile=e,readFileSync(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(t).toString();if(t instanceof SourceMapGenerator$2)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=join(dirname$1(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;let{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath:fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute:isAbsolute,resolve:resolve$1}=require$$2,{nanoid:nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=Boolean(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=Boolean(resolve$1&&isAbsolute),Input$4=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"ï¿¾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!pathAvailable$1||/^\w+:\/\//.test(t.from)||isAbsolute(t.from)?this.file=t.from:this.file=resolve$1(t.from)),pathAvailable$1&&sourceMapAvailable$1){let e=new PreviousMap$1(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,s={}){let o,n,i;if(t&&"object"==typeof t){let e=t,s=r;if("number"==typeof e.offset){let s=this.fromOffset(e.offset);t=s.line,r=s.col}else t=e.line,r=e.column;if("number"==typeof s.offset){let e=this.fromOffset(s.offset);n=e.line,i=e.col}else n=s.line,i=s.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let a=this.origin(t,r,n,i);return o=a?new CssSyntaxError$1(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,s.plugin):new CssSyntaxError$1(e,void 0===n?t:{column:r,line:t},void 0===n?r:{column:i,line:n},this.css,this.file,s.plugin),o.input={column:r,endColumn:i,endLine:n,line:t,source:this.css},this.file&&(pathToFileURL$1&&(o.input.url=pathToFileURL$1(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[fromOffsetCache])r=this[fromOffsetCache];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let s=0,o=e.length;s<o;s++)r[s]=t,t+=e[s].length+1;this[fromOffsetCache]=r}t=r[r.length-1];let s=0;if(e>=t)s=r.length-1;else{let t,o=r.length-2;for(;s<o;)if(t=s+(o-s>>1),e<r[t])o=t-1;else{if(!(e>=r[t+1])){s=t;break}s=t+1}}return{col:e-r[s]+1,line:s+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,s){if(!this.map)return!1;let o,n,i=this.map.consumer(),a=i.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(o=i.originalPositionFor({column:s,line:r})),n=isAbsolute(a.source)?pathToFileURL$1(a.source):new URL(a.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let l={column:a.column,endColumn:o&&o.column,endLine:o&&o.line,line:a.line,url:n.toString()};if("file:"===n.protocol){if(!fileURLToPath)throw new Error("file: protocol is not available in this PostCSS build");l.file=fileURLToPath(n)}let c=i.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var input=Input$4;Input$4.default=Input$4,terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);let{SourceMapConsumer:SourceMapConsumer,SourceMapGenerator:SourceMapGenerator}=require$$2,{dirname:dirname,relative:relative,resolve:resolve,sep:sep}=require$$2,{pathToFileURL:pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=Boolean(SourceMapConsumer&&SourceMapGenerator),pathAvailable=Boolean(dirname&&resolve&&relative&&sep),MapGenerator$2=class{constructor(e,t,r,s){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=s,this.originalCSS=s,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),s=e.root||dirname(e.file);!1===this.mapOpts.sourcesContent?(t=new SourceMapConsumer(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(s)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,s=1,o="<no source>",n={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((i,a,l)=>{if(this.css+=i,a&&"end"!==l&&(n.generated.line=r,n.generated.column=s-1,a.source&&a.source.start?(n.source=this.sourcePath(a),n.original.line=a.source.start.line,n.original.column=a.source.start.column-1,this.map.addMapping(n)):(n.source=o,n.original.line=1,n.original.column=0,this.map.addMapping(n))),e=i.match(/\n/g),e?(r+=e.length,t=i.lastIndexOf("\n"),s=i.length-t):s+=i.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(n.source=this.sourcePath(a),n.original.line=a.source.end.line,n.original.column=a.source.end.column-1,n.generated.line=r,n.generated.column=s-2,this.map.addMapping(n)):(n.source=o,n.original.line=1,n.original.column=0,n.generated.line=r,n.generated.column=s-1,this.map.addMapping(n)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?dirname(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=dirname(resolve(r,this.mapOpts.annotation)));let s=relative(r,e);return this.memoizedPaths.set(e,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new Input$3(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let s=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(s,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(pathToFileURL){let t=pathToFileURL(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===sep&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};var mapGenerator=MapGenerator$2;let Node$2=node,Comment$4=class extends Node$2{constructor(e){super(e),this.type="comment"}};var comment=Comment$4;Comment$4.default=Comment$4;let parse$4,Rule$4,AtRule$4,Root$6,{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$1=node;function cleanSource(e){return e.map((e=>(e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e)))}function markDirtyUp(e){if(e[isClean$1]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)markDirtyUp(t)}let Container$7=class e extends Node$1{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,s=this.getIterator();for(;this.indexes[s]<this.proxyOf.nodes.length&&(t=this.indexes[s],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[s]+=1;return delete this.indexes[s],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map((e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e))):"every"===t||"some"===t?r=>e[t](((e,...t)=>r(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,s=this.index(e),o=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let e of o)this.proxyOf.nodes.splice(s+1,0,e);for(let e in this.indexes)r=this.indexes[e],s<r&&(this.indexes[e]=r+o.length);return this.markDirty(),this}insertBefore(e,t){let r,s=this.index(e),o=0===s&&"prepend",n=this.normalize(t,this.proxyOf.nodes[s],o).reverse();s=this.index(e);for(let e of n)this.proxyOf.nodes.splice(s,0,e);for(let e in this.indexes)r=this.indexes[e],s<=r&&(this.indexes[e]=r+n.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=cleanSource(parse$4(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Declaration$3(t)]}else if(t.selector)t=[new Rule$4(t)];else if(t.name)t=[new AtRule$4(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Comment$3(t)]}return t.map((t=>(t[my$1]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[isClean$1]&&markDirtyUp(t),void 0===t.raws.before&&r&&void 0!==r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls((s=>{t.props&&!t.props.includes(s.prop)||t.fast&&!s.value.includes(t.fast)||(s.value=s.value.replace(e,r))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,r)=>{let s;try{s=e(t,r)}catch(e){throw t.addToError(e)}return!1!==s&&t.walk&&(s=t.walk(e)),s}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((r,s)=>{if("atrule"===r.type&&e.test(r.name))return t(r,s)})):this.walk(((r,s)=>{if("atrule"===r.type&&r.name===e)return t(r,s)})):(t=e,this.walk(((e,r)=>{if("atrule"===e.type)return t(e,r)})))}walkComments(e){return this.walk(((t,r)=>{if("comment"===t.type)return e(t,r)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((r,s)=>{if("decl"===r.type&&e.test(r.prop))return t(r,s)})):this.walk(((r,s)=>{if("decl"===r.type&&r.prop===e)return t(r,s)})):(t=e,this.walk(((e,r)=>{if("decl"===e.type)return t(e,r)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((r,s)=>{if("rule"===r.type&&e.test(r.selector))return t(r,s)})):this.walk(((r,s)=>{if("rule"===r.type&&r.selector===e)return t(r,s)})):(t=e,this.walk(((e,r)=>{if("rule"===e.type)return t(e,r)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7.registerParse=e=>{parse$4=e},Container$7.registerRule=e=>{Rule$4=e},Container$7.registerAtRule=e=>{AtRule$4=e},Container$7.registerRoot=e=>{Root$6=e};var container=Container$7;Container$7.default=Container$7,Container$7.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,AtRule$4.prototype):"rule"===e.type?Object.setPrototypeOf(e,Rule$4.prototype):"decl"===e.type?Object.setPrototypeOf(e,Declaration$3.prototype):"comment"===e.type?Object.setPrototypeOf(e,Comment$3.prototype):"root"===e.type&&Object.setPrototypeOf(e,Root$6.prototype),e[my$1]=!0,e.nodes&&e.nodes.forEach((e=>{Container$7.rebuild(e)}))};let LazyResult$4,Processor$3,Container$6=container,Document$3=class extends Container$6{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new LazyResult$4(new Processor$3,this,e).stringify()}};Document$3.registerLazyResult=e=>{LazyResult$4=e},Document$3.registerProcessor=e=>{Processor$3=e};var document$1=Document$3;Document$3.default=Document$3;let printed={};var warnOnce$2=function(e){printed[e]||(printed[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};let Warning$2=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning=Warning$2;Warning$2.default=Warning$2;let Warning$1=warning,Result$3=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Warning$1(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var result=Result$3;Result$3.default=Result$3;const SINGLE_QUOTE="'".charCodeAt(0),DOUBLE_QUOTE='"'.charCodeAt(0),BACKSLASH="\\".charCodeAt(0),SLASH="/".charCodeAt(0),NEWLINE="\n".charCodeAt(0),SPACE=" ".charCodeAt(0),FEED="\f".charCodeAt(0),TAB="\t".charCodeAt(0),CR="\r".charCodeAt(0),OPEN_SQUARE="[".charCodeAt(0),CLOSE_SQUARE="]".charCodeAt(0),OPEN_PARENTHESES="(".charCodeAt(0),CLOSE_PARENTHESES=")".charCodeAt(0),OPEN_CURLY="{".charCodeAt(0),CLOSE_CURLY="}".charCodeAt(0),SEMICOLON=";".charCodeAt(0),ASTERISK="*".charCodeAt(0),COLON=":".charCodeAt(0),AT="@".charCodeAt(0),RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;var tokenize=function(e,t={}){let r,s,o,n,i,a,l,c,u,d,h=e.css.valueOf(),p=t.ignoreErrors,m=h.length,f=0,g=[],y=[];function S(t){throw e.error("Unclosed "+t,f)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&f>=m},nextToken:function(e){if(y.length)return y.pop();if(f>=m)return;let t=!!e&&e.ignoreUnclosed;switch(r=h.charCodeAt(f),r){case NEWLINE:case SPACE:case TAB:case CR:case FEED:s=f;do{s+=1,r=h.charCodeAt(s)}while(r===SPACE||r===NEWLINE||r===TAB||r===CR||r===FEED);d=["space",h.slice(f,s)],f=s-1;break;case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let e=String.fromCharCode(r);d=[e,e,f];break}case OPEN_PARENTHESES:if(c=g.length?g.pop()[1]:"",u=h.charCodeAt(f+1),"url"===c&&u!==SINGLE_QUOTE&&u!==DOUBLE_QUOTE&&u!==SPACE&&u!==NEWLINE&&u!==TAB&&u!==FEED&&u!==CR){s=f;do{if(a=!1,s=h.indexOf(")",s+1),-1===s){if(p||t){s=f;break}S("bracket")}for(l=s;h.charCodeAt(l-1)===BACKSLASH;)l-=1,a=!a}while(a);d=["brackets",h.slice(f,s+1),f,s],f=s}else s=h.indexOf(")",f+1),n=h.slice(f,s+1),-1===s||RE_BAD_BRACKET.test(n)?d=["(","(",f]:(d=["brackets",n,f,s],f=s);break;case SINGLE_QUOTE:case DOUBLE_QUOTE:o=r===SINGLE_QUOTE?"'":'"',s=f;do{if(a=!1,s=h.indexOf(o,s+1),-1===s){if(p||t){s=f+1;break}S("string")}for(l=s;h.charCodeAt(l-1)===BACKSLASH;)l-=1,a=!a}while(a);d=["string",h.slice(f,s+1),f,s],f=s;break;case AT:RE_AT_END.lastIndex=f+1,RE_AT_END.test(h),s=0===RE_AT_END.lastIndex?h.length-1:RE_AT_END.lastIndex-2,d=["at-word",h.slice(f,s+1),f,s],f=s;break;case BACKSLASH:for(s=f,i=!0;h.charCodeAt(s+1)===BACKSLASH;)s+=1,i=!i;if(r=h.charCodeAt(s+1),i&&r!==SLASH&&r!==SPACE&&r!==NEWLINE&&r!==TAB&&r!==CR&&r!==FEED&&(s+=1,RE_HEX_ESCAPE.test(h.charAt(s)))){for(;RE_HEX_ESCAPE.test(h.charAt(s+1));)s+=1;h.charCodeAt(s+1)===SPACE&&(s+=1)}d=["word",h.slice(f,s+1),f,s],f=s;break;default:r===SLASH&&h.charCodeAt(f+1)===ASTERISK?(s=h.indexOf("*/",f+2)+1,0===s&&(p||t?s=h.length:S("comment")),d=["comment",h.slice(f,s+1),f,s],f=s):(RE_WORD_END.lastIndex=f+1,RE_WORD_END.test(h),s=0===RE_WORD_END.lastIndex?h.length-1:RE_WORD_END.lastIndex-2,d=["word",h.slice(f,s+1),f,s],g.push(d),f=s)}return f++,d},position:function(){return f}}};let Container$5=container,AtRule$3=class extends Container$5{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var atRule=AtRule$3;AtRule$3.default=AtRule$3,Container$5.registerAtRule(AtRule$3);let LazyResult$3,Processor$2,Container$4=container,Root$5=class extends Container$4{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let s=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of s)e.raws.before=t.raws.before;return s}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new LazyResult$3(new Processor$2,this,e).stringify()}};Root$5.registerLazyResult=e=>{LazyResult$3=e},Root$5.registerProcessor=e=>{Processor$2=e};var root=Root$5;Root$5.default=Root$5,Container$4.registerRoot(Root$5);let list$2={comma:e=>list$2.split(e,[","],!0),space:e=>list$2.split(e,[" ","\n","\t"]),split(e,t,r){let s=[],o="",n=!1,i=0,a=!1,l="",c=!1;for(let r of e)c?c=!1:"\\"===r?c=!0:a?r===l&&(a=!1):'"'===r||"'"===r?(a=!0,l=r):"("===r?i+=1:")"===r?i>0&&(i-=1):0===i&&t.includes(r)&&(n=!0),n?(""!==o&&s.push(o.trim()),o="",n=!1):o+=r;return(r||""!==o)&&s.push(o.trim()),s}};var list_1=list$2;list$2.default=list$2;let Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var rule=Rule$3;Rule$3.default=Rule$3,Container$3.registerRule(Rule$3);let Declaration$2=declaration,tokenizer22=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule;const SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};function findLastWithPosition(e){for(let t=e.length-1;t>=0;t--){let r=e[t],s=r[3]||r[2];if(s)return s}}let Parser$1=class{constructor(e){this.input=e,this.root=new Root$4,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,s,o=new AtRule$2;o.name=e[1].slice(1),""===o.name&&this.unnamedAtrule(o,e),this.init(o,e[2]);let n=!1,i=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){o.source.end=this.getPosition(e[2]),o.source.end.offset++,this.semicolon=!0;break}if("{"===t){i=!0;break}if("}"===t){if(a.length>0){for(s=a.length-1,r=a[s];r&&"space"===r[0];)r=a[--s];r&&(o.source.end=this.getPosition(r[3]||r[2]),o.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){n=!0;break}}o.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(o.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(o,"params",a),n&&(e=a[a.length-1],o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++,this.spaces=o.raws.between,o.raws.between="")):(o.raws.afterName="",o.params=""),i&&(o.nodes=[],this.current=o)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,s=0;for(let o=t-1;o>=0&&(r=e[o],"space"===r[0]||(s+=1,2!==s));o--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,s,o=0;for(let[n,i]of e.entries()){if(t=i,r=t[0],"("===r&&(o+=1),")"===r&&(o-=1),0===o&&":"===r){if(s){if("word"===s[0]&&"progid"===s[1])continue;return n}this.doubleColon(t)}s=t}return!1}comment(e){let t=new Comment$2;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tokenizer22(this.input)}decl(e,t){let r=new Declaration$2;this.init(r,e[0][2]);let s,o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(o[3]||o[2]||findLastWithPosition(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(s=e.shift(),":"===s[0]){r.raws.between+=s[1];break}"word"===s[0]&&/\w/.test(s[1])&&this.unknownWord([s]),r.raws.between+=s[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let n,i=[];for(;e.length&&(n=e[0][0],"space"===n||"comment"===n);)i.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(s=e[t],"!important"===s[1].toLowerCase()){r.important=!0;let s=this.stringFrom(e,t);s=this.spacesFromEnd(e)+s," !important"!==s&&(r.raws.important=s);break}if("important"===s[1].toLowerCase()){let s=e.slice(0),o="";for(let e=t;e>0;e--){let t=s[e][0];if(0===o.trim().indexOf("!")&&"space"!==t)break;o=s.pop()[1]+o}0===o.trim().indexOf("!")&&(r.important=!0,r.raws.important=o,e=s)}if("space"!==s[0]&&"comment"!==s[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(r.raws.between+=i.map((e=>e[1])).join(""),i=[]),this.raw(r,"value",i.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rule$2;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,s=!1,o=null,n=[],i=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)o||(o=l),n.push("("===r?")":"]");else if(i&&s&&"{"===r)o||(o=l),n.push("}");else if(0===n.length){if(";"===r){if(s)return void this.decl(a,i);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(s=!0)}else r===n[n.length-1]&&(n.pop(),0===n.length&&(o=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),n.length>0&&this.unclosedBracket(o),t&&s){if(!i)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,s){let o,n,i,a,l=r.length,c="",u=!0;for(let e=0;e<l;e+=1)o=r[e],n=o[0],"space"!==n||e!==l-1||s?"comment"===n?(a=r[e-1]?r[e-1][0]:"empty",i=r[e+1]?r[e+1][0]:"empty",SAFE_COMMENT_NEIGHBOR[a]||SAFE_COMMENT_NEIGHBOR[i]||","===c.slice(-1)?u=!1:c+=o[1]):c+=o[1]:u=!1;if(!u){let s=r.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:s,value:c}}e[t]=c}rule(e){e.pop();let t=new Rule$2;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let s=t;s<e.length;s++)r+=e[s][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var parser=Parser$1;let Container$2=container,Parser22=parser,Input$2=input;function parse$3(e,t){let r=new Input$2(e,t),s=new Parser22(r);try{s.parse()}catch(e){throw"production"!==process.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return s.root}var parse_1=parse$3;parse$3.default=parse$3,Container$2.registerParse(parse$3);let{isClean:isClean,my:my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,warnOnce$1=warnOnce$2,Result$2=result,parse$2=parse_1,Root$3=root;const TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;function isPromise(e){return"object"==typeof e&&"function"==typeof e.then}function getEvents(e){let t=!1,r=TYPE_TO_CLASS_NAME[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function toStack(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[isClean]=!1,e.nodes&&e.nodes.forEach((e=>cleanMarks(e))),e}let postcss$2={},LazyResult$2=class e{constructor(t,r,s){let o;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof e||r instanceof Result$2)o=cleanMarks(r.root),r.map&&(void 0===s.map&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=r.map);else{let e=parse$2;s.syntax&&(e=s.syntax.parse),s.parser&&(e=s.parser),e.parse&&(e=e.parse);try{o=e(r,s)}catch(e){this.processed=!0,this.error=e}o&&!o[my]&&Container$1.rebuild(o)}else o=cleanMarks(r);this.result=new Result$2(t,o,s),this.helpers={...postcss$2,postcss:postcss$2,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(r.postcssVersion&&"production"!==process.env.NODE_ENV){let e=r.postcssPlugin,t=r.postcssVersion,s=this.result.processor.version,o=t.split("."),n=s.split(".");(o[0]!==n[0]||parseInt(o[1])>parseInt(n[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+s+", but "+e+" uses "+t+". Perhaps this is the source of the error below.")}}else e.plugin=r.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!PLUGIN_PROPS[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[r])if("object"==typeof t[r])for(let s in t[r])e(t,"*"===s?r:r+"-"+s.toLowerCase(),t[r][s]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(isPromise(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean];){e[isClean]=!0;let t=[toStack(e)];for(;t.length>0;){let e=this.visitTick(t);if(isPromise(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>r(e,this.helpers)));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return isPromise(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=stringify$2;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new MapGenerator$1(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(isPromise(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean];)e[isClean]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this.opts||warnOnce$1("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,s]of e){let e;this.result.lastPlugin=r;try{e=s(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(isPromise(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:s}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(s.length>0&&t.visitorIndex<s.length){let[e,o]=s[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===s.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return o(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let s,o=t.iterator;for(;s=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!s[isClean])return s[isClean]=!0,void e.push(toStack(s));t.iterator=0,delete r.indexes[o]}let o=t.events;for(;t.eventIndex<o.length;){let e=o[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[isClean]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[isClean]=!0;let t=getEvents(e);for(let r of t)if(0===r)e.nodes&&e.each((e=>{e[isClean]||this.walkSync(e)}));else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2.registerPostcss=e=>{postcss$2=e};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2,Root$3.registerLazyResult(LazyResult$2),Document$2.registerLazyResult(LazyResult$2);let MapGenerator22=mapGenerator,stringify$1=stringify_1,warnOnce22=warnOnce$2,parse$1=parse_1;const Result$1=result;let NoWorkResult$1=class{constructor(e,t,r){let s;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let o=stringify$1;this.result=new Result$1(this._processor,s,this._opts),this.result.css=t;let n=this;Object.defineProperty(this.result,"root",{get:()=>n.root});let i=new MapGenerator22(o,s,this._opts,t);if(i.isMap()){let[e,t]=i.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else i.clearAnnotation(),this.result.css=i.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"production"!==process.env.NODE_ENV&&("from"in this._opts||warnOnce22("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=parse$1;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;let NoWorkResult22=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new LazyResult$1(this,e,t):new NoWorkResult22(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var processor=Processor$1;Processor$1.default=Processor$1,Root$2.registerProcessor(Processor$1),Document$1.registerProcessor(Processor$1);let Declaration$1=declaration,PreviousMap22=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;function fromJSON$1(e,t){if(Array.isArray(e))return e.map((e=>fromJSON$1(e)));let{inputs:r,...s}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:Input$1.prototype};r.map&&(r.map={...r.map,__proto__:PreviousMap22.prototype}),t.push(r)}}if(s.nodes&&(s.nodes=e.nodes.map((e=>fromJSON$1(e,t)))),s.source){let{inputId:e,...r}=s.source;s.source=r,null!=e&&(s.source.input=t[e])}if("root"===s.type)return new Root$1(s);if("decl"===s.type)return new Declaration$1(s);if("rule"===s.type)return new Rule$1(s);if("comment"===s.type)return new Comment$1(s);if("atrule"===s.type)return new AtRule$1(s);throw new Error("Unknown node type: "+e.type)}var fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;let CssSyntaxError22=cssSyntaxError,Declaration22=declaration,LazyResult22=lazyResult,Container22=container,Processor22=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document222=document$1,Warning22=warning,Comment22=comment,AtRule22=atRule,Result22=result,Input22=input,parse=parse_1,list=list_1,Rule22=rule,Root22=root,Node22=node;function postcss(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Processor22(e)}postcss.plugin=function(e,t){let r,s=!1;function o(...r){console&&console.warn&&!s&&(s=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:\nhttps://www.w3ctech.com/topic/2226"));let o=t(...r);return o.postcssPlugin=e,o.postcssVersion=(new Processor22).version,o}return Object.defineProperty(o,"postcss",{get:()=>(r||(r=o()),r)}),o.process=function(e,t,r){return postcss([o(r)]).process(e,t)},o},postcss.stringify=stringify,postcss.parse=parse,postcss.fromJSON=fromJSON,postcss.list=list,postcss.comment=e=>new Comment22(e),postcss.atRule=e=>new AtRule22(e),postcss.decl=e=>new Declaration22(e),postcss.rule=e=>new Rule22(e),postcss.root=e=>new Root22(e),postcss.document=e=>new Document222(e),postcss.CssSyntaxError=CssSyntaxError22,postcss.Declaration=Declaration22,postcss.Container=Container22,postcss.Processor=Processor22,postcss.Document=Document222,postcss.Comment=Comment22,postcss.Warning=Warning22,postcss.AtRule=AtRule22,postcss.Result=Result22,postcss.Input=Input22,postcss.Rule=Rule22,postcss.Root=Root22,postcss.Node=Node22,LazyResult22.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;const postcss$1=getDefaultExportFromCjs(postcss_1);postcss$1.stringify,postcss$1.fromJSON,postcss$1.plugin,postcss$1.parse,postcss$1.list,postcss$1.document,postcss$1.comment,postcss$1.atRule,postcss$1.rule,postcss$1.decl,postcss$1.root,postcss$1.CssSyntaxError,postcss$1.Declaration,postcss$1.Container,postcss$1.Processor,postcss$1.Document,postcss$1.Comment,postcss$1.Warning,postcss$1.AtRule,postcss$1.Result,postcss$1.Input,postcss$1.Rule,postcss$1.Root,postcss$1.Node;var NodeType$1=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(NodeType$1||{});function parseCSSText(e){const t={},r=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const s=e.split(r);s.length>1&&(t[camelize(s[0].trim())]=s[1].trim())}})),t}function toCSSText(e){const t=[];for(const r in e){const s=e[r];if("string"!=typeof s)continue;const o=hyphenate(r);t.push(`${o}: ${s};`)}return t.join(" ")}const camelizeRE=/-([a-z])/g,CUSTOM_PROPERTY_REGEX=/^--[a-zA-Z0-9-]+$/,camelize=e=>CUSTOM_PROPERTY_REGEX.test(e)?e:e.replace(camelizeRE,((e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=e=>e.replace(hyphenateRE,"-$1").toLowerCase();class BaseRRNode{constructor(...e){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof BaseRRNode))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}class BaseRRDocument extends BaseRRNode{constructor(...e){super(e),__publicField2(this,"nodeType",9),__publicField2(this,"nodeName","#document"),__publicField2(this,"compatMode","CSS1Compat"),__publicField2(this,"RRNodeType",NodeType$1.Document),__publicField2(this,"textContent",null),this.ownerDocument=this}get documentElement(){return this.childNodes.find((e=>e.RRNodeType===NodeType$1.Element&&"HTML"===e.tagName))||null}get body(){var e;return(null==(e=this.documentElement)?void 0:e.childNodes.find((e=>e.RRNodeType===NodeType$1.Element&&"BODY"===e.tagName)))||null}get head(){var e;return(null==(e=this.documentElement)?void 0:e.childNodes.find((e=>e.RRNodeType===NodeType$1.Element&&"HEAD"===e.tagName)))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===NodeType$1.Element||t===NodeType$1.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===t)))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===NodeType$1.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const r=appendChild(this,e);return r.parentElement=null,r}insertBefore(e,t){const r=e.RRNodeType;if((r===NodeType$1.Element||r===NodeType$1.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===r)))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${r===NodeType$1.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const s=insertBefore(this,e,t);return s.parentElement=null,s}removeChild(e){return removeChild(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,t,r){return new BaseRRDocument}createDocumentType(e,t,r){const s=new BaseRRDocumentType(e,t,r);return s.ownerDocument=this,s}createElement(e){const t=new BaseRRElement(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new BaseRRText(e);return t.ownerDocument=this,t}createComment(e){const t=new BaseRRComment(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new BaseRRCDATASection(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}class BaseRRDocumentType extends BaseRRNode{constructor(e,t,r){super(),__publicField2(this,"nodeType",10),__publicField2(this,"RRNodeType",NodeType$1.DocumentType),__publicField2(this,"name"),__publicField2(this,"publicId"),__publicField2(this,"systemId"),__publicField2(this,"textContent",null),this.name=e,this.publicId=t,this.systemId=r,this.nodeName=e}toString(){return"RRDocumentType"}}class BaseRRElement extends BaseRRNode{constructor(e){super(),__publicField2(this,"nodeType",1),__publicField2(this,"RRNodeType",NodeType$1.Element),__publicField2(this,"tagName"),__publicField2(this,"attributes",{}),__publicField2(this,"shadowRoot",null),__publicField2(this,"scrollLeft"),__publicField2(this,"scrollTop"),this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach((t=>e+=t.textContent)),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new ClassList(this.attributes.class,(e=>{this.attributes.class=e}))}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?parseCSSText(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(r,s,o)=>{if(t.test(r))return;const n=camelize(r);s?e[n]=s:delete e[n],"important"===o&&(e[n]+=" !important"),this.attributes.style=toCSSText(e)},e.removeProperty=r=>{if(t.test(r))return"";const s=camelize(r),o=e[s]||"";return delete e[s],this.attributes.style=toCSSText(e),o},e}getAttribute(e){return void 0===this.attributes[e]?null:this.attributes[e]}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,r){this.setAttribute(t,r)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return appendChild(this,e)}insertBefore(e,t){return insertBefore(this,e,t)}removeChild(e){return removeChild(this,e)}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}class BaseRRMediaElement extends BaseRRElement{constructor(){super(...arguments),__publicField2(this,"currentTime"),__publicField2(this,"volume"),__publicField2(this,"paused"),__publicField2(this,"muted"),__publicField2(this,"playbackRate"),__publicField2(this,"loop")}attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}class BaseRRDialogElement extends BaseRRElement{constructor(){super(...arguments),__publicField2(this,"tagName","DIALOG"),__publicField2(this,"nodeName","DIALOG")}get isModal(){return"modal"===this.getAttribute("rr_open_mode")}get open(){return null!==this.getAttribute("open")}close(){this.removeAttribute("open"),this.removeAttribute("rr_open_mode")}show(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","non-modal")}showModal(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","modal")}}class BaseRRText extends BaseRRNode{constructor(e){super(),__publicField2(this,"nodeType",3),__publicField2(this,"nodeName","#text"),__publicField2(this,"RRNodeType",NodeType$1.Text),__publicField2(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}class BaseRRComment extends BaseRRNode{constructor(e){super(),__publicField2(this,"nodeType",8),__publicField2(this,"nodeName","#comment"),__publicField2(this,"RRNodeType",NodeType$1.Comment),__publicField2(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}class BaseRRCDATASection extends BaseRRNode{constructor(e){super(),__publicField2(this,"nodeName","#cdata-section"),__publicField2(this,"nodeType",4),__publicField2(this,"RRNodeType",NodeType$1.CDATA),__publicField2(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}class ClassList{constructor(e,t){if(__publicField2(this,"onChange"),__publicField2(this,"classes",[]),__publicField2(this,"add",((...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))})),__publicField2(this,"remove",((...e)=>{this.classes=this.classes.filter((t=>-1===e.indexOf(t))),this.onChange&&this.onChange(this.classes.join(" "))})),e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}function appendChild(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.lastChild?(e.lastChild.nextSibling=t,t.previousSibling=e.lastChild):(e.firstChild=t,t.previousSibling=null),e.lastChild=t,t.nextSibling=null,t.parentNode=e,t.parentElement=e,t.ownerDocument=e.ownerDocument,t}function insertBefore(e,t,r){if(!r)return appendChild(e,t);if(r.parentNode!==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return t===r||(t.parentNode&&t.parentNode.removeChild(t),t.previousSibling=r.previousSibling,r.previousSibling=t,t.nextSibling=r,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,t.parentElement=e,t.parentNode=e,t.ownerDocument=e.ownerDocument),t}function removeChild(e,t){if(t.parentNode!==e)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return t.previousSibling?t.previousSibling.nextSibling=t.nextSibling:e.firstChild=t.nextSibling,t.nextSibling?t.nextSibling.previousSibling=t.previousSibling:e.lastChild=t.previousSibling,t.previousSibling=null,t.nextSibling=null,t.parentElement=null,t.parentNode=null,t}var NodeType$2=(e=>(e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",e))(NodeType$2||{});const NAMESPACES={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},SVGTagMap={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let createdNodeSet=null;function diff(e,t,r,s=t.mirror||t.ownerDocument.mirror){diffChildren(e=diffBeforeUpdatingChildren(e,t,r,s),t,r,s),diffAfterUpdatingChildren(e,t,r)}function diffBeforeUpdatingChildren(e,t,r,s){var o;if(r.afterAppend&&!createdNodeSet&&(createdNodeSet=new WeakSet,setTimeout((()=>{createdNodeSet=null}),0)),!sameNodeType(e,t)){const n=createOrGetNode(t,r.mirror,s);null==(o=e.parentNode)||o.replaceChild(n,e),e=n}switch(t.RRNodeType){case NodeType$1.Document:if(!nodeMatching(e,t,r.mirror,s)){const o=s.getMeta(t);o&&(r.mirror.removeNodeFromMap(e),e.close(),e.open(),r.mirror.add(e,o),null==createdNodeSet||createdNodeSet.add(e))}break;case NodeType$1.Element:{const o=e,n=t;switch(n.tagName){case"IFRAME":{const o=e.contentDocument;if(!o)break;diff(o,t.contentDocument,r,s);break}}n.shadowRoot&&(o.shadowRoot||o.attachShadow({mode:"open"}),diffChildren(o.shadowRoot,n.shadowRoot,r,s)),diffProps(o,n,s);break}}return e}function diffAfterUpdatingChildren(e,t,r){var s;switch(t.RRNodeType){case NodeType$1.Document:{const e=t.scrollData;e&&r.applyScroll(e,!0);break}case NodeType$1.Element:{const s=e,o=t;switch(o.scrollData&&r.applyScroll(o.scrollData,!0),o.inputData&&r.applyInput(o.inputData),o.tagName){case"AUDIO":case"VIDEO":{const t=e,r=o;void 0!==r.paused&&(r.paused?t.pause():t.play()),void 0!==r.muted&&(t.muted=r.muted),void 0!==r.volume&&(t.volume=r.volume),void 0!==r.currentTime&&(t.currentTime=r.currentTime),void 0!==r.playbackRate&&(t.playbackRate=r.playbackRate),void 0!==r.loop&&(t.loop=r.loop);break}case"CANVAS":{const o=t;if(null!==o.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=s.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=o.rr_dataURL}o.canvasMutations.forEach((t=>r.applyCanvas(t.event,t.mutation,e)));break}case"STYLE":{const e=s.sheet;e&&t.rules.forEach((t=>r.applyStyleSheetMutation(t,e)));break}case"DIALOG":{const e=s,t=o,r=e.open,n=e.matches("dialog:modal"),i=t.open,a=t.isModal,l=n!==a,c=r!==i;if((l||r&&c)&&e.close(),i&&(c||l))try{a?e.showModal():e.show()}catch(e){console.warn(e)}break}}break}case NodeType$1.Text:case NodeType$1.Comment:case NodeType$1.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}(null==createdNodeSet?void 0:createdNodeSet.has(e))&&(createdNodeSet.delete(e),null==(s=r.afterAppend)||s.call(r,e,r.mirror.getId(e)))}function diffProps(e,t,r){const s=e.attributes,o=t.attributes;for(const s in o){const n=o[s],i=r.getMeta(t);if((null==i?void 0:i.isSVG)&&NAMESPACES[s])e.setAttributeNS(NAMESPACES[s],s,n);else if("CANVAS"===t.tagName&&"rr_dataURL"===s){const t=document.createElement("img");t.src=n,t.onload=()=>{const r=e.getContext("2d");r&&r.drawImage(t,0,0,t.width,t.height)}}else{if("IFRAME"===t.tagName&&"srcdoc"===s)continue;try{e.setAttribute(s,n)}catch(e){console.warn(e)}}}for(const{name:t}of Array.from(s))t in o||e.removeAttribute(t);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}function diffChildren(e,t,r,s){const o=Array.from(e.childNodes),n=t.childNodes;if(0===o.length&&0===n.length)return;let i,a,l=0,c=o.length-1,u=0,d=n.length-1,h=o[l],p=o[c],m=n[u],f=n[d];for(;l<=c&&u<=d;)if(void 0===h)h=o[++l];else if(void 0===p)p=o[--c];else if(nodeMatching(h,m,r.mirror,s))h=o[++l],m=n[++u];else if(nodeMatching(p,f,r.mirror,s))p=o[--c],f=n[--d];else if(nodeMatching(h,f,r.mirror,s)){try{e.insertBefore(h,p.nextSibling)}catch(e){console.warn(e)}h=o[++l],f=n[--d]}else if(nodeMatching(p,m,r.mirror,s)){try{e.insertBefore(p,h)}catch(e){console.warn(e)}p=o[--c],m=n[++u]}else{if(!i){i={};for(let e=l;e<=c;e++){const t=o[e];t&&r.mirror.hasNode(t)&&(i[r.mirror.getId(t)]=e)}}a=i[s.getId(m)];const t=o[a];if(void 0!==a&&t&&nodeMatching(t,m,r.mirror,s)){try{e.insertBefore(t,h)}catch(e){console.warn(e)}o[a]=void 0}else{const t=createOrGetNode(m,r.mirror,s);"#document"===e.nodeName&&h&&(t.nodeType===t.DOCUMENT_TYPE_NODE&&h.nodeType===h.DOCUMENT_TYPE_NODE||t.nodeType===t.ELEMENT_NODE&&h.nodeType===h.ELEMENT_NODE)&&(e.removeChild(h),r.mirror.removeNodeFromMap(h),h=o[++l]);try{e.insertBefore(t,h||null)}catch(e){console.warn(e)}}m=n[++u]}if(l>c){const t=n[d+1];let o=null;for(t&&(o=r.mirror.getNode(s.getId(t)));u<=d;++u){const t=createOrGetNode(n[u],r.mirror,s);try{e.insertBefore(t,o)}catch(e){console.warn(e)}}}else if(u>d)for(;l<=c;l++){const t=o[l];if(t&&t.parentNode===e)try{e.removeChild(t),r.mirror.removeNodeFromMap(t)}catch(e){console.warn(e)}}let g=e.firstChild,y=t.firstChild;for(;null!==g&&null!==y;)diff(g,y,r,s),g=g.nextSibling,y=y.nextSibling}function createOrGetNode(e,t,r){const s=r.getId(e),o=r.getMeta(e);let n=null;if(s>-1&&(n=t.getNode(s)),null!==n&&sameNodeType(n,e))return n;switch(e.RRNodeType){case NodeType$1.Document:n=new Document;break;case NodeType$1.DocumentType:n=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case NodeType$1.Element:{let t=e.tagName.toLowerCase();t=SVGTagMap[t]||t,n=o&&"isSVG"in o&&(null==o?void 0:o.isSVG)?document.createElementNS(NAMESPACES.svg,t):document.createElement(e.tagName);break}case NodeType$1.Text:n=document.createTextNode(e.data);break;case NodeType$1.Comment:n=document.createComment(e.data);break;case NodeType$1.CDATA:n=document.createCDATASection(e.data)}o&&t.add(n,{...o});try{null==createdNodeSet||createdNodeSet.add(n)}catch(e){}return n}function sameNodeType(e,t){return e.nodeType===t.nodeType&&(e.nodeType!==e.ELEMENT_NODE||e.tagName.toUpperCase()===t.tagName)}function nodeMatching(e,t,r,s){const o=r.getId(e),n=s.getId(t);return-1!==o&&o===n&&sameNodeType(e,t)}class RRDocument extends BaseRRDocument{constructor(e){super(),__publicField2(this,"UNSERIALIZED_STARTING_ID",-2),__publicField2(this,"_unserializedId",this.UNSERIALIZED_STARTING_ID),__publicField2(this,"mirror",createMirror()),__publicField2(this,"scrollData",null),e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,r){return new RRDocument}createDocumentType(e,t,r){const s=new RRDocumentType(e,t,r);return s.ownerDocument=this,s}createElement(e){const t=e.toUpperCase();let r;switch(t){case"AUDIO":case"VIDEO":r=new RRMediaElement(t);break;case"IFRAME":r=new RRIFrameElement(t,this.mirror);break;case"CANVAS":r=new RRCanvasElement(t);break;case"STYLE":r=new RRStyleElement(t);break;case"DIALOG":r=new RRDialogElement(t);break;default:r=new RRElement(t)}return r.ownerDocument=this,r}createComment(e){const t=new RRComment(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new RRCDATASection(e);return t.ownerDocument=this,t}createTextNode(e){const t=new RRText(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const RRDocumentType=BaseRRDocumentType;class RRElement extends BaseRRElement{constructor(){super(...arguments),__publicField2(this,"inputData",null),__publicField2(this,"scrollData",null)}}class RRMediaElement extends BaseRRMediaElement{}class RRDialogElement extends BaseRRDialogElement{}class RRCanvasElement extends RRElement{constructor(){super(...arguments),__publicField2(this,"rr_dataURL",null),__publicField2(this,"canvasMutations",[])}getContext(){return null}}class RRStyleElement extends RRElement{constructor(){super(...arguments),__publicField2(this,"rules",[])}}class RRIFrameElement extends RRElement{constructor(e,t){super(e),__publicField2(this,"contentDocument",new RRDocument),this.contentDocument.mirror=t}}const RRText=BaseRRText,RRComment=BaseRRComment,RRCDATASection=BaseRRCDATASection;function getValidTagName(e){return e instanceof HTMLFormElement?"FORM":e.tagName.toUpperCase()}function buildFromNode(e,t,r,s){let o;switch(e.nodeType){case NodeType$2.DOCUMENT_NODE:s&&"IFRAME"===s.nodeName?o=s.contentDocument:(o=t,o.compatMode=e.compatMode);break;case NodeType$2.DOCUMENT_TYPE_NODE:{const r=e;o=t.createDocumentType(r.name,r.publicId,r.systemId);break}case NodeType$2.ELEMENT_NODE:{const r=e,s=getValidTagName(r);o=t.createElement(s);const n=o;for(const{name:e,value:t}of Array.from(r.attributes))n.attributes[e]=t;r.scrollLeft&&(n.scrollLeft=r.scrollLeft),r.scrollTop&&(n.scrollTop=r.scrollTop);break}case NodeType$2.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case NodeType$2.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case NodeType$2.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case NodeType$2.DOCUMENT_FRAGMENT_NODE:o=s.attachShadow({mode:"open"});break;default:return null}let n=r.getMeta(e);return t instanceof RRDocument&&(n||(n=getDefaultSN(o,t.unserializedId),r.add(e,n)),t.mirror.add(o,{...n})),o}function buildFromDom(e,t=createMirror$1(),r=new RRDocument){return function e(s,o){const n=buildFromNode(s,r,t,o);if(null!==n)if("IFRAME"!==(null==o?void 0:o.nodeName)&&s.nodeType!==NodeType$2.DOCUMENT_FRAGMENT_NODE&&(null==o||o.appendChild(n),n.parentNode=o,n.parentElement=o),"IFRAME"===s.nodeName){const t=s.contentDocument;t&&e(t,n)}else s.nodeType!==NodeType$2.DOCUMENT_NODE&&s.nodeType!==NodeType$2.ELEMENT_NODE&&s.nodeType!==NodeType$2.DOCUMENT_FRAGMENT_NODE||(s.nodeType===NodeType$2.ELEMENT_NODE&&s.shadowRoot&&e(s.shadowRoot,n),s.childNodes.forEach((t=>e(t,n))))}(e,null),r}function createMirror(){return new Mirror22}class Mirror22{constructor(){__publicField2(this,"idNodeMap",new Map),__publicField2(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const e=this.nodeMetaMap.get(r);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function getDefaultSN(e,t){switch(e.RRNodeType){case NodeType$1.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case NodeType$1.DocumentType:{const r=e;return{id:t,type:e.RRNodeType,name:r.name,publicId:r.publicId,systemId:r.systemId}}case NodeType$1.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case NodeType$1.Text:case NodeType$1.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case NodeType$1.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}const testableAccessors={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype={},isAngularZonePresent=()=>!!globalThis.Zone;function getUntaintedPrototype(e){if(untaintedBasePrototype[e])return untaintedBasePrototype[e];const t=globalThis[e],r=t.prototype,s=e in testableAccessors?testableAccessors[e]:void 0,o=Boolean(s&&s.every((e=>{var t,s;return Boolean(null==(s=null==(t=Object.getOwnPropertyDescriptor(r,e))?void 0:t.get)?void 0:s.toString().includes("[native code]"))}))),n=e in testableMethods?testableMethods[e]:void 0,i=Boolean(n&&n.every((e=>{var t;return"function"==typeof r[e]&&(null==(t=r[e])?void 0:t.toString().includes("[native code]"))})));if(o&&i&&!isAngularZonePresent())return untaintedBasePrototype[e]=t.prototype,t.prototype;try{const s=document.createElement("iframe");document.body.appendChild(s);const o=s.contentWindow;if(!o)return t.prototype;const n=o[e].prototype;return document.body.removeChild(s),n?untaintedBasePrototype[e]=n:r}catch{return r}}const untaintedAccessorCache={};function getUntaintedAccessor(e,t,r){var s;const o=`${e}.${String(r)}`;if(untaintedAccessorCache[o])return untaintedAccessorCache[o].call(t);const n=getUntaintedPrototype(e),i=null==(s=Object.getOwnPropertyDescriptor(n,r))?void 0:s.get;return i?(untaintedAccessorCache[o]=i,i.call(t)):t[r]}const untaintedMethodCache={};function getUntaintedMethod(e,t,r){const s=`${e}.${String(r)}`;if(untaintedMethodCache[s])return untaintedMethodCache[s].bind(t);const o=getUntaintedPrototype(e)[r];return"function"!=typeof o?t[r]:(untaintedMethodCache[s]=o,o.bind(t))}function childNodes(e){return getUntaintedAccessor("Node",e,"childNodes")}function parentNode(e){return getUntaintedAccessor("Node",e,"parentNode")}function parentElement(e){return getUntaintedAccessor("Node",e,"parentElement")}function textContent(e){return getUntaintedAccessor("Node",e,"textContent")}function contains(e,t){return getUntaintedMethod("Node",e,"contains")(t)}function getRootNode(e){return getUntaintedMethod("Node",e,"getRootNode")()}function host(e){return e&&"host"in e?getUntaintedAccessor("ShadowRoot",e,"host"):null}function styleSheets(e){return e.styleSheets}function shadowRoot(e){return e&&"shadowRoot"in e?getUntaintedAccessor("Element",e,"shadowRoot"):null}function querySelector(e,t){return getUntaintedAccessor("Element",e,"querySelector")(t)}function querySelectorAll(e,t){return getUntaintedAccessor("Element",e,"querySelectorAll")(t)}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}const index={childNodes:childNodes,parentNode:parentNode,parentElement:parentElement,textContent:textContent,contains:contains,getRootNode:getRootNode,host:host,styleSheets:styleSheets,shadowRoot:shadowRoot,querySelector:querySelector,querySelectorAll:querySelectorAll,mutationObserver:mutationObserverCtor};function on(e,t,r=document){const s={capture:!0,passive:!0};return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}const DEPARTED_MIRROR_ACCESS_WARNING="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let _mirror={map:{},getId:()=>(console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1),getNode:()=>(console.error(DEPARTED_MIRROR_ACCESS_WARNING),null),removeNodeFromMap(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has:()=>(console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1),reset(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};function throttle(e,t,r={}){let s=null,o=0;return function(...n){const i=Date.now();o||!1!==r.leading||(o=i);const a=t-(i-o),l=this;a<=0||a>t?(s&&(clearTimeout(s),s=null),o=i,e.apply(l,n)):s||!1===r.trailing||(s=setTimeout((()=>{o=!1===r.leading?0:Date.now(),s=null,e.apply(l,n)}),a))}}function hookSetter(e,t,r,s,o=window){const n=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,s?r:{set(e){setTimeout((()=>{r.set.call(this,e)}),0),n&&n.set&&n.set.call(this,e)}}),()=>hookSetter(e,t,n||{},!0)}function patch(e,t,r){try{if(!(t in e))return()=>{};const s=e[t],o=r(s);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=o,()=>{e[t]=s}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get:(e,t,r)=>("map"===t&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(e,t,r))}));let nowTimestamp=Date.now;function getWindowScroll(e){var t,r,s,o;const n=e.document;return{left:n.scrollingElement?n.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:n.documentElement.scrollLeft||(null==n?void 0:n.body)&&(null==(t=index.parentElement(n.body))?void 0:t.scrollLeft)||(null==(r=null==n?void 0:n.body)?void 0:r.scrollLeft)||0,top:n.scrollingElement?n.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==n?void 0:n.documentElement.scrollTop)||(null==n?void 0:n.body)&&(null==(s=index.parentElement(n.body))?void 0:s.scrollTop)||(null==(o=null==n?void 0:n.body)?void 0:o.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:index.parentElement(e)}function isBlocked(e,t,r,s){if(!e)return!1;const o=closestElementOfNode(e);if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(s&&null!==o.closest("."+t))return!0}else if(classMatchesRegex(o,t,s))return!0}catch(e){}if(r){if(o.matches(r))return!0;if(s&&null!==o.closest(r))return!0}return!1}function isSerialized(e,t){return-1!==t.getId(e)}function isIgnored(e,t,r){return!("TITLE"!==e.tagName||!r.headTitleMutations)||-2===t.getId(e)}function isAncestorRemoved(e,t){if(isShadowRoot(e))return!1;const r=t.getId(e);if(!t.has(r))return!0;const s=index.parentNode(e);return(!s||s.nodeType!==e.DOCUMENT_NODE)&&(!s||isAncestorRemoved(s,t))}function legacy_isTouchEvent(e){return Boolean(e.changedTouches)}function polyfill$1(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function queueToResolveTrees(e){const t={},r=(e,r)=>{const s={value:e,parent:r,children:[]};return t[e.node.id]=s,s},s=[];for(const o of e){const{nextId:e,parentId:n}=o;if(e&&e in t){const n=t[e];if(n.parent){const e=n.parent.children.indexOf(n);n.parent.children.splice(e,0,r(o,n.parent))}else{const e=s.indexOf(n);s.splice(e,0,r(o,null))}}else if(n in t){const e=t[n];e.children.push(r(o,e))}else s.push(r(o,null))}return s}function iterateResolveTree(e,t){t(e.value);for(let r=e.children.length-1;r>=0;r--)iterateResolveTree(e.children[r],t)}function isSerializedIframe(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function isSerializedStylesheet(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function getBaseDimension(e,t){var r,s;const o=null==(s=null==(r=e.ownerDocument)?void 0:r.defaultView)?void 0:s.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const n=o.getBoundingClientRect(),i=getBaseDimension(o,t),a=n.height/o.clientHeight;return{x:n.x*i.relativeScale+i.x,y:n.y*i.relativeScale+i.y,relativeScale:a,absoluteScale:i.absoluteScale*a}}function hasShadowRoot(e){return!!e&&(e instanceof BaseRRNode&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(index.shadowRoot(e)))}function getNestedRule(e,t){const r=e[t[0]];return 1===t.length?r:getNestedRule(r.cssRules[t[1]].cssRules,t.slice(2))}function getPositionsAndIndex(e){const t=[...e],r=t.pop();return{positions:t,index:r}}function uniqueTextMutations(e){const t=new Set,r=[];for(let s=e.length;s--;){const o=e[s];t.has(o.id)||(r.push(o),t.add(o.id))}return r}/[1-9][0-9]{12}/.test(Date.now().toString())||(nowTimestamp=()=>(new Date).getTime());class StyleSheetMirror{constructor(){__publicField(this,"id",1),__publicField(this,"styleIDMap",new WeakMap),__publicField(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return r=void 0===t?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function getShadowHost(e){var t;let r=null;return"getRootNode"in e&&(null==(t=index.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&index.host(index.getRootNode(e))&&(r=index.host(index.getRootNode(e))),r}function getRootShadowHost(e){let t,r=e;for(;t=getShadowHost(r);)r=t;return r}function shadowHostInDom(e){const t=e.ownerDocument;if(!t)return!1;const r=getRootShadowHost(e);return index.contains(t,r)}function inDom(e){const t=e.ownerDocument;return!!t&&(index.contains(t,e)||shadowHostInDom(e))}const utils=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:StyleSheetMirror,get _mirror(){return _mirror},closestElementOfNode:closestElementOfNode,getBaseDimension:getBaseDimension,getNestedRule:getNestedRule,getPositionsAndIndex:getPositionsAndIndex,getRootShadowHost:getRootShadowHost,getShadowHost:getShadowHost,getWindowHeight:getWindowHeight,getWindowScroll:getWindowScroll,getWindowWidth:getWindowWidth,hasShadowRoot:hasShadowRoot,hookSetter:hookSetter,inDom:inDom,isAncestorRemoved:isAncestorRemoved,isBlocked:isBlocked,isIgnored:isIgnored,isSerialized:isSerialized,isSerializedIframe:isSerializedIframe,isSerializedStylesheet:isSerializedStylesheet,iterateResolveTree:iterateResolveTree,legacy_isTouchEvent:legacy_isTouchEvent,get nowTimestamp(){return nowTimestamp},on:on,patch:patch,polyfill:polyfill$1,queueToResolveTrees:queueToResolveTrees,shadowHostInDom:shadowHostInDom,throttle:throttle,uniqueTextMutations:uniqueTextMutations},Symbol.toStringTag,{value:"Module"}));var EventType=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(EventType||{}),IncrementalSource=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(IncrementalSource||{}),MouseInteractions=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(MouseInteractions||{}),PointerTypes=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(PointerTypes||{}),CanvasContext=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(CanvasContext||{}),MediaInteractions=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(MediaInteractions||{}),ReplayerEvents=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(ReplayerEvents||{}),NodeType=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(NodeType||{});function isNodeInLinkedList(e){return"__ln"in e}class DoubleLinkedList{constructor(){__publicField(this,"length",0),__publicField(this,"head",null),__publicField(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const moveKey=(e,t)=>`${e}@${t}`;class MutationBuffer{constructor(){__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"texts",[]),__publicField(this,"attributes",[]),__publicField(this,"attributeMap",new WeakMap),__publicField(this,"removes",[]),__publicField(this,"mapRemoves",[]),__publicField(this,"movedMap",{}),__publicField(this,"addedSet",new Set),__publicField(this,"movedSet",new Set),__publicField(this,"droppedSet",new Set),__publicField(this,"removesSubTreeCache",new Set),__publicField(this,"mutationCb"),__publicField(this,"blockClass"),__publicField(this,"blockSelector"),__publicField(this,"maskTextClass"),__publicField(this,"maskTextSelector"),__publicField(this,"inlineStylesheet"),__publicField(this,"maskInputOptions"),__publicField(this,"maskTextFn"),__publicField(this,"maskInputFn"),__publicField(this,"keepIframeSrcFn"),__publicField(this,"recordCanvas"),__publicField(this,"inlineImages"),__publicField(this,"slimDOMOptions"),__publicField(this,"dataURLOptions"),__publicField(this,"doc"),__publicField(this,"mirror"),__publicField(this,"iframeManager"),__publicField(this,"stylesheetManager"),__publicField(this,"shadowDomManager"),__publicField(this,"canvasManager"),__publicField(this,"processedNodeManager"),__publicField(this,"unattachedDoc"),__publicField(this,"processMutations",(e=>{e.forEach(this.processMutation),this.emit()})),__publicField(this,"emit",(()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,r=new DoubleLinkedList,s=e=>{let t=e,r=-2;for(;-2===r;)t=t&&t.nextSibling,r=t&&this.mirror.getId(t);return r},o=o=>{const n=index.parentNode(o);if(!n||!inDom(o))return;let i=!1;if(o.nodeType===Node.TEXT_NODE){const e=n.tagName;if("TEXTAREA"===e)return;"STYLE"===e&&this.addedSet.has(n)&&(i=!0)}const a=isShadowRoot(n)?this.mirror.getId(getShadowHost(o)):this.mirror.getId(n),l=s(o);if(-1===a||-1===l)return r.addNode(o);const c=serializeNodeWithId(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{isSerializedIframe(e,this.mirror)&&this.iframeManager.addIframe(e),isSerializedStylesheet(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),hasShadowRoot(o)&&this.shadowDomManager.addShadowRoot(index.shadowRoot(o),this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},cssCaptured:i});c&&(e.push({parentId:a,nextId:l,node:c}),t.add(c.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)isParentRemoved(this.removesSubTreeCache,e,this.mirror)&&!this.movedSet.has(index.parentNode(e))||o(e);for(const e of this.addedSet)isAncestorInSet(this.droppedSet,e)||isParentRemoved(this.removesSubTreeCache,e,this.mirror)?isAncestorInSet(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let n=null;for(;r.length;){let e=null;if(n){const t=this.mirror.getId(index.parentNode(n.value)),r=s(n.value);-1!==t&&-1!==r&&(e=n)}if(!e){let t=r.tail;for(;t;){const r=t;if(t=t.previous,r){const t=this.mirror.getId(index.parentNode(r.value));if(-1===s(r.value))continue;if(-1!==t){e=r;break}{const t=r.value,s=index.parentNode(t);if(s&&s.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const t=index.host(s);if(-1!==this.mirror.getId(t)){e=r;break}}}}}}if(!e){for(;r.head;)r.removeNode(r.head.value);break}n=e.previous,r.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>{const t=e.node,r=index.parentNode(t);return r&&"TEXTAREA"===r.tagName&&this.genTextAreaValueMutation(r),{id:this.mirror.getId(t),value:e.value}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const r=JSON.stringify(e.styleDiff),s=JSON.stringify(e._unchangedStyles);r.length<t.style.length&&(r+s).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(i))})),__publicField(this,"genTextAreaValueMutation",(e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(index.childNodes(e),(e=>index.textContent(e)||"")).join("")})),__publicField(this,"processMutation",(e=>{if(!isIgnored(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=index.textContent(e.target);isBlocked(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:needMaskingText(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,closestElementOfNode(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.attributeName,s=e.target.getAttribute(r);if("value"===r){const e=getInputType(t);s=maskInputValue({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:s,maskInputFn:this.maskInputFn})}if(isBlocked(e.target,this.blockClass,this.blockSelector,!1)||s===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===r&&!this.keepIframeSrcFn(s)){if(t.contentDocument)return;r="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===r&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!ignoreAttribute(t.tagName,r))if(o.attributes[r]=transformAttribute(this.doc,toLowerCase(t.tagName),toLowerCase(r),s),"style"===r){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const s=t.style.getPropertyValue(e),n=t.style.getPropertyPriority(e);s!==r.style.getPropertyValue(e)||n!==r.style.getPropertyPriority(e)?o.styleDiff[e]=""===n?s:[s,n]:o._unchangedStyles[e]=[s,n]}for(const e of Array.from(r.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}else"open"===r&&"DIALOG"===t.tagName&&(t.matches("dialog:modal")?o.attributes.rr_open_mode="modal":o.attributes.rr_open_mode="non-modal");break}case"childList":if(isBlocked(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const r=this.mirror.getId(t),s=isShadowRoot(e.target)?this.mirror.getId(index.host(e.target)):this.mirror.getId(e.target);isBlocked(e.target,this.blockClass,this.blockSelector,!1)||isIgnored(t,this.mirror,this.slimDOMOptions)||!isSerialized(t,this.mirror)||(this.addedSet.has(t)?(deepDelete(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===r||isAncestorRemoved(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[moveKey(r,s)]?deepDelete(this.movedSet,t):(this.removes.push({parentId:s,id:r,isShadow:!(!isShadowRoot(e.target)||!isNativeShadowDom(e.target))||void 0}),processRemoves(t,this.removesSubTreeCache))),this.mapRemoves.push(t))}))}})),__publicField(this,"genAdds",((e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(isIgnored(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&-1!==r&&(this.movedMap[moveKey(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);isBlocked(e,this.blockClass,this.blockSelector,!1)||(index.childNodes(e).forEach((e=>this.genAdds(e))),hasShadowRoot(e)&&index.childNodes(index.shadowRoot(e)).forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}))}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function deepDelete(e,t){e.delete(t),index.childNodes(t).forEach((t=>deepDelete(e,t)))}function processRemoves(e,t){const r=[e];for(;r.length;){const e=r.pop();t.has(e)||(t.add(e),index.childNodes(e).forEach((e=>r.push(e))))}}function isParentRemoved(e,t,r){return 0!==e.size&&_isParentRemoved(e,t)}function _isParentRemoved(e,t,r){const s=index.parentNode(t);return!!s&&e.has(s)}function isAncestorInSet(e,t){return 0!==e.size&&_isAncestorInSet(e,t)}function _isAncestorInSet(e,t){const r=index.parentNode(t);return!!r&&(!!e.has(r)||_isAncestorInSet(e,r))}let errorHandler;function registerErrorHandler(e){errorHandler=e}function unregisterErrorHandler(){errorHandler=void 0}const callbackWrapper=e=>{if(!errorHandler)return e;return(...t)=>{try{return e(...t)}catch(e){if(errorHandler&&!0===errorHandler(e))return;throw e}}},mutationBuffers=[];function getEventTarget(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function initMutationObserver(e,t){const r=new MutationBuffer;mutationBuffers.push(r),r.init(e);const s=new(mutationObserverCtor())(callbackWrapper(r.processMutations.bind(r)));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function initMoveObserver({mousemoveCb:e,sampling:t,doc:r,mirror:s}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,n="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const l=throttle(callbackWrapper((t=>{const r=Date.now()-i;e(a.map((e=>(e.timeOffset-=r,e))),t),a=[],i=null})),n),c=callbackWrapper(throttle(callbackWrapper((e=>{const t=getEventTarget(e),{clientX:r,clientY:o}=legacy_isTouchEvent(e)?e.changedTouches[0]:e;i||(i=nowTimestamp()),a.push({x:r,y:o,id:s.getId(t),timeOffset:nowTimestamp()-i}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?IncrementalSource.Drag:e instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)})),o,{trailing:!1})),u=[on("mousemove",c,r),on("touchmove",c,r),on("drag",c,r)];return callbackWrapper((()=>{u.forEach((e=>e()))}))}function initMouseInteractionObserver({mouseInteractionCb:e,doc:t,mirror:r,blockClass:s,blockSelector:o,sampling:n}){if(!1===n.mouseInteraction)return()=>{};const i=!0===n.mouseInteraction||void 0===n.mouseInteraction?{}:n.mouseInteraction,a=[];let l=null;return Object.keys(MouseInteractions).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e])).forEach((n=>{let i=toLowerCase(n);const c=(t=>n=>{const i=getEventTarget(n);if(isBlocked(i,s,o,!0))return;let a=null,c=t;if("pointerType"in n){switch(n.pointerType){case"mouse":a=PointerTypes.Mouse;break;case"touch":a=PointerTypes.Touch;break;case"pen":a=PointerTypes.Pen}a===PointerTypes.Touch?MouseInteractions[t]===MouseInteractions.MouseDown?c="TouchStart":MouseInteractions[t]===MouseInteractions.MouseUp&&(c="TouchEnd"):PointerTypes.Pen}else legacy_isTouchEvent(n)&&(a=PointerTypes.Touch);null!==a?(l=a,(c.startsWith("Touch")&&a===PointerTypes.Touch||c.startsWith("Mouse")&&a===PointerTypes.Mouse)&&(a=null)):MouseInteractions[t]===MouseInteractions.Click&&(a=l,l=null);const u=legacy_isTouchEvent(n)?n.changedTouches[0]:n;if(!u)return;const d=r.getId(i),{clientX:h,clientY:p}=u;callbackWrapper(e)({type:MouseInteractions[c],id:d,x:h,y:p,...null!==a&&{pointerType:a}})})(n);if(window.PointerEvent)switch(MouseInteractions[n]){case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:i=i.replace("mouse","pointer");break;case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:return}a.push(on(i,c,t))})),callbackWrapper((()=>{a.forEach((e=>e()))}))}function initScrollObserver({scrollCb:e,doc:t,mirror:r,blockClass:s,blockSelector:o,sampling:n}){return on("scroll",callbackWrapper(throttle(callbackWrapper((n=>{const i=getEventTarget(n);if(!i||isBlocked(i,s,o,!0))return;const a=r.getId(i);if(i===t&&t.defaultView){const r=getWindowScroll(t.defaultView);e({id:a,x:r.left,y:r.top})}else e({id:a,x:i.scrollLeft,y:i.scrollTop})})),n.scroll||100)),t)}function initViewportResizeObserver({viewportResizeCb:e},{win:t}){let r=-1,s=-1;return on("resize",callbackWrapper(throttle(callbackWrapper((()=>{const t=getWindowHeight(),o=getWindowWidth();r===t&&s===o||(e({width:Number(o),height:Number(t)}),r=t,s=o)})),200)),t)}const INPUT_TAGS=["INPUT","TEXTAREA","SELECT"],lastInputValueMap=new WeakMap;function initInputObserver({inputCb:e,doc:t,mirror:r,blockClass:s,blockSelector:o,ignoreClass:n,ignoreSelector:i,maskInputOptions:a,maskInputFn:l,sampling:c,userTriggeredOnInput:u}){function d(e){let r=getEventTarget(e);const c=e.isTrusted,d=r&&r.tagName;if(r&&"OPTION"===d&&(r=index.parentElement(r)),!r||!d||INPUT_TAGS.indexOf(d)<0||isBlocked(r,s,o,!0))return;if(r.classList.contains(n)||i&&r.matches(i))return;let p=r.value,m=!1;const f=getInputType(r)||"";"radio"===f||"checkbox"===f?m=r.checked:(a[d.toLowerCase()]||a[f])&&(p=maskInputValue({element:r,maskInputOptions:a,tagName:d,type:f,value:p,maskInputFn:l})),h(r,u?{text:p,isChecked:m,userTriggered:c}:{text:p,isChecked:m});const g=r.name;"radio"===f&&g&&m&&t.querySelectorAll(`input[type="radio"][name="${g}"]`).forEach((e=>{if(e!==r){const t=e.value;h(e,u?{text:t,isChecked:!m,userTriggered:!1}:{text:t,isChecked:!m})}}))}function h(t,s){const o=lastInputValueMap.get(t);if(!o||o.text!==s.text||o.isChecked!==s.isChecked){lastInputValueMap.set(t,s);const o=r.getId(t);callbackWrapper(e)({...s,id:o})}}const p=("last"===c.input?["change"]:["input","change"]).map((e=>on(e,callbackWrapper(d),t))),m=t.defaultView;if(!m)return()=>{p.forEach((e=>e()))};const f=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),g=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return f&&f.set&&p.push(...g.map((e=>hookSetter(e[0],e[1],{set(){callbackWrapper(d)({target:this,isTrusted:!1})}},!1,m)))),callbackWrapper((()=>{p.forEach((e=>e()))}))}function getNestedCSSRulePositions(e){return function(e,t){if(hasNestedCSSRule("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else if(e.parentStyleSheet){const r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function getIdAndStyleId(e,t,r){let s,o;return e?(e.ownerNode?s=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:s}):{}}function initStyleSheetObserver({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const o=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:callbackWrapper(((s,o,n)=>{const[i,a]=n,{id:l,styleId:c}=getIdAndStyleId(o,t,r.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:i,index:a}]}),s.apply(o,n)}))}),s.CSSStyleSheet.prototype.addRule=function(e,t,r=this.cssRules.length){const o=`${e} { ${t} }`;return s.CSSStyleSheet.prototype.insertRule.apply(this,[o,r])};const n=s.CSSStyleSheet.prototype.deleteRule;let i,a;s.CSSStyleSheet.prototype.deleteRule=new Proxy(n,{apply:callbackWrapper(((s,o,n)=>{const[i]=n,{id:a,styleId:l}=getIdAndStyleId(o,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:i}]}),s.apply(o,n)}))}),s.CSSStyleSheet.prototype.removeRule=function(e){return s.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},s.CSSStyleSheet.prototype.replace&&(i=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:callbackWrapper(((s,o,n)=>{const[i]=n,{id:a,styleId:l}=getIdAndStyleId(o,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:i}),s.apply(o,n)}))})),s.CSSStyleSheet.prototype.replaceSync&&(a=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:callbackWrapper(((s,o,n)=>{const[i]=n,{id:a,styleId:l}=getIdAndStyleId(o,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:i}),s.apply(o,n)}))}));const l={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?l.CSSGroupingRule=s.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(l.CSSMediaRule=s.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(l.CSSConditionRule=s.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(l.CSSSupportsRule=s.CSSSupportsRule));const c={};return Object.entries(l).forEach((([s,o])=>{c[s]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(c[s].insertRule,{apply:callbackWrapper(((s,o,n)=>{const[i,a]=n,{id:l,styleId:c}=getIdAndStyleId(o.parentStyleSheet,t,r.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:i,index:[...getNestedCSSRulePositions(o),a||0]}]}),s.apply(o,n)}))}),o.prototype.deleteRule=new Proxy(c[s].deleteRule,{apply:callbackWrapper(((s,o,n)=>{const[i]=n,{id:a,styleId:l}=getIdAndStyleId(o.parentStyleSheet,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...getNestedCSSRulePositions(o),i]}]}),s.apply(o,n)}))})})),callbackWrapper((()=>{s.CSSStyleSheet.prototype.insertRule=o,s.CSSStyleSheet.prototype.deleteRule=n,i&&(s.CSSStyleSheet.prototype.replace=i),a&&(s.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}function initAdoptedStyleSheetObserver({mirror:e,stylesheetManager:t},r){var s,o,n;let i=null;i="#document"===r.nodeName?e.getId(r):e.getId(index.host(r));const a="#document"===r.nodeName?null==(s=r.defaultView)?void 0:s.Document:null==(n=null==(o=r.ownerDocument)?void 0:o.defaultView)?void 0:n.ShadowRoot,l=(null==a?void 0:a.prototype)?Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets"):void 0;return null!==i&&-1!==i&&a&&l?(Object.defineProperty(r,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var e;return null==(e=l.get)?void 0:e.call(this)},set(e){var r;const s=null==(r=l.set)?void 0:r.call(this,e);if(null!==i&&-1!==i)try{t.adoptStyleSheets(e,i)}catch(e){}return s}}),callbackWrapper((()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))):()=>{}}function initStyleDeclarationObserver({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:s},{win:o}){const n=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(n,{apply:callbackWrapper(((o,i,a)=>{var l;const[c,u,d]=a;if(r.has(c))return n.apply(i,[c,u,d]);const{id:h,styleId:p}=getIdAndStyleId(null==(l=i.parentRule)?void 0:l.parentStyleSheet,t,s.styleMirror);return(h&&-1!==h||p&&-1!==p)&&e({id:h,styleId:p,set:{property:c,value:u,priority:d},index:getNestedCSSRulePositions(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:callbackWrapper(((o,n,a)=>{var l;const[c]=a;if(r.has(c))return i.apply(n,[c]);const{id:u,styleId:d}=getIdAndStyleId(null==(l=n.parentRule)?void 0:l.parentStyleSheet,t,s.styleMirror);return(u&&-1!==u||d&&-1!==d)&&e({id:u,styleId:d,remove:{property:c},index:getNestedCSSRulePositions(n.parentRule)}),o.apply(n,a)}))}),callbackWrapper((()=>{o.CSSStyleDeclaration.prototype.setProperty=n,o.CSSStyleDeclaration.prototype.removeProperty=i}))}function initMediaInteractionObserver({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:s,sampling:o,doc:n}){const i=callbackWrapper((n=>throttle(callbackWrapper((o=>{const i=getEventTarget(o);if(!i||isBlocked(i,t,r,!0))return;const{currentTime:a,volume:l,muted:c,playbackRate:u,loop:d}=i;e({type:n,id:s.getId(i),currentTime:a,volume:l,muted:c,playbackRate:u,loop:d})})),o.media||500))),a=[on("play",i(MediaInteractions.Play),n),on("pause",i(MediaInteractions.Pause),n),on("seeked",i(MediaInteractions.Seeked),n),on("volumechange",i(MediaInteractions.VolumeChange),n),on("ratechange",i(MediaInteractions.RateChange),n)];return callbackWrapper((()=>{a.forEach((e=>e()))}))}function initFontObserver({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const s=[],o=new WeakMap,n=r.FontFace;r.FontFace=function(e,t,r){const s=new n(e,t,r);return o.set(s,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),s};const i=patch(t.fonts,"add",(function(t){return function(r){return setTimeout(callbackWrapper((()=>{const t=o.get(r);t&&(e(t),o.delete(r))})),0),t.apply(this,[r])}}));return s.push((()=>{r.FontFace=n})),s.push(i),callbackWrapper((()=>{s.forEach((e=>e()))}))}function initSelectionObserver(e){const{doc:t,mirror:r,blockClass:s,blockSelector:o,selectionCb:n}=e;let i=!0;const a=callbackWrapper((()=>{const e=t.getSelection();if(!e||i&&(null==e?void 0:e.isCollapsed))return;i=e.isCollapsed||!1;const a=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const n=e.getRangeAt(t),{startContainer:i,startOffset:l,endContainer:c,endOffset:u}=n;isBlocked(i,s,o,!0)||isBlocked(c,s,o,!0)||a.push({start:r.getId(i),startOffset:l,end:r.getId(c),endOffset:u})}n({ranges:a})}));return a(),on("selectionchange",a)}function initCustomElementObserver({doc:e,customElementCb:t}){const r=e.defaultView;if(!r||!r.customElements)return()=>{};return patch(r.customElements,"define",(function(e){return function(r,s,o){try{t({define:{name:r}})}catch(e){console.warn(`Custom element callback failed for ${r}`)}return e.apply(this,[r,s,o])}}))}function mergeHooks(e,t){const{mutationCb:r,mousemoveCb:s,mouseInteractionCb:o,scrollCb:n,viewportResizeCb:i,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:c,styleDeclarationCb:u,canvasMutationCb:d,fontCb:h,selectionCb:p,customElementCb:m}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),r(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),s(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),n(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),i(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),a(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),l(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),c(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),u(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),d(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),h(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),p(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),m(...e)}}function initObservers(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};let s;mergeHooks(e,t),e.recordDOM&&(s=initMutationObserver(e,e.doc));const o=initMoveObserver(e),n=initMouseInteractionObserver(e),i=initScrollObserver(e),a=initViewportResizeObserver(e,{win:r}),l=initInputObserver(e),c=initMediaInteractionObserver(e);let u=()=>{},d=()=>{},h=()=>{},p=()=>{};e.recordDOM&&(u=initStyleSheetObserver(e,{win:r}),d=initAdoptedStyleSheetObserver(e,e.doc),h=initStyleDeclarationObserver(e,{win:r}),e.collectFonts&&(p=initFontObserver(e)));const m=initSelectionObserver(e),f=initCustomElementObserver(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,r,t.options));return callbackWrapper((()=>{mutationBuffers.forEach((e=>e.reset())),null==s||s.disconnect(),o(),n(),i(),a(),l(),c(),u(),d(),h(),p(),m(),f(),g.forEach((e=>e()))}))}function hasNestedCSSRule(e){return void 0!==window[e]}function canMonkeyPatchNestedCSSRule(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class CrossOriginIframeMirror{constructor(e){__publicField(this,"iframeIdToRemoteIdMap",new WeakMap),__publicField(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,r,s){const o=r||this.getIdToRemoteIdMap(e),n=s||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),n.set(i,t)),i}getIds(e,t){const r=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,r,s)))}getRemoteId(e,t,r){const s=r||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=s.get(t);return o||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,r)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class IframeManager{constructor(e){__publicField(this,"iframes",new WeakMap),__publicField(this,"crossOriginIframeMap",new WeakMap),__publicField(this,"crossOriginIframeMirror",new CrossOriginIframeMirror(genId)),__publicField(this,"crossOriginIframeStyleMirror"),__publicField(this,"crossOriginIframeRootIdMap",new WeakMap),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"wrappedEmit"),__publicField(this,"loadListener"),__publicField(this,"stylesheetManager"),__publicField(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r,s;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(r=e.contentWindow)||r.addEventListener("message",this.handleMessage.bind(this))),null==(s=this.loadListener)||s.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const r=this.crossOriginIframeMap.get(e.source);if(!r)return;const s=this.transformCrossOriginEvent(r,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){var r;switch(t.type){case EventType.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case EventType.Meta:case EventType.Load:case EventType.DomContentLoaded:return!1;case EventType.Plugin:return t;case EventType.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case EventType.IncrementalSnapshot:switch(t.data.source){case IncrementalSource.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const r=this.crossOriginIframeRootIdMap.get(e);r&&this.patchRootIdOnNode(t.node,r)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case IncrementalSource.ViewportResize:return!1;case IncrementalSource.MediaInteraction:case IncrementalSource.MouseInteraction:case IncrementalSource.Scroll:case IncrementalSource.CanvasMutation:case IncrementalSource.Input:return this.replaceIds(t.data,e,["id"]),t;case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case IncrementalSource.Font:return t;case IncrementalSource.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case IncrementalSource.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}return!1}replace(e,t,r,s){for(const o of s)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(r,t[o]):t[o]=e.getId(r,t[o]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===NodeType.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class ShadowDomManager{constructor(e){__publicField(this,"shadowDoms",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"scrollCb"),__publicField(this,"bypassOptions"),__publicField(this,"mirror"),__publicField(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!isNativeShadowDom(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=initMutationObserver({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>r.disconnect())),this.restoreHandlers.push(initScrollObserver({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(index.host(e))),this.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const r=this;this.restoreHandlers.push(patch(e.prototype,"attachShadow",(function(e){return function(s){const o=e.call(this,s),n=index.shadowRoot(this);return n&&inDom(this)&&r.addShadowRoot(n,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$1=0;i$1<chars.length;i$1++)lookup[chars.charCodeAt(i$1)]=i$1;var encode=function(e){var t,r=new Uint8Array(e),s=r.length,o="";for(t=0;t<s;t+=3)o+=chars[r[t]>>2],o+=chars[(3&r[t])<<4|r[t+1]>>4],o+=chars[(15&r[t+1])<<2|r[t+2]>>6],o+=chars[63&r[t+2]];return s%3==2?o=o.substring(0,o.length-1)+"=":s%3==1&&(o=o.substring(0,o.length-2)+"=="),o},decode=function(e){var t,r,s,o,n,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),u=new Uint8Array(c);for(t=0;t<a;t+=4)r=lookup[e.charCodeAt(t)],s=lookup[e.charCodeAt(t+1)],o=lookup[e.charCodeAt(t+2)],n=lookup[e.charCodeAt(t+3)],u[l++]=r<<2|s>>4,u[l++]=(15&s)<<4|o>>2,u[l++]=(3&o)<<6|63&n;return c};const canvasVarMap=new Map;function variableListFor$1(e,t){let r=canvasVarMap.get(e);return r||(r=new Map,canvasVarMap.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const saveWebGLVar=(e,t,r)=>{if(!e||!isInstanceOfWebGLObject(e,t)&&"object"!=typeof e)return;const s=variableListFor$1(r,e.constructor.name);let o=s.indexOf(e);return-1===o&&(o=s.length,s.push(e)),o};function serializeArg(e,t,r){if(e instanceof Array)return e.map((e=>serializeArg(e,t,r)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:encode(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[serializeArg(e.buffer,t,r),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:r}=e;return{rr_type:t,src:r}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[serializeArg(e.data,t,r),e.width,e.height]}}if(isInstanceOfWebGLObject(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:saveWebGLVar(e,t,r)}}return e}const serializeArgs=(e,t,r)=>e.map((e=>serializeArg(e,t,r))),isInstanceOfWebGLObject=(e,t)=>{const r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(r.find((r=>e instanceof t[r])))};function initCanvas2DMutationObserver(e,t,r,s){const o=[],n=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const i of n)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[i])continue;const n=patch(t.CanvasRenderingContext2D.prototype,i,(function(o){return function(...n){return isBlocked(this.canvas,r,s,!0)||setTimeout((()=>{const r=serializeArgs(n,t,this);e(this.canvas,{type:CanvasContext["2D"],property:i,args:r})}),0),o.apply(this,n)}}));o.push(n)}catch{const r=hookSetter(t.CanvasRenderingContext2D.prototype,i,{set(t){e(this.canvas,{type:CanvasContext["2D"],property:i,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}function getNormalizedContextName(e){return"experimental-webgl"===e?"webgl":e}function initCanvasContextObserver(e,t,r,s){const o=[];try{const n=patch(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o,...n){if(!isBlocked(this,t,r,!0)){const e=getNormalizedContextName(o);if("__context"in this||(this.__context=e),s&&["webgl","webgl2"].includes(e))if(n[0]&&"object"==typeof n[0]){const e=n[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else n.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...n])}}));o.push(n)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((e=>e()))}}function patchGLPrototype(e,t,r,s,o,n){const i=[],a=Object.getOwnPropertyNames(e);for(const l of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if("function"!=typeof e[l])continue;const a=patch(e,l,(function(e){return function(...i){const a=e.apply(this,i);if(saveWebGLVar(a,n,this),"tagName"in this.canvas&&!isBlocked(this.canvas,s,o,!0)){const e=serializeArgs(i,n,this),s={type:t,property:l,args:e};r(this.canvas,s)}return a}}));i.push(a)}catch{const s=hookSetter(e,l,{set(e){r(this.canvas,{type:t,property:l,args:[e],setter:!0})}});i.push(s)}return i}function initCanvasWebGLMutationObserver(e,t,r,s){const o=[];return o.push(...patchGLPrototype(t.WebGLRenderingContext.prototype,CanvasContext.WebGL,e,r,s,t)),void 0!==t.WebGL2RenderingContext&&o.push(...patchGLPrototype(t.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,e,r,s,t)),()=>{o.forEach((e=>e()))}}const encodedJs="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",decodeBase64=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),blob="undefined"!=typeof window&&window.Blob&&new Blob([decodeBase64(encodedJs)],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){let t;try{if(t=blob&&(window.URL||window.webkitURL).createObjectURL(blob),!t)throw"";const r=new Worker(t,{name:null==e?void 0:e.name});return r.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),r}catch(t){return new Worker("data:text/javascript;base64,"+encodedJs,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class CanvasManager{constructor(e){__publicField(this,"pendingCanvasMutations",new Map),__publicField(this,"rafStamps",{latestId:0,invokeId:null}),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"resetObservers"),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"processMutation",((e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)}));const{sampling:t="all",win:r,blockClass:s,blockSelector:o,recordCanvas:n,dataURLOptions:i}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,n&&"all"===t&&this.initCanvasMutationObserver(r,s,o),n&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,s,o,{dataURLOptions:i})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,s,o){const n=initCanvasContextObserver(t,r,s,!0),i=new Map,a=new WorkerWrapper;a.onmessage=e=>{const{id:t}=e.data;if(i.set(t,!1),!("base64"in e.data))return;const{base64:r,type:s,width:o,height:n}=e.data;this.mutationCb({id:t,type:CanvasContext["2D"],commands:[{property:"clearRect",args:[0,0,o,n]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:s}]},0,0]}]})};const l=1e3/e;let c,u=0;const d=e=>{u&&e-u<l||(u=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{isBlocked(t,r,s,!0)||e.push(t)})),e})().forEach((async e=>{var t;const r=this.mirror.getId(e);if(i.get(r))return;if(0===e.width||0===e.height)return;if(i.set(r,!0),["webgl","webgl2"].includes(e.__context)){const r=e.getContext(e.__context);!1===(null==(t=null==r?void 0:r.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&r.clear(r.COLOR_BUFFER_BIT)}const s=await createImageBitmap(e);a.postMessage({id:r,bitmap:s,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[s])}))),c=requestAnimationFrame(d)};c=requestAnimationFrame(d),this.resetObservers=()=>{n(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const s=initCanvasContextObserver(e,t,r,!1),o=initCanvas2DMutationObserver(this.processMutation.bind(this),e,t,r),n=initCanvasWebGLMutationObserver(this.processMutation.bind(this),e,t,r);this.resetObservers=()=>{s(),o(),n()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||-1===t)return;const s=r.map((e=>{const{type:t,...r}=e;return r})),{type:o}=r[0];this.mutationCb({id:t,type:o,commands:s}),this.pendingCanvasMutations.delete(e)}}class StylesheetManager{constructor(e){__publicField(this,"trackedLinkElements",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"adoptedStyleSheetCb"),__publicField(this,"styleMirror",new StyleSheetMirror),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const r={id:t,styleIds:[]},s=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),s.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,r)=>({rule:stringifyRule(e,t.href),index:r})))})),r.styleIds.push(e)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class ProcessedNodeManager{constructor(){__publicField(this,"nodeMap",new WeakMap),__publicField(this,"active",!1)}inOtherBuffer(e,t){const r=this.nodeMap.get(e);return r&&Array.from(r).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let wrappedEmit,takeFullSnapshot$1,canvasManager,recording=!1;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(_a=e.contentWindow)?void 0:_a.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const mirror=createMirror$2();function record(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:s,blockClass:o="rr-block",blockSelector:n=null,ignoreClass:i="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:d,maskInputOptions:h,slimDOMOptions:p,maskInputFn:m,maskTextFn:f,hooks:g,packFn:y,sampling:S={},dataURLOptions:b={},mousemoveWait:v,recordDOM:$=!0,recordCanvas:w=!1,recordCrossOriginIframes:C=!1,recordAfter:E=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:I=!1,inlineImages:N=!1,plugins:T,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:x=new Set([]),errorHandler:_}=e;registerErrorHandler(_);const A=!C||window.parent===window;let O=!1;if(!A)try{window.parent.document&&(O=!1)}catch(e){O=!0}if(A&&!t)throw new Error("emit function is required");if(!A&&!O)return()=>{};void 0!==v&&void 0===S.mousemove&&(S.mousemove=v),mirror.reset();const k=!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==h?h:{password:!0},D=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p,headTitleMutations:"all"===p}:p||{};let L;polyfill$1();let F=0;const P=e=>{for(const t of T||[])t.eventProcessor&&(e=t.eventProcessor(e));return y&&!O&&(e=y(e)),e};wrappedEmit=(e,o)=>{var n;const i=e;if(i.timestamp=nowTimestamp(),!(null==(n=mutationBuffers[0])?void 0:n.isFrozen())||i.type===EventType.FullSnapshot||i.type===EventType.IncrementalSnapshot&&i.data.source===IncrementalSource.Mutation||mutationBuffers.forEach((e=>e.unfreeze())),A)null==t||t(P(i),o);else if(O){const e={type:"rrweb",event:P(i),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(i.type===EventType.FullSnapshot)L=i,F=0;else if(i.type===EventType.IncrementalSnapshot){if(i.data.source===IncrementalSource.Mutation&&i.data.isAttachIframe)return;F++;const e=s&&F>=s,t=r&&i.timestamp-L.timestamp>r;(e||t)&&takeFullSnapshot$1(!0)}};const B=e=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,...e}})},U=e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Scroll,...e}}),W=e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CanvasMutation,...e}}),z=new StylesheetManager({mutationCb:B,adoptedStyleSheetCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.AdoptedStyleSheet,...e}})}),G=new IframeManager({mirror:mirror,mutationCb:B,stylesheetManager:z,recordCrossOriginIframes:C,wrappedEmit:wrappedEmit});for(const e of T||[])e.getMirror&&e.getMirror({nodeMirror:mirror,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});const V=new ProcessedNodeManager;canvasManager=new CanvasManager({recordCanvas:w,mutationCb:W,win:window,blockClass:o,blockSelector:n,mirror:mirror,sampling:S.canvas,dataURLOptions:b});const j=new ShadowDomManager({mutationCb:B,scrollCb:U,bypassOptions:{blockClass:o,blockSelector:n,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:k,dataURLOptions:b,maskTextFn:f,maskInputFn:m,recordCanvas:w,inlineImages:N,sampling:S,slimDOMOptions:D,iframeManager:G,stylesheetManager:z,canvasManager:canvasManager,keepIframeSrcFn:M,processedNodeManager:V},mirror:mirror});takeFullSnapshot$1=(e=!1)=>{if(!$)return;wrappedEmit({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},e),z.reset(),j.init(),mutationBuffers.forEach((e=>e.lock()));const t=snapshot(document,{mirror:mirror,blockClass:o,blockSelector:n,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:k,maskTextFn:f,maskInputFn:m,slimDOM:D,dataURLOptions:b,recordCanvas:w,inlineImages:N,onSerialize:e=>{isSerializedIframe(e,mirror)&&G.addIframe(e),isSerializedStylesheet(e,mirror)&&z.trackLinkElement(e),hasShadowRoot(e)&&j.addShadowRoot(index.shadowRoot(e),document)},onIframeLoad:(e,t)=>{G.attachIframe(e,t),j.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{z.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");wrappedEmit({type:EventType.FullSnapshot,data:{node:t,initialOffset:getWindowScroll(window)}},e),mutationBuffers.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&z.adoptStyleSheets(document.adoptedStyleSheets,mirror.getId(document))};try{const e=[],t=e=>{var t;return callbackWrapper(initObservers)({mutationCb:B,mousemoveCb:(e,t)=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MouseInteraction,...e}}),scrollCb:U,viewportResizeCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.ViewportResize,...e}}),inputCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Input,...e}}),mediaInteractionCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MediaInteraction,...e}}),styleSheetRuleCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleSheetRule,...e}}),styleDeclarationCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleDeclaration,...e}}),canvasMutationCb:W,fontCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Font,...e}}),selectionCb:e=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Selection,...e}})},customElementCb:e=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CustomElement,...e}})},blockClass:o,ignoreClass:i,ignoreSelector:a,maskTextClass:l,maskTextSelector:c,maskInputOptions:k,inlineStylesheet:u,sampling:S,recordDOM:$,recordCanvas:w,inlineImages:N,userTriggeredOnInput:R,collectFonts:I,doc:e,maskInputFn:m,maskTextFn:f,keepIframeSrcFn:M,blockSelector:n,slimDOMOptions:D,dataURLOptions:b,mirror:mirror,iframeManager:G,stylesheetManager:z,shadowDomManager:j,processedNodeManager:V,canvasManager:canvasManager,ignoreCSSAttributes:x,plugins:(null==(t=null==T?void 0:T.filter((e=>e.observer)))?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>wrappedEmit({type:EventType.Plugin,data:{plugin:e.name,payload:t}})}))))||[]},g)};G.addLoadListener((r=>{try{e.push(t(r.contentDocument))}catch(e){console.warn(e)}}));const r=()=>{takeFullSnapshot$1(),e.push(t(document)),recording=!0};return"interactive"===document.readyState||"complete"===document.readyState?r():(e.push(on("DOMContentLoaded",(()=>{wrappedEmit({type:EventType.DomContentLoaded,data:{}}),"DOMContentLoaded"===E&&r()}))),e.push(on("load",(()=>{wrappedEmit({type:EventType.Load,data:{}}),"load"===E&&r()}),window))),()=>{e.forEach((e=>e())),V.destroy(),recording=!1,unregisterErrorHandler()}}catch(e){console.warn(e)}}function mitt$1(e){return{all:e=e||new Map,on:function(t,r){var s=e.get(t);s?s.push(r):e.set(t,[r])},off:function(t,r){var s=e.get(t);s&&(r?s.splice(s.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var s=e.get(t);s&&s.slice().map((function(e){e(r)})),(s=e.get("*"))&&s.slice().map((function(e){e(t,r)}))}}}record.addCustomEvent=(e,t)=>{if(!recording)throw new Error("please add custom event after start recording");wrappedEmit({type:EventType.Custom,data:{tag:e,payload:t}})},record.freezePage=()=>{mutationBuffers.forEach((e=>e.freeze()))},record.takeFullSnapshot=e=>{if(!recording)throw new Error("please take full snapshot after start recording");takeFullSnapshot$1(e)},record.mirror=mirror;const mittProxy=Object.freeze(Object.defineProperty({__proto__:null,default:mitt$1},Symbol.toStringTag,{value:"Module"}));function polyfill(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const r=e.HTMLElement||e.Element,s={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||a,scrollIntoView:r.prototype.scrollIntoView},o=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;const n=(i=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);var i;function a(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+n<e.scrollHeight:"X"===t?e.clientWidth+n<e.scrollWidth:void 0}function u(t,r){const s=e.getComputedStyle(t,null)["overflow"+r];return"auto"===s||"scroll"===s}function d(e){const t=c(e,"Y")&&u(e,"Y"),r=c(e,"X")&&u(e,"X");return t||r}function h(t){let r,s,n,i=(o()-t.startTime)/468;var a;i=i>1?1:i,a=i,r=.5*(1-Math.cos(Math.PI*a)),s=t.startX+(t.x-t.startX)*r,n=t.startY+(t.y-t.startY)*r,t.method.call(t.scrollable,s,n),s===t.x&&n===t.y||e.requestAnimationFrame(h.bind(e,t))}function p(r,n,i){let l,c,u,d;const p=o();r===t.body?(l=e,c=e.scrollX||e.pageXOffset,u=e.scrollY||e.pageYOffset,d=s.scroll):(l=r,c=r.scrollLeft,u=r.scrollTop,d=a),h({scrollable:l,method:d,startTime:p,startX:c,startY:u,x:n,y:i})}e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?p.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):s.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?s.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):p.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;p.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void s.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const r=function(e){for(;e!==t.body&&!1===d(e);)e=e.parentNode||e.host;return e}(this),o=r.getBoundingClientRect(),n=this.getBoundingClientRect();r!==t.body?(p.call(this,r,r.scrollLeft+n.left-o.left,r.scrollTop+n.top-o.top),"fixed"!==e.getComputedStyle(r).position&&e.scrollBy({left:o.left,top:o.top,behavior:"smooth"})):e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})}}class Timer{constructor(e=[],t){__publicField(this,"timeOffset",0),__publicField(this,"speed"),__publicField(this,"actions"),__publicField(this,"raf",null),__publicField(this,"lastTimestamp"),this.actions=e,this.speed=t.speed}addAction(e){const t=!0===this.raf;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const t=this.findActionIndex(e);this.actions.splice(t,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(!0!==this.raf&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,r=this.actions.length-1;for(;t<=r;){const s=Math.floor((t+r)/2);if(this.actions[s].delay<e.delay)t=s+1;else{if(!(this.actions[s].delay>e.delay))return s+1;r=s-1}}return t}}function addDelay(e,t){if(e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.MouseMove&&e.data.positions&&e.data.positions.length){const r=e.data.positions[0].timeOffset,s=e.timestamp+r;return e.delay=s-t,s-t}return e.delay=e.timestamp-t,e.delay}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function t(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,o,n=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(e){o={error:e}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}var n;!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(n||(n={}));var e={type:"xstate.init"};function r(e){return void 0===e?[]:[].concat(e)}function o(e){return{type:"xstate.assign",assignment:e}}function i(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function a(e){return function(t){return e===t}}function u(e){return"string"==typeof e?{type:e}:e}function c(e,t){return{value:e,context:t,actions:[],changed:!1,matches:a(e)}}function f(e,t,r){var s=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},s);return"function"==typeof e.assignment?t=e.assignment(s,r):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](s,r):e.assignment[o]})),s=t,!1}return!0})),s,o]}function s(s,o){void 0===o&&(o={});var n=t(f(r(s.states[s.initial].entry).map((function(e){return i(e,o.actions)})),s.context,e),2),l=n[0],d=n[1],h={config:s,_options:o,initialState:{value:s.initial,actions:l,context:d,matches:a(s.initial)},transition:function(e,o){var n,l,d="string"==typeof e?{value:e,context:s.context}:e,p=d.value,m=d.context,g=u(o),y=s.states[p];if(y.on){var S=r(y.on[g.type]);try{for(var b=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(S),v=b.next();!v.done;v=b.next()){var $=v.value;if(void 0===$)return c(p,m);var w="string"==typeof $?{target:$}:$,C=w.target,E=w.actions,R=void 0===E?[]:E,I=w.cond,N=void 0===I?function(){return!0}:I,T=void 0===C,M=null!=C?C:p,x=s.states[M];if(N(m,g)){var _=t(f((T?r(R):[].concat(y.exit,R,x.entry).filter((function(e){return e}))).map((function(e){return i(e,h._options.actions)})),m,g),3),A=_[0],O=_[1],k=_[2],D=null!=C?C:p;return{value:D,context:O,actions:A,changed:C!==p||A.length>0||k,matches:a(D)}}}}catch(e){n={error:e}}finally{try{v&&!v.done&&(l=b.return)&&l.call(b)}finally{if(n)throw n.error}}}return c(p,m)}};return h}var l=function(e,t){return e.actions.forEach((function(r){var s=r.exec;return s&&s(e.context,t)}))};function v(t){var r=t.initialState,s=n.NotStarted,o=new Set,i={_machine:t,send:function(e){s===n.Running&&(r=t.transition(r,e),l(r,u(e)),o.forEach((function(e){return e(r)})))},subscribe:function(e){return o.add(e),e(r),{unsubscribe:function(){return o.delete(e)}}},start:function(o){if(o){var c="object"==typeof o?o:{context:t.config.context,value:o};r={value:c.value,actions:[],context:c.context,matches:a(c.value)}}return s=n.Running,l(r,e),i},stop:function(){return s=n.Stopped,o.clear(),i},get state(){return r},get status(){return s}};return i}function discardPriorSnapshots(e,t){for(let r=e.length-1;r>=0;r--){const s=e[r];if(s.type===EventType.Meta&&s.timestamp<=t)return e.slice(r)}return e}function createPlayerService(e,{getCastFn:t,applyEventsSynchronously:r,emitter:n}){return v(s({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:o({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:o(((e,t)=>{let r=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(r=t.payload.timeOffset),{...e,timeOffset:r,baselineTime:e.events[0].timestamp+r}})),play(e){var s;const{timer:o,events:i,baselineTime:a,lastPlayedEvent:l}=e;o.clear();for(const e of i)addDelay(e,a);const c=discardPriorSnapshots(i,a);let u=null==l?void 0:l.timestamp;(null==l?void 0:l.type)===EventType.IncrementalSnapshot&&l.data.source===IncrementalSource.MouseMove&&(u=l.timestamp+(null==(s=l.data.positions[0])?void 0:s.timeOffset)),a<(u||0)&&n.emit(ReplayerEvents.PlayBack);const d=new Array;for(const e of c)if(!(u&&u<a&&(e.timestamp<=u||e===l)))if(e.timestamp<a)d.push(e);else{const r=t(e,!1);o.addAction({doAction:()=>{r()},delay:e.delay})}r(d),n.emit(ReplayerEvents.Flush),o.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:o((e=>({...e,lastPlayedEvent:null}))),startLive:o({baselineTime:(e,t)=>(e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:o(((e,r)=>{const{baselineTime:s,timer:o,events:n}=e;if("ADD_EVENT"===r.type){const{event:e}=r.payload;addDelay(e,s);let i=n.length-1;if(!n[i]||n[i].timestamp<=e.timestamp)n.push(e);else{let t=-1,r=0;for(;r<=i;){const t=Math.floor((r+i)/2);n[t].timestamp<=e.timestamp?r=t+1:i=t-1}-1===t&&(t=r),n.splice(t,0,e)}const a=e.timestamp<s,l=t(e,a);a?l():o.isActive()&&o.addAction({doAction:()=>{l()},delay:e.delay})}return{...e,events:n}}))}}))}function createSpeedService(e){return v(s({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:o({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}}))}const rules=e=>[`.${e} { background: currentColor }`,"noscript { display: none !important; }"],webGLVarMap=new Map;function variableListFor(e,t){let r=webGLVarMap.get(e);return r||(r=new Map,webGLVarMap.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}function deserializeArg(e,t,r){return async s=>{if(s&&"object"==typeof s&&"rr_type"in s){if(r&&(r.isUnchanged=!1),"ImageBitmap"===s.rr_type&&"args"in s){const o=await deserializeArg(e,t,r)(s.args);return await createImageBitmap.apply(null,o)}if("index"in s){if(r||null===t)return s;const{rr_type:e,index:o}=s;return variableListFor(t,e)[o]}if("args"in s){const{rr_type:o,args:n}=s;return new(0,window[o])(...await Promise.all(n.map(deserializeArg(e,t,r))))}if("base64"in s)return decode(s.base64);if("src"in s){const t=e.get(s.src);if(t)return t;{const t=new Image;return t.src=s.src,e.set(s.src,t),t}}if("data"in s&&"Blob"===s.rr_type){const o=await Promise.all(s.data.map(deserializeArg(e,t,r)));return new Blob(o,{type:s.type})}}else if(Array.isArray(s)){return await Promise.all(s.map(deserializeArg(e,t,r)))}return s}}function getContext(e,t){try{return t===CanvasContext.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}const WebGLVariableConstructorsNames=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function saveToWebGLVarMap(e,t){if(!(null==t?void 0:t.constructor))return;const{name:r}=t.constructor;if(!WebGLVariableConstructorsNames.includes(r))return;const s=variableListFor(e,r);s.includes(t)||s.push(t)}async function webglMutation({mutation:e,target:t,type:r,imageMap:s,errorHandler:o}){try{const o=getContext(t,r);if(!o)return;if(e.setter)return void(o[e.property]=e.args[0]);const n=o[e.property],i=await Promise.all(e.args.map(deserializeArg(s,o)));saveToWebGLVarMap(o,n.apply(o,i))}catch(t){o(e,t)}}async function canvasMutation$1({event:e,mutations:t,target:r,imageMap:s,errorHandler:o}){const n=r.getContext("2d");if(!n)return void o(t[0],new Error("Canvas context is null"));const i=t.map((async e=>Promise.all(e.args.map(deserializeArg(s,n)))));(await Promise.all(i)).forEach(((r,i)=>{const a=t[i];try{if(a.setter)return void(n[a.property]=a.args[0]);const t=n[a.property];"drawImage"===a.property&&"string"==typeof a.args[0]?(s.get(e),t.apply(n,a.args)):t.apply(n,r)}catch(e){o(a,e)}}))}async function canvasMutation({event:e,mutation:t,target:r,imageMap:s,canvasEventMap:o,errorHandler:n}){try{const i=o.get(e)||t,a="commands"in i?i.commands:[i];if([CanvasContext.WebGL,CanvasContext.WebGL2].includes(t.type)){for(let e=0;e<a.length;e++){const o=a[e];await webglMutation({mutation:o,type:t.type,target:r,imageMap:s,errorHandler:n})}return}await canvasMutation$1({event:e,mutations:a,target:r,imageMap:s,errorHandler:n})}catch(e){n(t,e)}}class MediaManager{constructor(e){__publicField(this,"mediaMap",new Map),__publicField(this,"warn"),__publicField(this,"service"),__publicField(this,"speedService"),__publicField(this,"emitter"),__publicField(this,"getCurrentTime"),__publicField(this,"metadataCallbackMap",new Map),this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(ReplayerEvents.Start,this.start.bind(this)),this.emitter.on(ReplayerEvents.SkipStart,this.start.bind(this)),this.emitter.on(ReplayerEvents.Pause,this.pause.bind(this)),this.emitter.on(ReplayerEvents.Finish,this.pause.bind(this)),this.speedService.subscribe((()=>{this.syncAllMediaElements()}))}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach(((t,r)=>{this.syncTargetWithState(r),e.pause&&r.pause()}))}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:r}){if(r.isPlaying){const s=(e-r.lastInteractionTimeOffset)/1e3*r.playbackRate,o="duration"in t&&t.duration;if(Number.isNaN(o))return void this.waitForMetadata(t);let n=r.currentTimeAtLastInteraction+s;t.loop&&!1!==o&&(n%=o),t.currentTime=n}else t.pause(),t.currentTime=r.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e))return;if(!("addEventListener"in e))return;const t=()=>{this.metadataCallbackMap.delete(e);const t=this.mediaMap.get(e);t&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t})};this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:r}){const s=this.mediaMap.get(e),{type:o,playbackRate:n,currentTime:i,muted:a,volume:l,loop:c}=r;return{isPlaying:o===MediaInteractions.Play||o!==MediaInteractions.Pause&&((null==s?void 0:s.isPlaying)||null!==e.getAttribute("autoplay")),currentTimeAtLastInteraction:i??(null==s?void 0:s.currentTimeAtLastInteraction)??0,lastInteractionTimeOffset:t,playbackRate:n??(null==s?void 0:s.playbackRate)??1,volume:l??(null==s?void 0:s.volume)??1,muted:a??(null==s?void 0:s.muted)??null===e.getAttribute("muted"),loop:c??(null==s?void 0:s.loop)??null===e.getAttribute("loop")}}syncTargetWithState(e){const t=this.mediaMap.get(e);if(!t)return;const{muted:r,loop:s,volume:o,isPlaying:n}=t,i=this.service.state.matches("paused"),a=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==o&&(e.volume=o),e.muted=r,e.loop=s,e.playbackRate!==a&&(e.playbackRate=a),n&&!i?e.play():e.pause()}catch(e){this.warn(`Failed to replay media interactions: ${e.message||e}`)}}addMediaElements(e,t,r){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;const s=e,o=r.getMeta(s);if(!o||!("attributes"in o))return;const n=this.service.state.matches("paused"),i=o.attributes;let a=!1;a=i.rr_mediaState?"played"===i.rr_mediaState:null!==s.getAttribute("autoplay"),a&&n&&s.pause();let l=1;"number"==typeof i.rr_mediaPlaybackRate&&(l=i.rr_mediaPlaybackRate);let c=!1;c="boolean"==typeof i.rr_mediaMuted?i.rr_mediaMuted:null!==s.getAttribute("muted");let u=!1;u="boolean"==typeof i.rr_mediaLoop?i.rr_mediaLoop:null!==s.getAttribute("loop");let d=1;"number"==typeof i.rr_mediaVolume&&(d=i.rr_mediaVolume);let h=0;"number"==typeof i.rr_mediaCurrentTime&&(h=i.rr_mediaCurrentTime),this.mediaMap.set(s,{isPlaying:a,currentTimeAtLastInteraction:h,lastInteractionTimeOffset:t,playbackRate:l,volume:d,muted:c,loop:u}),this.syncTargetWithState(s)}mediaMutation({target:e,timeOffset:t,mutation:r}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:r})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}}function applyDialogToTopLevel(e,t){if("DIALOG"!==e.nodeName||e instanceof BaseRRNode)return;const r=e,s=r.open,o=s&&r.matches("dialog:modal"),n=r.getAttribute("rr_open_mode"),i="string"==typeof(null==t?void 0:t.attributes.open)||"string"==typeof r.getAttribute("open"),a="modal"===n;s&&!(o&&"non-modal"===n||!o&&a)||(r.isConnected?(s&&r.close(),i&&(a?r.showModal():r.show())):console.warn("dialog is not attached to the dom",r))}function removeDialogFromTopLevel(e,t){if("DIALOG"!==e.nodeName||e instanceof BaseRRNode)return;const r=e;r.isConnected?null===t.attributes.open&&(r.removeAttribute("open"),r.removeAttribute("rr_open_mode")):console.warn("dialog is not attached to the dom",r)}const SKIP_TIME_INTERVAL=5e3,mitt=mitt$1||mittProxy,REPLAY_CONSOLE_PREFIX="[replayer]",defaultMouseTailConfig={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function indicatesTouchDevice(e){return e.type==EventType.IncrementalSnapshot&&(e.data.source==IncrementalSource.TouchMove||e.data.source==IncrementalSource.MouseInteraction&&e.data.type==MouseInteractions.TouchStart)}class Replayer{constructor(e,t){if(__publicField(this,"wrapper"),__publicField(this,"iframe"),__publicField(this,"service"),__publicField(this,"speedService"),__publicField(this,"config"),__publicField(this,"usingVirtualDom",!1),__publicField(this,"virtualDom",new RRDocument),__publicField(this,"mouse"),__publicField(this,"mouseTail",null),__publicField(this,"tailPositions",[]),__publicField(this,"emitter",mitt()),__publicField(this,"nextUserInteractionEvent"),__publicField(this,"legacy_missingNodeRetryMap",{}),__publicField(this,"cache",createCache()),__publicField(this,"imageMap",new Map),__publicField(this,"canvasEventMap",new Map),__publicField(this,"mirror",createMirror$2()),__publicField(this,"styleMirror",new StyleSheetMirror),__publicField(this,"mediaManager"),__publicField(this,"firstFullSnapshot",null),__publicField(this,"newDocumentQueue",[]),__publicField(this,"mousePos",null),__publicField(this,"touchActive",null),__publicField(this,"lastMouseDownEvent",null),__publicField(this,"lastHoveredRootNode"),__publicField(this,"lastSelectionData",null),__publicField(this,"constructedStyleMutations",[]),__publicField(this,"adoptedStyleSheets",[]),__publicField(this,"handleResize",(e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])t&&(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))})),__publicField(this,"applyEventsSynchronously",(e=>{for(const t of e){switch(t.type){case EventType.DomContentLoaded:case EventType.Load:case EventType.Custom:continue;case EventType.FullSnapshot:case EventType.Meta:case EventType.Plugin:case EventType.IncrementalSnapshot:}this.getCastFn(t,!0)()}})),__publicField(this,"getCastFn",((e,t=!1)=>{let r;switch(e.type){case EventType.DomContentLoaded:case EventType.Load:break;case EventType.Custom:r=()=>{this.emitter.emit(ReplayerEvents.CustomEvent,e)};break;case EventType.Meta:r=()=>this.emitter.emit(ReplayerEvents.Resize,{width:e.data.width,height:e.data.height});break;case EventType.FullSnapshot:r=()=>{var r;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(e,t),null==(r=this.iframe.contentWindow)||r.scrollTo(e.data.initialOffset)};break;case EventType.IncrementalSnapshot:r=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,r={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:r}),this.emitter.emit(ReplayerEvents.SkipStart,r)}}}}return()=>{r&&r();for(const r of this.config.plugins||[])r.handler&&r.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const s=this.service.state.context.events.length-1;if(!this.config.liveMode&&e===this.service.state.context.events[s]){const t=()=>{s<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(ReplayerEvents.Finish))};let r=50;e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.MouseMove&&e.data.positions.length&&(r+=Math.max(0,-e.data.positions[0].timeOffset)),setTimeout(t,r)}this.emitter.emit(ReplayerEvents.EventCast,e)}})),!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:1e4,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:defaultMouseTailConfig,useVirtualDom:!0,logger:console};this.config=Object.assign({},r,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(ReplayerEvents.Resize,this.handleResize),this.setupDom();for(const e of this.config.plugins||[])e.getMirror&&e.getMirror({nodeMirror:this.mirror});this.emitter.on(ReplayerEvents.Flush,(()=>{if(this.usingVirtualDom){const e={mirror:this.mirror,applyCanvas:(e,t,r)=>{canvasMutation({event:e,mutation:t,target:r,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===IncrementalSource.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===IncrementalSource.StyleDeclaration&&this.applyStyleDeclaration(e,t)},afterAppend:(e,t)=>{for(const r of this.config.plugins||[])r.onBuild&&r.onBuild(e,{id:t,replayer:this})}};if(this.iframe.contentDocument)try{diff(this.iframe.contentDocument,this.virtualDom,e,this.virtualDom.mirror)}catch(e){console.warn(e)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const t in this.legacy_missingNodeRetryMap)try{const r=this.legacy_missingNodeRetryMap[t],s=createOrGetNode(r.node,this.mirror,this.virtualDom.mirror);diff(s,r.node,e,this.virtualDom.mirror),r.node=s}catch(e){this.warn(e)}this.constructedStyleMutations.forEach((e=>{this.applyStyleSheetMutation(e)})),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach((e=>{this.applyAdoptedStyleSheet(e)})),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[e,t]=this.lastMouseDownEvent;e.dispatchEvent(t)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)})),this.emitter.on(ReplayerEvents.PlayBack,(()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()}));const s=new Timer([],{speed:this.config.speed});this.service=createPlayerService({events:e.map((e=>t&&t.unpackFn?t.unpackFn(e):e)).sort(((e,t)=>e.timestamp-t.timestamp)),timer:s,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((e=>{this.emitter.emit(ReplayerEvents.StateChange,{player:e})})),this.speedService=createSpeedService({normalSpeed:-1,timer:s}),this.speedService.start(),this.speedService.subscribe((e=>{this.emitter.emit(ReplayerEvents.StateChange,{speed:e})})),this.mediaManager=new MediaManager({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});const o=this.service.state.context.events.find((e=>e.type===EventType.Meta)),n=this.service.state.context.events.find((e=>e.type===EventType.FullSnapshot));if(o){const{width:e,height:t}=o.data;setTimeout((()=>{this.emitter.emit(ReplayerEvents.Resize,{width:e,height:t})}),0)}n&&setTimeout((()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=n,this.rebuildFullSnapshot(n),null==(e=this.iframe.contentWindow)||e.scrollTo(n.data.initialOffset))}),1),this.service.state.context.events.find(indicatesTouchDevice)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach((t=>{e[t],this.config[t]=e[t]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,r;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null==(r=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||r.classList.remove("rrweb-paused"),this.emitter.emit(ReplayerEvents.Start)}pause(e){var t,r;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null==(r=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||r.classList.add("rrweb-paused"),this.emitter.emit(ReplayerEvents.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(ReplayerEvents.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(ReplayerEvents.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;indicatesTouchDevice(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((()=>this.service.send({type:"ADD_EVENT",payload:{event:t}})))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=createCache()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(polyfill(this.iframe.contentWindow,this.iframe.contentDocument),polyfill$1(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const r=[],s=new Set,o=(t,o)=>{if("DIALOG"===t.nodeName&&s.add(t),this.collectIframeAndAttachDocument(r,t),this.mediaManager.isSupportedMediaElement(t)){const{events:r}=this.service.state.context;this.mediaManager.addMediaElements(t,e.timestamp-r[0].timestamp,this.mirror)}for(const e of this.config.plugins||[])e.onBuild&&e.onBuild(t,{id:o,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),rebuild(e.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:e,builtNode:t}of r)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));const{documentElement:n,head:i}=this.iframe.contentDocument;this.insertStyleRules(n,i),s.forEach((e=>applyDialogToTopLevel(e))),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var r;const s=rules(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&s.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),s.length)if(this.usingVirtualDom){const r=this.virtualDom.createElement("style");this.virtualDom.mirror.add(r,getDefaultSN(r,this.virtualDom.unserializedId)),e.insertBefore(r,t),r.rules.push({source:IncrementalSource.StyleSheetRule,adds:s.map(((e,t)=>({rule:e,index:t})))})}else{const o=document.createElement("style");e.insertBefore(o,t);for(let e=0;e<s.length;e++)null==(r=o.sheet)||r.insertRule(s[e],e)}}attachDocumentToIframe(e,t){const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,s=[],o=new Set,n=(e,n)=>{"DIALOG"===e.nodeName&&o.add(e),this.collectIframeAndAttachDocument(s,e);const i=r.getMeta(e);if((null==i?void 0:i.type)===NodeType.Element&&"HTML"===(null==i?void 0:i.tagName.toUpperCase())){const{documentElement:e,head:r}=t.contentDocument;this.insertStyleRules(e,r)}if(!this.usingVirtualDom)for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:n,replayer:this})};buildNodeWithSN(e.node,{doc:t.contentDocument,mirror:r,hackCss:!0,skipChild:!1,afterAppend:n,cache:this.cache}),n(t.contentDocument,e.node.id);for(const{mutationInQueue:e,builtNode:t}of s)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));o.forEach((e=>applyDialogToTopLevel(e)))}collectIframeAndAttachDocument(e,t){if(isSerializedIframe(t,this.mirror)){const r=this.newDocumentQueue.find((e=>e.parentId===this.mirror.getId(t)));r&&e.push({mutationInQueue:r,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null==(e=this.iframe.contentDocument)?void 0:e.head;if(t){const e=new Set;let r,s=this.service.state;const o=()=>{s=this.service.state};this.emitter.on(ReplayerEvents.Start,o),this.emitter.on(ReplayerEvents.Pause,o);const n=()=>{this.emitter.off(ReplayerEvents.Start,o),this.emitter.off(ReplayerEvents.Pause,o)};t.querySelectorAll('link[rel="stylesheet"]').forEach((t=>{t.sheet||(e.add(t),t.addEventListener("load",(()=>{e.delete(t),0===e.size&&-1!==r&&(s.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(ReplayerEvents.LoadStylesheetEnd),r&&clearTimeout(r),n())})))})),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(ReplayerEvents.LoadStylesheetStart),r=setTimeout((()=>{s.matches("playing")&&this.play(this.getCurrentTime()),r=-1,n()}),this.config.loadTimeout))}}async preloadAllImages(){const e=[];for(const t of this.service.state.context.events)if(t.type===EventType.IncrementalSnapshot&&t.data.source===IncrementalSource.CanvasMutation){e.push(this.deserializeAndPreloadCanvasEvents(t.data,t));("commands"in t.data?t.data.commands:[t.data]).forEach((e=>{this.preloadImages(e,t)}))}return Promise.all(e)}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const e=document.createElement("canvas"),t=e.getContext("2d"),r=null==t?void 0:t.createImageData(e.width,e.height);null==t||t.putImageData(r,0,0)}}async deserializeAndPreloadCanvasEvents(e,t){if(!this.canvasEventMap.has(t)){const r={isUnchanged:!0};if("commands"in e){const s=await Promise.all(e.commands.map((async e=>{const t=await Promise.all(e.args.map(deserializeArg(this.imageMap,null,r)));return{...e,args:t}})));!1===r.isUnchanged&&this.canvasEventMap.set(t,{...e,commands:s})}else{const s=await Promise.all(e.args.map(deserializeArg(this.imageMap,null,r)));!1===r.isUnchanged&&this.canvasEventMap.set(t,{...e,args:s})}}}applyIncremental(e,t){var r,s,o;const{data:n}=e;switch(n.source){case IncrementalSource.Mutation:try{this.applyMutation(n,t)}catch(e){this.warn(`Exception in mutation ${e.message||e}`,n)}break;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:if(t){const e=n.positions[n.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:n}}else n.positions.forEach((r=>{const s={doAction:()=>{this.moveAndHover(r.x,r.y,r.id,t,n)},delay:r.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(s)})),this.timer.addAction({doAction(){},delay:e.delay-(null==(r=n.positions[0])?void 0:r.timeOffset)});break;case IncrementalSource.MouseInteraction:{if(-1===n.id)break;const e=new Event(toLowerCase(MouseInteractions[n.type])),r=this.mirror.getNode(n.id);if(!r)return this.debugNodeNotFound(n,n.id);this.emitter.emit(ReplayerEvents.MouseInteraction,{type:n.type,target:r});const{triggerFocus:s}=this.config;switch(n.type){case MouseInteractions.Blur:"blur"in r&&r.blur();break;case MouseInteractions.Focus:s&&r.focus&&r.focus({preventScroll:!0});break;case MouseInteractions.Click:case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:t?(n.type===MouseInteractions.TouchStart?this.touchActive=!0:n.type===MouseInteractions.TouchEnd&&(this.touchActive=!1),n.type===MouseInteractions.MouseDown?this.lastMouseDownEvent=[r,e]:n.type===MouseInteractions.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:n.x||0,y:n.y||0,id:n.id,debugData:n}):(n.type===MouseInteractions.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(n.x||0,n.y||0,n.id,t,n),n.type===MouseInteractions.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):n.type===MouseInteractions.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):n.type===MouseInteractions.TouchEnd?this.mouse.classList.remove("touch-active"):r.dispatchEvent(e));break;case MouseInteractions.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:r.dispatchEvent(e)}break}case IncrementalSource.Scroll:if(-1===n.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(n.id);if(!e)return this.debugNodeNotFound(n,n.id);e.scrollData=n;break}this.applyScroll(n,t);break;case IncrementalSource.ViewportResize:this.emitter.emit(ReplayerEvents.Resize,{width:n.width,height:n.height});break;case IncrementalSource.Input:if(-1===n.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(n.id);if(!e)return this.debugNodeNotFound(n,n.id);e.inputData=n;break}this.applyInput(n);break;case IncrementalSource.MediaInteraction:{const t=this.usingVirtualDom?this.virtualDom.mirror.getNode(n.id):this.mirror.getNode(n.id);if(!t)return this.debugNodeNotFound(n,n.id);const r=t,{events:s}=this.service.state.context;this.mediaManager.mediaMutation({target:r,timeOffset:e.timestamp-s[0].timestamp,mutation:n});break}case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:this.usingVirtualDom?n.styleId?this.constructedStyleMutations.push(n):n.id&&(null==(s=this.virtualDom.mirror.getNode(n.id))||s.rules.push(n)):this.applyStyleSheetMutation(n);break;case IncrementalSource.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(n.id);if(!t)return this.debugNodeNotFound(n,n.id);t.canvasMutations.push({event:e,mutation:n})}else{const t=this.mirror.getNode(n.id);if(!t)return this.debugNodeNotFound(n,n.id);canvasMutation({event:e,mutation:n,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case IncrementalSource.Font:try{const e=new FontFace(n.family,n.buffer?new Uint8Array(JSON.parse(n.fontSource)):n.fontSource,n.descriptors);null==(o=this.iframe.contentDocument)||o.fonts.add(e)}catch(e){this.warn(e)}break;case IncrementalSource.Selection:if(t){this.lastSelectionData=n;break}this.applySelection(n);break;case IncrementalSource.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(n):this.applyAdoptedStyleSheet(n)}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,buildFromDom(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const t=this.legacy_missingNodeRetryMap[e],r=buildFromNode(t.node,this.virtualDom,this.mirror);r&&(t.node=r)}catch(e){this.warn(e)}const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter((t=>!!r.getNode(t.id)||(this.warnNodeNotFound(e,t.id),!1))),e.removes.forEach((t=>{var s;const o=r.getNode(t.id);if(!o)return;let n=r.getNode(t.parentId);if(!n)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&hasShadowRoot(n)&&(n=n.shadowRoot),r.removeNodeFromMap(o),n)try{n.removeChild(o),this.usingVirtualDom&&"#text"===o.nodeName&&"STYLE"===n.nodeName&&(null==(s=n.rules)?void 0:s.length)>0&&(n.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",n,o,e)}}));const s={...this.legacy_missingNodeRetryMap},o=[],n=e=>{var t,n;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let i=r.getNode(e.parentId);if(!i)return e.node.type===NodeType.Document?this.newDocumentQueue.push(e):o.push(e);e.node.isShadow&&(hasShadowRoot(i)||i.attachShadow({mode:"open"}),i=i.shadowRoot);let a=null,l=null;if(e.previousId&&(a=r.getNode(e.previousId)),e.nextId&&(l=r.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=r.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return o.push(e);if(e.node.rootId&&!r.getNode(e.node.rootId))return;const c=e.node.rootId?r.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(isSerializedIframe(i,r))return void this.attachDocumentToIframe(e,i);const u=(e,t)=>{if(!this.usingVirtualDom){applyDialogToTopLevel(e);for(const r of this.config.plugins||[])r.onBuild&&r.onBuild(e,{id:t,replayer:this})}},d=buildNodeWithSN(e.node,{doc:c,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:u});if(-1===e.previousId||-1===e.nextId)return void(s[e.node.id]={node:d,mutation:e});const h=r.getMeta(i);if(h&&h.type===NodeType.Element&&e.node.type===NodeType.Text){const e=Array.isArray(i.childNodes)?i.childNodes:Array.from(i.childNodes);if("textarea"===h.tagName)for(const t of e)t.nodeType===i.TEXT_NODE&&i.removeChild(t);else if("style"===h.tagName&&1===e.length)for(const t of e)t.nodeType!==i.TEXT_NODE||r.hasNode(t)||(d.textContent=t.textContent,i.removeChild(t))}else if((null==h?void 0:h.type)===NodeType.Document){const r=i;e.node.type===NodeType.DocumentType&&(null==(t=r.childNodes[0])?void 0:t.nodeType)===Node.DOCUMENT_TYPE_NODE&&r.removeChild(r.childNodes[0]),"HTML"===d.nodeName&&r.documentElement&&r.removeChild(r.documentElement)}if(a&&a.nextSibling&&a.nextSibling.parentNode?i.insertBefore(d,a.nextSibling):l&&l.parentNode?i.contains(l)?i.insertBefore(d,l):i.insertBefore(d,null):i.appendChild(d),u(d,e.node.id),this.usingVirtualDom&&"#text"===d.nodeName&&"STYLE"===i.nodeName&&(null==(n=i.rules)?void 0:n.length)>0&&(i.rules=[]),isSerializedIframe(d,this.mirror)){const e=this.mirror.getId(d),t=this.newDocumentQueue.find((t=>t.parentId===e));t&&(this.attachDocumentToIframe(t,d),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==t)))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(s,i,d,e)};e.adds.forEach((e=>{n(e)}));const i=Date.now();for(;o.length;){const e=queueToResolveTrees(o);if(o.length=0,Date.now()-i>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e){r.getNode(t.value.parentId)?iterateResolveTree(t,(e=>{n(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",t)}}Object.keys(s).length&&Object.assign(this.legacy_missingNodeRetryMap,s),uniqueTextMutations(e.texts).forEach((t=>{var s;const o=r.getNode(t.id);if(!o){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}const n=o.parentElement;if(t.value&&n&&"STYLE"===n.tagName?o.textContent=adaptCssForReplay(t.value,this.cache):o.textContent=t.value,this.usingVirtualDom){const e=o.parentNode;(null==(s=null==e?void 0:e.rules)?void 0:s.length)>0&&(e.rules=[])}})),e.attributes.forEach((t=>{var s;const o=r.getNode(t.id);if(!o){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}for(const e in t.attributes)if("string"==typeof e){const n=t.attributes[e];if(null===n)o.removeAttribute(e),"open"===e&&removeDialogFromTopLevel(o,t);else if("string"==typeof n)try{if("_cssText"===e&&("LINK"===o.nodeName||"STYLE"===o.nodeName))try{const e=r.getMeta(o);Object.assign(e.attributes,t.attributes);const s=buildNodeWithSN(e,{doc:o.ownerDocument,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache}),n=o.nextSibling,i=o.parentNode;if(s&&i){i.removeChild(o),i.insertBefore(s,n),r.replace(t.id,s);break}}catch(e){}if("value"===e&&"TEXTAREA"===o.nodeName){const e=o;e.childNodes.forEach((t=>e.removeChild(t)));const t=null==(s=o.ownerDocument)?void 0:s.createTextNode(n);t&&e.appendChild(t)}else o.setAttribute(e,n);"rr_open_mode"===e&&"DIALOG"===o.nodeName&&applyDialogToTopLevel(o,t)}catch(e){this.warn("An error occurred may due to the checkout feature.",e)}else if("style"===e){const e=n,t=o;for(const r in e)if(!1===e[r])t.style.removeProperty(r);else if(e[r]instanceof Array){const s=e[r];t.style.setProperty(r,s[0],s[1])}else{const s=e[r];t.style.setProperty(r,s)}}}}))}applyScroll(e,t){var r,s;const o=this.mirror.getNode(e.id);if(!o)return this.debugNodeNotFound(e,e.id);const n=this.mirror.getMeta(o);if(o===this.iframe.contentDocument)null==(r=this.iframe.contentWindow)||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((null==n?void 0:n.type)===NodeType.Document)null==(s=o.defaultView)||s.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{o.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(e){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}}applySelection(e){try{const t=new Set,r=e.ranges.map((({start:e,startOffset:r,end:s,endOffset:o})=>{const n=this.mirror.getNode(e),i=this.mirror.getNode(s);if(!n||!i)return;const a=new Range;a.setStart(n,r),a.setEnd(i,o);const l=n.ownerDocument,c=null==l?void 0:l.getSelection();return c&&t.add(c),{range:a,selection:c}}));t.forEach((e=>e.removeAllRanges())),r.forEach((e=>{var t;return e&&(null==(t=e.selection)?void 0:t.addRange(e.range))}))}catch(e){}}applyStyleSheetMutation(e){var t;let r=null;e.styleId?r=this.styleMirror.getStyle(e.styleId):e.id&&(r=(null==(t=this.mirror.getNode(e.id))?void 0:t.sheet)||null),r&&(e.source===IncrementalSource.StyleSheetRule?this.applyStyleSheetRule(e,r):e.source===IncrementalSource.StyleDeclaration&&this.applyStyleDeclaration(e,r))}applyStyleSheetRule(e,t){var r,s,o,n;if(null==(r=e.adds)||r.forEach((({rule:e,index:r})=>{try{if(Array.isArray(r)){const{positions:s,index:o}=getPositionsAndIndex(r);getNestedRule(t.cssRules,s).insertRule(e,o)}else{const s=void 0===r?void 0:Math.min(r,t.cssRules.length);null==t||t.insertRule(e,s)}}catch(e){}})),null==(s=e.removes)||s.forEach((({index:e})=>{try{if(Array.isArray(e)){const{positions:r,index:s}=getPositionsAndIndex(e);getNestedRule(t.cssRules,r).deleteRule(s||0)}else null==t||t.deleteRule(e)}catch(e){}})),e.replace)try{null==(o=t.replace)||o.call(t,e.replace)}catch(e){}if(e.replaceSync)try{null==(n=t.replaceSync)||n.call(t,e.replaceSync)}catch(e){}}applyStyleDeclaration(e,t){if(e.set){getNestedRule(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority)}if(e.remove){getNestedRule(t.rules,e.index).style.removeProperty(e.remove.property)}}applyAdoptedStyleSheet(e){var t;const r=this.mirror.getNode(e.id);if(!r)return;null==(t=e.styles)||t.forEach((e=>{var t;let s=null,o=null;if(hasShadowRoot(r)?o=(null==(t=r.ownerDocument)?void 0:t.defaultView)||null:"#document"===r.nodeName&&(o=r.defaultView),o)try{s=new o.CSSStyleSheet,this.styleMirror.add(s,e.styleId),this.applyStyleSheetRule({source:IncrementalSource.StyleSheetRule,adds:e.rules},s)}catch(e){}}));let s=0;const o=(e,t)=>{const r=t.map((e=>this.styleMirror.getStyle(e))).filter((e=>null!==e));hasShadowRoot(e)?e.shadowRoot.adoptedStyleSheets=r:"#document"===e.nodeName&&(e.adoptedStyleSheets=r),r.length!==t.length&&s<10&&(setTimeout((()=>o(e,t)),0+100*s),s++)};o(r,e.styleIds)}legacy_resolveMissingNode(e,t,r,s){const{previousId:o,nextId:n}=s,i=o&&e[o],a=n&&e[n];if(i){const{node:s,mutation:o}=i;t.insertBefore(s,r),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,s,o)}if(a){const{node:s,mutation:o}=a;t.insertBefore(s,r.nextSibling),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,s,o)}}moveAndHover(e,t,r,s,o){const n=this.mirror.getNode(r);if(!n)return this.debugNodeNotFound(o,r);const i=getBaseDimension(n,this.iframe),a=e*i.absoluteScale+i.x,l=t*i.absoluteScale+i.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${l}px`,s||this.drawMouseTail({x:a,y:l}),this.hoverElements(n)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:r,strokeStyle:s,duration:o}=!0===this.config.mouseTail?defaultMouseTailConfig:Object.assign({},defaultMouseTailConfig,this.config.mouseTail),n=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");e&&this.tailPositions.length&&(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=r,e.lineCap=t,e.strokeStyle=s,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach((t=>e.lineTo(t.x,t.y))),e.stroke())};this.tailPositions.push(e),n(),setTimeout((()=>{this.tailPositions=this.tailPositions.filter((t=>t!==e)),n()}),o/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null==(t=this.lastHoveredRootNode||this.iframe.contentDocument)||t.querySelectorAll(".\\:hover").forEach((e=>{e.classList.remove(":hover")})),this.lastHoveredRootNode=e.getRootNode();let r=e;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(e){return e.type===EventType.IncrementalSnapshot&&(e.data.source>IncrementalSource.Mutation&&e.data.source<=IncrementalSource.Input)}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(ReplayerEvents.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn("[replayer]",...e)}debug(...e){this.config.showDebug&&this.config.logger.log("[replayer]",...e)}}const{addCustomEvent:addCustomEvent}=record,{freezePage:freezePage}=record,{takeFullSnapshot:takeFullSnapshot}=record;window.rrweb={EventType,IncrementalSource,MouseInteractions,Replayer,ReplayerEvents,addCustomEvent,canvasMutation,freezePage,mirror:_mirror,record,takeFullSnapshot,utils};
//# sourceMappingURL=/sm/13b2da7a30c0a9e8e64732f5fdd64f0336185d04f333d2488547841e9432490d.map